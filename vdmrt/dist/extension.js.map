{"version":3,"sources":["../../common/node_modules/async/dist/async.js","../../common/node_modules/debug/src/browser.js","../../common/node_modules/debug/src/common.js","../../common/node_modules/debug/src/index.js","../../common/node_modules/debug/src/node.js","../../common/node_modules/has-flag/index.js","../../common/node_modules/mkdirp/index.js","../../common/node_modules/ms/index.js","../../common/node_modules/portfinder/lib/portfinder.js","../../common/node_modules/semver/semver.js","../../common/node_modules/supports-color/index.js","../../common/node_modules/vscode-jsonrpc/lib/cancellation.js","../../common/node_modules/vscode-jsonrpc/lib/events.js","../../common/node_modules/vscode-jsonrpc/lib/is.js","../../common/node_modules/vscode-jsonrpc/lib/linkedMap.js","../../common/node_modules/vscode-jsonrpc/lib/main.js","../../common/node_modules/vscode-jsonrpc/lib/messageReader.js","../../common/node_modules/vscode-jsonrpc/lib/messageWriter.js","../../common/node_modules/vscode-jsonrpc/lib/messages.js","../../common/node_modules/vscode-jsonrpc/lib/pipeSupport.js","../../common/node_modules/vscode-jsonrpc/lib/socketSupport.js","../../common/node_modules/vscode-languageclient/lib/callHierarchy.proposed.js","../../common/node_modules/vscode-languageclient/lib/client.js","../../common/node_modules/vscode-languageclient/lib/codeConverter.js","../../common/node_modules/vscode-languageclient/lib/colorProvider.js","../../common/node_modules/vscode-languageclient/lib/configuration.js","../../common/node_modules/vscode-languageclient/lib/declaration.js","../../common/node_modules/vscode-languageclient/lib/foldingRange.js","../../common/node_modules/vscode-languageclient/lib/implementation.js","../../common/node_modules/vscode-languageclient/lib/main.js","../../common/node_modules/vscode-languageclient/lib/progress.js","../../common/node_modules/vscode-languageclient/lib/progressPart.js","../../common/node_modules/vscode-languageclient/lib/protocolCodeLens.js","../../common/node_modules/vscode-languageclient/lib/protocolCompletionItem.js","../../common/node_modules/vscode-languageclient/lib/protocolConverter.js","../../common/node_modules/vscode-languageclient/lib/protocolDocumentLink.js","../../common/node_modules/vscode-languageclient/lib/selectionRange.js","../../common/node_modules/vscode-languageclient/lib/semanticTokens.proposed.js","../../common/node_modules/vscode-languageclient/lib/typeDefinition.js","../../common/node_modules/vscode-languageclient/lib/utils/async.js","../../common/node_modules/vscode-languageclient/lib/utils/is.js","../../common/node_modules/vscode-languageclient/lib/utils/processes.js","../../common/node_modules/vscode-languageclient/lib/utils/uuid.js","../../common/node_modules/vscode-languageclient/lib/workspaceFolders.js","../../common/node_modules/vscode-languageserver-protocol/lib/main.js","../../common/node_modules/vscode-languageserver-protocol/lib/messages.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.progress.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.sematicTokens.proposed.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js","../../common/node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js","../../common/node_modules/vscode-languageserver-protocol/lib/utils/is.js","../../common/node_modules/vscode-languageserver-types/lib/esm/main.js","../../common/src/CombinatorialTestingFeature.ts","../../common/src/ProofObligationGenerationFeature.ts","../../common/src/ProofObligationPanel.ts","../../common/src/SpecificationLanguageClient.ts","../../common/src/dapSupport.ts","../../common/src/extension.ts","../../common/src/protocol.lspx.ts",".././src/extension.ts","../external \"child_process\"","../external \"crypto\"","../external \"fs\"","../external \"net\"","../external \"os\"","../external \"path\"","../external \"tty\"","../external \"util\"","../external \"vscode\"","../webpack/bootstrap","../webpack/startup","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator"],"names":["exports","slice","arrayLike","start","newLen","Math","max","length","newArr","Array","idx","apply","fn","args","arguments","callArgs","concat","initialParams","callback","pop","call","this","isObject","value","type","hasSetImmediate","setImmediate","hasNextTick","process","nextTick","fallback","setTimeout","wrap","defer","setImmediate$1","asyncify","func","result","e","then","invokeCallback","err","message","Error","error","rethrow","supportsSymbol","Symbol","isAsync","toStringTag","wrapAsync","asyncFn","applyEach$1","eachfn","fns","go","that","cb","freeGlobal","global","Object","freeSelf","self","root","Function","Symbol$1","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag$1","undefined","nativeObjectToString$1","symToStringTag","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","isLength","isArrayLike","isFunction","breakLoop","noop","once","callFn","iteratorSymbol","iterator","isObjectLike","baseIsArguments","objectProto$3","hasOwnProperty$2","propertyIsEnumerable","isArguments","isArray","freeExports","nodeType","freeModule","module","Buffer","isBuffer","reIsUint","isIndex","test","typedArrayTags","freeExports$1","freeModule$1","freeProcess","nodeUtil","require","types","binding","nodeIsTypedArray","isTypedArray","hasOwnProperty$1","objectProto$5","nativeKeys","transform","arg","overArg","keys","hasOwnProperty$3","object","inherited","isArr","isArg","isBuff","isType","skipIndexes","n","iteratee","index","baseTimes","String","key","push","arrayLikeKeys","Ctor","constructor","baseKeys","onlyOnce","_eachOfLimit","limit","obj","nextElem","coll","i","len","createArrayIterator","okeys","getIterator","item","next","done","createES2015Iterator","running","looping","iterateeCallback","replenish","elem","eachOfLimit","doLimit","iterable","eachOfArrayLike","completed","iteratorCallback","eachOfGeneric","Infinity","eachOf","doParallel","_asyncMap","arr","results","counter","_iteratee","_","v","map","applyEach","doParallelLimit","mapLimit","mapSeries","applyEachSeries","arrayEach","array","baseForOwn","keysFunc","props","baseFor","baseIsNaN","baseIndexOf","fromIndex","strictIndexOf","predicate","fromRight","baseFindIndex","auto","tasks","concurrency","numTasks","runningTasks","hasError","listeners","create","readyTasks","readyToCheck","uncheckedDependencies","enqueueTask","task","taskCallback","safeResults","val","rkey","taskComplete","taskFn","runTask","processQueue","shift","run","taskName","getDependents","dependencies","remainingDependencies","dependencyName","join","taskListeners","dependent","checkForDeadlocks","arrayMap","symbolProto","symbolToString","baseToString","isSymbol","reHasUnicode","RegExp","rsCombo","rsFitz","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsModifier","rsOptVar","rsSeq","rsSymbol","reUnicode","stringToArray","string","hasUnicode","match","unicodeToArray","split","asciiToArray","reTrim","trim","chars","guard","replace","end","strSymbols","chrSymbols","charsStartIndex","charsEndIndex","baseSlice","FN_ARGS","FN_ARG_SPLIT","FN_ARG","STRIP_COMMENTS","autoInject","newTasks","params","fnIsAsync","hasNoDeps","newTask","parseParams","taskCb","newArgs","name","DLL","head","tail","setInitial","dll","node","queue","worker","payload","_worker","numRunning","workersList","processingScheduled","_insert","data","insertAtFront","q","started","idle","drain","l","_tasks","unshift","_next","splice","buffer","unsaturated","isProcessing","saturated","empty","paused","kill","remove","testFn","min","pause","resume","cargo","removeLink","prev","insertAfter","newNode","insertBefore","toArray","curr","eachOfSeries","reduce","memo","x","seq","_functions","newargs","nextargs","compose","reverse","_concat","concatLimit","mapResults","concatSeries","constant","values","identity","_createTester","check","getResult","testResult","testPassed","_findGetResult","detect","detectLimit","detectSeries","consoleFunc","console","dir","doDuring","_fn","_test","truth","doWhilst","doUntil","during","_withoutIndex","eachLimit","eachLimit$1","eachSeries","ensureAsync","sync","innerArgs","notId","every","everyLimit","everySeries","baseProperty","filterArray","truthValues","filterGeneric","sort","a","b","_filter","filter","filterLimit","filterSeries","forever","errback","groupByLimit","groupBy","groupBySeries","log","mapValuesLimit","newObj","mapValues","mapValuesSeries","has","memoize","hasher","queues","memoized","unmemoized","_parallel","parallelLimit","parallelLimit$1","queue$1","items","priorityQueue","priority","nextNode","race","TypeError","reduceRight","reflect","reflectCallback","cbArg","reflectAll","reject$1","reject","rejectLimit","rejectSeries","constant$1","retry","opts","DEFAULT_TIMES","DEFAULT_INTERVAL","options","times","intervalFunc","parseTimes","acc","t","interval","errorFilter","_task","attempt","retryAttempt","retryable","series","some","Boolean","someLimit","someSeries","sortBy","comparator","left","right","criteria","timeout","milliseconds","info","timer","timedOut","clearTimeout","code","nativeCeil","ceil","nativeMax","timeLimit","count","step","baseRange","timesSeries","accumulator","k","tryEach","res","unmemoize","whilst","until","waterfall","taskIndex","nextTask","each","parallel","timesLimit","all","allLimit","allSeries","any","anyLimit","anySeries","find","findLimit","findSeries","forEach","forEachSeries","forEachLimit","forEachOf","forEachOfSeries","forEachOfLimit","inject","foldl","foldr","select","selectLimit","selectSeries","wrapSync","defineProperty","factory","_typeof","_console","formatArgs","useColors","namespace","humanize","diff","c","color","lastC","save","namespaces","storage","setItem","removeItem","load","r","getItem","env","DEBUG","window","__nwjs","navigator","userAgent","toLowerCase","document","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","$1","localStorage","localstorage","colors","formatters","j","JSON","stringify","selectColor","hash","charCodeAt","createDebug","abs","prevTime","debug","enabled","_len","_key","Number","Date","ms","coerce","format","formatter","logFn","destroy","extend","init","instances","indexOf","delimiter","default","stack","disable","enable","names","skips","substr","instance","browser","tty","util","inspectOpts","stderr","write","colorCode","prefix","hideDate","toISOString","isatty","fd","supportsColor","level","prop","substring","toUpperCase","o","inspect","O","flag","argv","startsWith","position","terminatorPosition","path","fs","_0777","mkdirP","p","f","made","mode","xfs","resolve","mkdir","er","dirname","stat","er2","isDirectory","mkdirp","mkdirSync","err0","statSync","err1","s","m","h","d","plural","msAbs","isPlural","round","str","exec","parseFloat","parse","isFinite","long","fmtShort","os","net","_async","debugTestPort","debugGetPort","debugDefaultHosts","internals","onListen","host","port","server","removeListener","onError","close","nextPort","highestPort","testPort","createServer","listen","basePort","basePath","getPort","stopPort","startPort","hasUserGivenHost","_defaultHosts","currentHost","openPorts","msg","getPortPromise","Promise","getPorts","lastPort","asyncCallback","getSocket","testSocket","nextSocket","mod","exists","stats","createAndTestSocket","socketPath","basename","base","isNaN","interfaces","networkInterfaces","syscall","interfaceNames","_interface","address","SemVer","NODE_DEBUG","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","re","src","tokens","R","tok","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULLPLAIN","FULL","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","COERCERTL","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","version","loose","includePrerelease","raw","major","minor","patch","prerelease","id","num","build","valid","clean","compare","other","compareMain","comparePre","compareIdentifiers","compareBuild","inc","release","identifier","version1","version2","eq","v1","v2","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","semver","ANY","operator","rcompareIdentifiers","compareLoose","versionA","versionB","rcompare","list","rsort","Range","range","set","parseRange","isSatisfiable","comparators","remainingComparators","testComparator","otherComparator","intersects","isX","hyphenReplace","$0","from","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","satisfies","outside","hilo","gtfn","ltefn","ltfn","ecomp","high","low","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","pr","ret","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","anyX","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","rangeComparators","thisComparator","rangeComparator","toComparators","maxSatisfying","versions","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","parsed","r1","r2","rtl","lastIndex","hasFlag","forceColor","translateLevel","hasBasic","has256","has16m","haveStream","streamIsTTY","TERM","platform","osRelease","sign","CI_NAME","TEAMCITY_VERSION","COLORTERM","TERM_PROGRAM_VERSION","TERM_PROGRAM","FORCE_COLOR","stream","isTTY","stdout","events_1","Is","CancellationToken","None","freeze","isCancellationRequested","onCancellationRequested","Event","Cancelled","is","candidate","boolean","shortcutEvent","context","handle","bind","MutableToken","_isCancelled","_emitter","fire","dispose","Emitter","event","CancellationTokenSource","_token","cancel","Disposable","_disposable","CallbackList","bucket","_callbacks","_contexts","foundCallbackWithDifferentContext","callbacks","contexts","_options","_event","listener","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","number","stringArray","Touch","First","Last","LinkedMap","_map","Map","_head","_tail","_size","clear","get","touch","previous","addItemLast","addItemFirst","delete","callbackfn","thisArg","current","__export","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","cancellation_1","linkedMap_1","CancelNotification","ProgressNotification","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionState","ProgressType","NullLogger","warn","fromString","Off","Messages","Verbose","Text","ConnectionError","super","setPrototypeOf","_createMessageConnection","messageReader","messageWriter","logger","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","tracer","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","messageQueue","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","size","isRequestMessage","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","traceSendingResponse","replyError","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","now","cancellationSource","tokenKey","handlerResult","numberOfParams","token","promise","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","source","traceReceivedNotification","handleNotification","isResponseMessage","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","onClose","toCancel","response","addMessageToQueue","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","connection","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","onProgress","_type","sendProgress","onUnhandledProgress","sendRequest","throwIfNotListening","last","traceSendingRequest","MessageWriteError","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","AlreadyListening","throwIfListening","verbose","ConnectionStrategy","createMessageConnection","input","output","read","isMessageWriter","DefaultSize","CR","LF","MessageBuffer","encoding","allocUnsafe","chunk","toAppend","bufferLen","byteLength","copy","newSize","header","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","on","onData","fireError","fireClose","append","headers","tryReadHeaders","contentLength","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","firePartialMessage","waitingTime","eventEmitter","socket","ContentLength","CRLF","AbstractMessageWriter","writable","errorCount","sending","doWriteMessage","send","handleError","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","path_1","os_1","crypto_1","net_1","generateRandomPipeName","randomSuffix","randomBytes","tmpdir","createClientPipeTransport","pipeName","connectResolve","connected","_reject","onConnected","createServerPipeTransport","createConnection","createClientSocketTransport","createServerSocketTransport","vscode_1","vscode_languageserver_protocol_1","client_1","ensure","target","protocol2code","code2protocol","asCallHierarchyItem","converter","CallHierarchyItem","asSymbolKind","kind","detail","asUri","uri","asRange","selectionRange","tags","asSymbolTags","asCallHierarchyIncomingCall","CallHierarchyIncomingCall","asRanges","fromRanges","asCallHierarchyOutgoingCall","CallHierarchyOutgoingCall","asCallHierarchyItems","asCallHierarchyIncomingCalls","asCallHierarchyOutgoingCalls","CallHierarchyProvider","client","middleware","clientOptions","prepareCallHierarchy","code2ProtocolConverter","asTextDocumentPositionParams","Proposed","CallHierarchyPrepareRequest","protocol2CodeConverter","logFailedRequest","provideCallHierarchyIncomingCalls","CallHierarchyIncomingCallsRequest","provideCallHierarchyOutgoingCalls","CallHierarchyOutgoingCallsRequest","provideCallHierarchyOutgingCalls","CallHierarchyFeature","TextDocumentFeature","cap","dynamicRegistration","documentSelector","capabilities","getRegistration","callHierarchyProvider","register","messages","registerOptions","_client","provider","languages","registerCallHierarchyProvider","c2p","p2c","async_1","UUID","progressPart_1","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","State","ClientState","DefaultErrorHandler","restarts","_error","Continue","Shutdown","Restart","showErrorMessage","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Variable","Constant","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","DynamicFeature","unregister","DocumentNotifiactions","_middleware","_createParams","_selectorFilter","_selectors","selectors","textDocument","selector","_listener","notificationSent","_data","DidOpenTextDocumentFeature","_syncedDocuments","workspace","onDidOpenTextDocument","DidOpenTextDocumentNotification","didOpen","asOpenTextDocumentParams","textDocumentFilter","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","assign","syncKind","onDidChangeTextDocument","contentChanges","changeData","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","onDidCreate","resource","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","_registrations","registration","registerLanguageProvider","capability","TextDocumentRegistrationOptions","StaticRegistrationOptions","hasId","WorkDoneProgressOptions","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","tagSupport","valueSet","CompletionItemTag","Deprecated","completionItemKind","getRegistrationOptions","completionProvider","triggerCharacters","provideCompletionItems","asCompletionParams","asCompletionResult","provideCompletionItem","resolveCompletionItem","resolveProvider","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","provideSignatureHelp","providerSignatureHelp","asSignatureHelpParams","asSignatureHelp","retriggerCharacters","registerSignatureHelpProvider","metaData","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","provideReferences","_providerReferences","asReferenceParams","asReferences","registerReferenceProvider","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","_provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","_provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","workDoneProgress","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","isPreferredSupport","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","provideCodeActions","_provideCodeActions","asTextDocumentIdentifier","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","provideOnTypeFormattingEdits","ch","asPosition","moreTriggerCharacter","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkCapabilities","tooltipSupport","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","workspaceFolder","getConfiguration","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","executeCommand","command","commands","registerCommand","MessageTransports","reader","writer","OnReady","_resolve","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","errorHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_traceOutputChannel","traceOutputChannel","_providers","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","_state","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","createOutputChannel","_trace","onReady","resolveConnection","responseError","showNotification","appendLine","toLocaleTimeString","data2String","Info","showNotificationMessage","Warn","showInformationMessage","show","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","Warning","onShowMessage","showWarningMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","stop","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","pid","clientInfo","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","part","ProgressPart","workDoneToken","doInitialize","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","title","folders","folder","scheme","cleanUp","shutdown","exit","cleanUpChannel","channel","diagnostics","_a","_b","didChangeWatchedFile","didChangeWatchedFiles","changes","workSpaceMiddleware","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","createProtocolConnection","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","traceConfig","_connection","fileEvents","registerRaw","features","feature","registerFeature","request","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","versionSupport","DiagnosticTag","Unnecessary","fillClientCapabilities","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","asPromise","proto","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","reason","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","asCompletionTriggerKind","triggerKind","CompletionTriggerKind","TriggerCharacter","TriggerForIncompleteCompletions","Invoked","asSignatureHelpTriggerKind","SignatureHelpTriggerKind","Invoke","ContentChange","asParameterInformation","label","asSignatureInformation","parameters","asWorkerPosition","line","character","inserting","replacing","isInsertReplace","asLocation","Location","asDiagnosticSeverity","DiagnosticSeverity","Information","Hint","asDiagnosticTag","asRelatedInformation","location","asDiagnostic","Diagnostic","severity","converted","asDiagnosticTags","asCompletionItemTag","asTextEdit","newText","asSymbolTag","languageId","text","getText","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","isRetrigger","activeSignatureHelp","signatures","activeSignature","activeParameter","asPositions","protocolItem","original","documentation","asDocumentation","filterText","InsertTextFormat","textEdit","insertText","SnippetString","insertTextFormat","fromEdit","fillPrimaryInsertText","originalItemKind","sortText","additionalTextEdits","commitCharacters","preselect","asCompletionItemTags","deprecated","includeDeclaration","only","CodeActionContext","CodeLens","tabSize","insertSpaces","DocumentLink","tooltip","ColorProviderFeature","DocumentColorRequest","colorProvider","provideColorPresentations","requestParams","ColorPresentationRequest","asColorPresentations","provideDocumentColors","asColorInformations","registerColorProvider","red","green","blue","alpha","colorInformation","ci","ColorInformation","asColor","colorPresentations","cp","presentation","ColorPresentation","configuration","ConfigurationRequest","scopeUri","lastIndexOf","DeclarationFeature","DeclarationRequest","declarationSupport","declarationProvider","provideDeclaration","asDeclarationResult","registerDeclarationProvider","FoldingRangeFeature","FoldingRangeRequest","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","asFoldingRanges","registerFoldingRangeProvider","FoldingRangeKind","Comment","Imports","Region","foldingRanges","FoldingRange","startLine","endLine","asFoldingRangeKind","ImplementationFeature","ImplementationRequest","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","colorProvider_1","configuration_1","implementation_1","typeDefinition_1","workspaceFolders_1","foldingRange_1","declaration_1","selectionRange_1","progress_1","callHierarchy_proposed_1","semanticTokens_proposed_1","processes_1","Executable","TransportKind","Transport","NodeModule","StreamInfo","ChildProcessInfo","ProposedFeatures","isSocket","detached","LanguageClient","arg1","arg2","arg3","arg4","arg5","serverOptions","forceDebug","_serverOptions","_forceDebug","checkVersion","codeVersion","_serverProcess","toCheck","_isDetached","checkProcessDied","childProcess","terminate","getEnvironment","fork","debugStartWith","debugEquals","assertStdio","stdin","runDebug","execArgv","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","transport","stdio","runtime","ipc","pipe","cwd","silent","sp","protocol","execOptions","serverProcess","spawn","registerFeatures","createAll","TypeDefinitionFeature","WorkspaceFoldersFeature","SelectionRangeFeature","ProgressFeature","_mainGetRootPath","lstat","SettingMonitor","_setting","primary","rest","needsStart","SemanticTokensFeature","WorkDoneProgressCreateRequest","_reported","WorkDoneProgress","begin","report","cancellable","ProgressLocation","Notification","Window","withProgress","async","progress","cancellationToken","_progress","_infinite","percentage","_cancellationToken","WorkDoneProgressCancelNotification","delta","increment","ProtocolCodeLens","ProtocolCompletionItem","CompletionItem","ls","CodeBlock","language","diagnostic","asDiagnosticRelatedInformation","information","DiagnosticRelatedInformation","Position","MarkdownString","asCompletionInsertText","itemKind","TextEdit","asSignatureInformations","SignatureInformation","asParameterInformations","ParameterInformation","asLocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","asLocationResult","LocationLink","asDocumentHighlight","DocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asSymbolInformation","SymbolInformation","containerName","asDocumentSymbol","children","child","kindMapping","asCodeActionKind","parts","WorkspaceEdit","CreateFile","createFile","RenameFile","renameFile","oldUri","newUri","DeleteFile","deleteFile","asColorInformation","asColorPresentation","asFoldingRange","asSelectionRange","SelectionRange","parent","hover","Hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","contents","CompletionList","isIncomplete","SignatureHelp","asCommands","CodeAction","isPreferred","asSelectionRanges","selectionRanges","ProtocolDocumentLink","SelectionRangeRequest","selectionRangeProvider","provideSelectionRanges","positions","ranges","registerSelectionRangeProvider","vscode","asSemanticTokensEdit","SemanticTokensEdit","deleteCount","Uint32Array","asSemanticTokens","SemanticTokens","resultId","asSemanticTokensEdits","SemanticTokensEdits","asLegend","SemanticTokensRequest","tokenTypes","SemanticTokenTypes","comment","keyword","regexp","struct","class","interface","enum","typeParameter","function","member","macro","variable","parameter","property","tokenModifiers","SemanticTokenModifiers","declaration","static","abstract","readonly","semanticTokensProvider","documentProvider","provideDocumentSemanticTokens","provideDocumentSemanticTokensEdits","previousResultId","SemanticTokensEditsRequest","rangeProvider","provideDocumentRangeSemanticTokens","SemanticTokensRangeRequest","legend","registerDocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","TypeDefinitionRequest","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","defaultDelay","completionPromise","onSuccess","delay","cancelTimeout","thenable","typedArray","resolved","isWindows","isMacintosh","isLinux","execFileSync","cmd","__dirname","spawnSync","ValueUUID","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","floor","random","_chars","v4","_UUIDPattern","isUUID","access","arrayDiff","DidChangeWorkspaceFoldersNotification","initializeWithFolders","asProtocol","currentWorkspaceFolders","_initialFolders","WorkspaceFoldersRequest","removed","added","doSendEvent","addedFolders","removedFolders","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","sendInitialEvent","vscode_jsonrpc_1","callHierarchy","st","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","resultType","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","DocumentFilter","DocumentSelector","pattern","Abort","Transactional","Undo","objectLiteral","hasWorkDoneProgress","InitializeError","unknownProtocolVersion","Log","one","two","three","four","defined","startCharacter","endCharacter","_i","insert","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","recursive","ignoreIfNotExists","TextDocumentIdentifier","TextDocumentItem","MarkupContent","MarkedString","SymbolTag","FormattingOptions","TextEditChangeImpl","WorkspaceChange","_this","_textEditChanges","_workspaceEdit","textEditChange","enumerable","configurable","getTextEditChange","textDocumentEdit","checkDocumentChanges","fromPlainText","plainText","SourceFixAll","commandOrEdit","TextDocument","EOL","mergeSort","leftIdx","rightIdx","content","FullTextDocument","lineCount","positionAt","offsetAt","applyEdits","sortedEdits","lastModifiedOffset","startOffset","endOffset","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","charAt","offset","mid","lineOffset","nextLineOffset","_context","experimental","combinatorialTesting","subscriptions","_runPOGDisp","proofObligationGeneration","proofObligationProvider","registerPOGCommand","registerPOGUpdatedNotificationHandler","inputUri","runPOG","POGUpdatedNotification","ProofObligationPanel","currentPanel","successful","_lastUri","displayWarning","revealPOGView","setStatusBarMessage","activeTextEditor","pos","GeneratePORequest","createOrShowPanel","extensionPath","displayNewPOS","extensionUri","panel","_disposables","_showProvedPOs","_sorting","_panel","_extensionUri","onDidDispose","webview","onDidReceiveMessage","po","_pos","doc","openTextDocument","showTextDocument","selection","viewColumn","_currentSortingHeader","postMessage","sortPOs","toggleState","html","_getHtmlForWebview","moveFocus","column","ViewColumn","Two","reveal","createWebviewPanel","viewType","preserveFocus","enableScripts","localResourceRoots","resourcesUri","retainContextWhenHidden","sortingHeader","changeSortingDirection","proved","aStringVal","bStringVal","aIdVal","bIdVal","localeCompare","joinPath","scriptUri","asWebviewUri","styleUri","scriptNonce","possible","getNonce","cspSource","SpecificationLanguageClient","ProofObligationGenerationFeature","CombinantorialTestingFeature","dialect","VdmConfigurationProvider","registerDebugConfigurationProvider","VdmDebugAdapterDescriptorFactory","registerDebugAdapterDescriptorFactory","editor","stopOnEntry","noDebug","dapPort","session","executable","DebugAdapterServer","writeToLog","logStream","createWriteStream","flags","vdmDialect","clientLogFile","serverLogFile","vdmjPath","lspServerPath","experimentalServer","defaultLspPort","lspPort","defaultDapPort","connect","dapSupport","initDebugConfig","portfinder","javaPath","binname","workspaces","binpath","existsSync","pathparts","findJavaExecutable","child_process","catch","vdmExtension","activate","deactivate","__webpack_module_cache__","__webpack_require__","moduleId","loaded","__webpack_modules__","definition","nmd","paths"],"mappings":"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","file":"extension.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.async = global.async || {})));\n}(this, (function (exports) { 'use strict';\n\nfunction slice(arrayLike, start) {\n    start = start|0;\n    var newLen = Math.max(arrayLike.length - start, 0);\n    var newArr = Array(newLen);\n    for(var idx = 0; idx < newLen; idx++)  {\n        newArr[idx] = arrayLike[start + idx];\n    }\n    return newArr;\n}\n\n/**\n * Creates a continuation function with some arguments already applied.\n *\n * Useful as a shorthand when combined with other control flow functions. Any\n * arguments passed to the returned function are added to the arguments\n * originally passed to apply.\n *\n * @name apply\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {Function} fn - The function you want to eventually apply all\n * arguments to. Invokes with (arguments...).\n * @param {...*} arguments... - Any number of arguments to automatically apply\n * when the continuation is called.\n * @returns {Function} the partially-applied function\n * @example\n *\n * // using apply\n * async.parallel([\n *     async.apply(fs.writeFile, 'testfile1', 'test1'),\n *     async.apply(fs.writeFile, 'testfile2', 'test2')\n * ]);\n *\n *\n * // the same process without using apply\n * async.parallel([\n *     function(callback) {\n *         fs.writeFile('testfile1', 'test1', callback);\n *     },\n *     function(callback) {\n *         fs.writeFile('testfile2', 'test2', callback);\n *     }\n * ]);\n *\n * // It's possible to pass any number of additional arguments when calling the\n * // continuation:\n *\n * node> var fn = async.apply(sys.puts, 'one');\n * node> fn('two', 'three');\n * one\n * two\n * three\n */\nvar apply = function(fn/*, ...args*/) {\n    var args = slice(arguments, 1);\n    return function(/*callArgs*/) {\n        var callArgs = slice(arguments);\n        return fn.apply(null, args.concat(callArgs));\n    };\n};\n\nvar initialParams = function (fn) {\n    return function (/*...args, callback*/) {\n        var args = slice(arguments);\n        var callback = args.pop();\n        fn.call(this, args, callback);\n    };\n};\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nvar hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return function (fn/*, ...args*/) {\n        var args = slice(arguments, 1);\n        defer(function () {\n            fn.apply(null, args);\n        });\n    };\n}\n\nvar _defer;\n\nif (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nvar setImmediate$1 = wrap(_defer);\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    return initialParams(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if (isObject(result) && typeof result.then === 'function') {\n            result.then(function(value) {\n                invokeCallback(callback, null, value);\n            }, function(err) {\n                invokeCallback(callback, err.message ? err : new Error(err));\n            });\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (e) {\n        setImmediate$1(rethrow, e);\n    }\n}\n\nfunction rethrow(error) {\n    throw error;\n}\n\nvar supportsSymbol = typeof Symbol === 'function';\n\nfunction isAsync(fn) {\n    return supportsSymbol && fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction wrapAsync(asyncFn) {\n    return isAsync(asyncFn) ? asyncify(asyncFn) : asyncFn;\n}\n\nfunction applyEach$1(eachfn) {\n    return function(fns/*, ...args*/) {\n        var args = slice(arguments, 1);\n        var go = initialParams(function(args, callback) {\n            var that = this;\n            return eachfn(fns, function (fn, cb) {\n                wrapAsync(fn).apply(that, args.concat(cb));\n            }, callback);\n        });\n        if (args.length) {\n            return go.apply(this, args);\n        }\n        else {\n            return go;\n        }\n    };\n}\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Built-in value references. */\nvar Symbol$1 = root.Symbol;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag$1 = Symbol$1 ? Symbol$1.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag$1),\n      tag = value[symToStringTag$1];\n\n  try {\n    value[symToStringTag$1] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag$1] = tag;\n    } else {\n      delete value[symToStringTag$1];\n    }\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$1.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]';\nvar undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol$1 ? Symbol$1.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]';\nvar funcTag = '[object Function]';\nvar genTag = '[object GeneratorFunction]';\nvar proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nvar breakLoop = {};\n\n/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nfunction once(fn) {\n    return function () {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\n\nvar iteratorSymbol = typeof Symbol === 'function' && Symbol.iterator;\n\nvar getIterator = function (coll) {\n    return iteratorSymbol && coll[iteratorSymbol] && coll[iteratorSymbol]();\n};\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/** Used for built-in method references. */\nvar objectProto$3 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$2 = objectProto$3.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto$3.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty$2.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER$1 = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER$1 : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/** `Object#toString` result references. */\nvar argsTag$1 = '[object Arguments]';\nvar arrayTag = '[object Array]';\nvar boolTag = '[object Boolean]';\nvar dateTag = '[object Date]';\nvar errorTag = '[object Error]';\nvar funcTag$1 = '[object Function]';\nvar mapTag = '[object Map]';\nvar numberTag = '[object Number]';\nvar objectTag = '[object Object]';\nvar regexpTag = '[object RegExp]';\nvar setTag = '[object Set]';\nvar stringTag = '[object String]';\nvar weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]';\nvar dataViewTag = '[object DataView]';\nvar float32Tag = '[object Float32Array]';\nvar float64Tag = '[object Float64Array]';\nvar int8Tag = '[object Int8Array]';\nvar int16Tag = '[object Int16Array]';\nvar int32Tag = '[object Int32Array]';\nvar uint8Tag = '[object Uint8Array]';\nvar uint8ClampedTag = '[object Uint8ClampedArray]';\nvar uint16Tag = '[object Uint16Array]';\nvar uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag$1] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag$1] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/** Detect free variable `exports`. */\nvar freeExports$1 = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule$1 = freeExports$1 && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports$1 = freeModule$1 && freeModule$1.exports === freeExports$1;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports$1 && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule$1 && freeModule$1.require && freeModule$1.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/** Used for built-in method references. */\nvar objectProto$2 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$1 = objectProto$2.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty$1.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto$5 = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto$5;\n\n  return value === proto;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\n/** Used for built-in method references. */\nvar objectProto$4 = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty$3 = objectProto$4.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty$3.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? {value: coll[i], key: i} : null;\n    }\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done)\n            return null;\n        i++;\n        return {value: item.value, key: i};\n    }\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = keys(obj);\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        return i < len ? {value: obj[key], key: key} : null;\n    };\n}\n\nfunction iterator(coll) {\n    if (isArrayLike(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = getIterator(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\n\nfunction onlyOnce(fn) {\n    return function() {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, arguments);\n    };\n}\n\nfunction _eachOfLimit(limit) {\n    return function (obj, iteratee, callback) {\n        callback = once(callback || noop);\n        if (limit <= 0 || !obj) {\n            return callback(null);\n        }\n        var nextElem = iterator(obj);\n        var done = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            }\n            else if (value === breakLoop || (done && running <= 0)) {\n                done = true;\n                return callback(null);\n            }\n            else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish () {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, onlyOnce(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n}\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachOfLimit(coll, limit, iteratee, callback) {\n    _eachOfLimit(limit)(coll, wrapAsync(iteratee), callback);\n}\n\nfunction doLimit(fn, limit) {\n    return function (iterable, iteratee, callback) {\n        return fn(iterable, limit, iteratee, callback);\n    };\n}\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = once(callback || noop);\n    var index = 0,\n        completed = 0,\n        length = coll.length;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err) {\n            callback(err);\n        } else if ((++completed === length) || value === breakLoop) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, onlyOnce(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nvar eachOfGeneric = doLimit(eachOfLimit, Infinity);\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @example\n *\n * var obj = {dev: \"/dev.json\", test: \"/test.json\", prod: \"/prod.json\"};\n * var configs = {};\n *\n * async.forEachOf(obj, function (value, key, callback) {\n *     fs.readFile(__dirname + value, \"utf8\", function (err, data) {\n *         if (err) return callback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }, function (err) {\n *     if (err) console.error(err.message);\n *     // configs is now a map of JSON data\n *     doSomethingWith(configs);\n * });\n */\nvar eachOf = function(coll, iteratee, callback) {\n    var eachOfImplementation = isArrayLike(coll) ? eachOfArrayLike : eachOfGeneric;\n    eachOfImplementation(coll, wrapAsync(iteratee), callback);\n};\n\nfunction doParallel(fn) {\n    return function (obj, iteratee, callback) {\n        return fn(eachOf, obj, wrapAsync(iteratee), callback);\n    };\n}\n\nfunction _asyncMap(eachfn, arr, iteratee, callback) {\n    callback = callback || noop;\n    arr = arr || [];\n    var results = [];\n    var counter = 0;\n    var _iteratee = wrapAsync(iteratee);\n\n    eachfn(arr, function (value, _, callback) {\n        var index = counter++;\n        _iteratee(value, function (err, v) {\n            results[index] = v;\n            callback(err);\n        });\n    }, function (err) {\n        callback(err, results);\n    });\n}\n\n/**\n * Produces a new collection of values by mapping each value in `coll` through\n * the `iteratee` function. The `iteratee` is called with an item from `coll`\n * and a callback for when it has finished processing. Each of these callback\n * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n * `iteratee` passes an error to its callback, the main `callback` (for the\n * `map` function) is immediately called with the error.\n *\n * Note, that since this function applies the `iteratee` to each item in\n * parallel, there is no guarantee that the `iteratee` functions will complete\n * in order. However, the results array will be in the same order as the\n * original `coll`.\n *\n * If `map` is passed an Object, the results will be an Array.  The results\n * will roughly be in the order of the original Objects' keys (but this can\n * vary across JavaScript engines).\n *\n * @name map\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an Array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @example\n *\n * async.map(['file1','file2','file3'], fs.stat, function(err, results) {\n *     // results is now an array of stats for each file\n * });\n */\nvar map = doParallel(_asyncMap);\n\n/**\n * Applies the provided arguments to each function in the array, calling\n * `callback` after all functions have completed. If you only provide the first\n * argument, `fns`, then it will return a function which lets you pass in the\n * arguments as if it were a single function call. If more arguments are\n * provided, `callback` is required while `args` is still optional.\n *\n * @name applyEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} fns - A collection of {@link AsyncFunction}s\n * to all call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {Function} - If only the first argument, `fns`, is provided, it will\n * return a function which lets you pass in the arguments as if it were a single\n * function call. The signature is `(..args, callback)`. If invoked with any\n * arguments, `callback` is required.\n * @example\n *\n * async.applyEach([enableSearch, updateSchema], 'bucket', callback);\n *\n * // partial application example:\n * async.each(\n *     buckets,\n *     async.applyEach([enableSearch, updateSchema]),\n *     callback\n * );\n */\nvar applyEach = applyEach$1(map);\n\nfunction doParallelLimit(fn) {\n    return function (obj, limit, iteratee, callback) {\n        return fn(_eachOfLimit(limit), obj, wrapAsync(iteratee), callback);\n    };\n}\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs a maximum of `limit` async operations at a time.\n *\n * @name mapLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n */\nvar mapLimit = doParallelLimit(_asyncMap);\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs only a single async operation at a time.\n *\n * @name mapSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n */\nvar mapSeries = doLimit(mapLimit, 1);\n\n/**\n * The same as [`applyEach`]{@link module:ControlFlow.applyEach} but runs only a single async operation at a time.\n *\n * @name applyEachSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.applyEach]{@link module:ControlFlow.applyEach}\n * @category Control Flow\n * @param {Array|Iterable|Object} fns - A collection of {@link AsyncFunction}s to all\n * call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {Function} - If only the first argument is provided, it will return\n * a function which lets you pass in the arguments as if it were a single\n * function call.\n */\nvar applyEachSeries = applyEach$1(mapSeries);\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\n/**\n * Determines the best order for running the {@link AsyncFunction}s in `tasks`, based on\n * their requirements. Each function can optionally depend on other functions\n * being completed first, and each function is run as soon as its requirements\n * are satisfied.\n *\n * If any of the {@link AsyncFunction}s pass an error to their callback, the `auto` sequence\n * will stop. Further tasks will not execute (so any other functions depending\n * on it will not run), and the main `callback` is immediately called with the\n * error.\n *\n * {@link AsyncFunction}s also receive an object containing the results of functions which\n * have completed so far as the first argument, if they have dependencies. If a\n * task function has no dependencies, it will only be passed a callback.\n *\n * @name auto\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Object} tasks - An object. Each of its properties is either a\n * function or an array of requirements, with the {@link AsyncFunction} itself the last item\n * in the array. The object's key of a property serves as the name of the task\n * defined by that property, i.e. can be used when specifying requirements for\n * other tasks. The function receives one or two arguments:\n * * a `results` object, containing the results of the previously executed\n *   functions, only passed if the task has any dependencies,\n * * a `callback(err, result)` function, which must be called when finished,\n *   passing an `error` (which can be `null`) and the result of the function's\n *   execution.\n * @param {number} [concurrency=Infinity] - An optional `integer` for\n * determining the maximum number of tasks that can be run in parallel. By\n * default, as many as possible.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback. Results are always returned; however, if an\n * error occurs, no further `tasks` will be performed, and the results object\n * will only contain partial results. Invoked with (err, results).\n * @returns undefined\n * @example\n *\n * async.auto({\n *     // this function will just be passed a callback\n *     readData: async.apply(fs.readFile, 'data.txt', 'utf-8'),\n *     showData: ['readData', function(results, cb) {\n *         // results.readData is the file's contents\n *         // ...\n *     }]\n * }, callback);\n *\n * async.auto({\n *     get_data: function(callback) {\n *         console.log('in get_data');\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         console.log('in make_folder');\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: ['get_data', 'make_folder', function(results, callback) {\n *         console.log('in write_file', JSON.stringify(results));\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(results, callback) {\n *         console.log('in email_link', JSON.stringify(results));\n *         // once the file is written let's email a link to it...\n *         // results.write_file contains the filename returned by write_file.\n *         callback(null, {'file':results.write_file, 'email':'user@example.com'});\n *     }]\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('results = ', results);\n * });\n */\nvar auto = function (tasks, concurrency, callback) {\n    if (typeof concurrency === 'function') {\n        // concurrency is optional, shift the args.\n        callback = concurrency;\n        concurrency = null;\n    }\n    callback = once(callback || noop);\n    var keys$$1 = keys(tasks);\n    var numTasks = keys$$1.length;\n    if (!numTasks) {\n        return callback(null);\n    }\n    if (!concurrency) {\n        concurrency = numTasks;\n    }\n\n    var results = {};\n    var runningTasks = 0;\n    var hasError = false;\n\n    var listeners = Object.create(null);\n\n    var readyTasks = [];\n\n    // for cycle detection:\n    var readyToCheck = []; // tasks that have been identified as reachable\n    // without the possibility of returning to an ancestor task\n    var uncheckedDependencies = {};\n\n    baseForOwn(tasks, function (task, key) {\n        if (!isArray(task)) {\n            // no dependencies\n            enqueueTask(key, [task]);\n            readyToCheck.push(key);\n            return;\n        }\n\n        var dependencies = task.slice(0, task.length - 1);\n        var remainingDependencies = dependencies.length;\n        if (remainingDependencies === 0) {\n            enqueueTask(key, task);\n            readyToCheck.push(key);\n            return;\n        }\n        uncheckedDependencies[key] = remainingDependencies;\n\n        arrayEach(dependencies, function (dependencyName) {\n            if (!tasks[dependencyName]) {\n                throw new Error('async.auto task `' + key +\n                    '` has a non-existent dependency `' +\n                    dependencyName + '` in ' +\n                    dependencies.join(', '));\n            }\n            addListener(dependencyName, function () {\n                remainingDependencies--;\n                if (remainingDependencies === 0) {\n                    enqueueTask(key, task);\n                }\n            });\n        });\n    });\n\n    checkForDeadlocks();\n    processQueue();\n\n    function enqueueTask(key, task) {\n        readyTasks.push(function () {\n            runTask(key, task);\n        });\n    }\n\n    function processQueue() {\n        if (readyTasks.length === 0 && runningTasks === 0) {\n            return callback(null, results);\n        }\n        while(readyTasks.length && runningTasks < concurrency) {\n            var run = readyTasks.shift();\n            run();\n        }\n\n    }\n\n    function addListener(taskName, fn) {\n        var taskListeners = listeners[taskName];\n        if (!taskListeners) {\n            taskListeners = listeners[taskName] = [];\n        }\n\n        taskListeners.push(fn);\n    }\n\n    function taskComplete(taskName) {\n        var taskListeners = listeners[taskName] || [];\n        arrayEach(taskListeners, function (fn) {\n            fn();\n        });\n        processQueue();\n    }\n\n\n    function runTask(key, task) {\n        if (hasError) return;\n\n        var taskCallback = onlyOnce(function(err, result) {\n            runningTasks--;\n            if (arguments.length > 2) {\n                result = slice(arguments, 1);\n            }\n            if (err) {\n                var safeResults = {};\n                baseForOwn(results, function(val, rkey) {\n                    safeResults[rkey] = val;\n                });\n                safeResults[key] = result;\n                hasError = true;\n                listeners = Object.create(null);\n\n                callback(err, safeResults);\n            } else {\n                results[key] = result;\n                taskComplete(key);\n            }\n        });\n\n        runningTasks++;\n        var taskFn = wrapAsync(task[task.length - 1]);\n        if (task.length > 1) {\n            taskFn(results, taskCallback);\n        } else {\n            taskFn(taskCallback);\n        }\n    }\n\n    function checkForDeadlocks() {\n        // Kahn's algorithm\n        // https://en.wikipedia.org/wiki/Topological_sorting#Kahn.27s_algorithm\n        // http://connalle.blogspot.com/2013/10/topological-sortingkahn-algorithm.html\n        var currentTask;\n        var counter = 0;\n        while (readyToCheck.length) {\n            currentTask = readyToCheck.pop();\n            counter++;\n            arrayEach(getDependents(currentTask), function (dependent) {\n                if (--uncheckedDependencies[dependent] === 0) {\n                    readyToCheck.push(dependent);\n                }\n            });\n        }\n\n        if (counter !== numTasks) {\n            throw new Error(\n                'async.auto cannot execute tasks due to a recursive dependency'\n            );\n        }\n    }\n\n    function getDependents(taskName) {\n        var result = [];\n        baseForOwn(tasks, function (task, key) {\n            if (isArray(task) && baseIndexOf(task, taskName, 0) >= 0) {\n                result.push(key);\n            }\n        });\n        return result;\n    }\n};\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol$1 ? Symbol$1.prototype : undefined;\nvar symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the last unmatched string symbol.\n */\nfunction charsEndIndex(strSymbols, chrSymbols) {\n  var index = strSymbols.length;\n\n  while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\n/**\n * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the first unmatched string symbol.\n */\nfunction charsStartIndex(strSymbols, chrSymbols) {\n  var index = -1,\n      length = strSymbols.length;\n\n  while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\n/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff';\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f';\nvar reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f';\nvar rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff';\nvar rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\nvar rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange$1 = '\\\\ud800-\\\\udfff';\nvar rsComboMarksRange$1 = '\\\\u0300-\\\\u036f';\nvar reComboHalfMarksRange$1 = '\\\\ufe20-\\\\ufe2f';\nvar rsComboSymbolsRange$1 = '\\\\u20d0-\\\\u20ff';\nvar rsComboRange$1 = rsComboMarksRange$1 + reComboHalfMarksRange$1 + rsComboSymbolsRange$1;\nvar rsVarRange$1 = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange$1 + ']';\nvar rsCombo = '[' + rsComboRange$1 + ']';\nvar rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]';\nvar rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')';\nvar rsNonAstral = '[^' + rsAstralRange$1 + ']';\nvar rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}';\nvar rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]';\nvar rsZWJ$1 = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?';\nvar rsOptVar = '[' + rsVarRange$1 + ']?';\nvar rsOptJoin = '(?:' + rsZWJ$1 + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*';\nvar rsSeq = rsOptVar + reOptMod + rsOptJoin;\nvar rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/**\n * Removes leading and trailing whitespace or specified characters from `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to trim.\n * @param {string} [chars=whitespace] The characters to trim.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the trimmed string.\n * @example\n *\n * _.trim('  abc  ');\n * // => 'abc'\n *\n * _.trim('-_-abc-_-', '_-');\n * // => 'abc'\n *\n * _.map(['  foo  ', '  bar  '], _.trim);\n * // => ['foo', 'bar']\n */\nfunction trim(string, chars, guard) {\n  string = toString(string);\n  if (string && (guard || chars === undefined)) {\n    return string.replace(reTrim, '');\n  }\n  if (!string || !(chars = baseToString(chars))) {\n    return string;\n  }\n  var strSymbols = stringToArray(string),\n      chrSymbols = stringToArray(chars),\n      start = charsStartIndex(strSymbols, chrSymbols),\n      end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n  return castSlice(strSymbols, start, end).join('');\n}\n\nvar FN_ARGS = /^(?:async\\s+)?(function)?\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m;\nvar FN_ARG_SPLIT = /,/;\nvar FN_ARG = /(=.+)?(\\s*)$/;\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\n\nfunction parseParams(func) {\n    func = func.toString().replace(STRIP_COMMENTS, '');\n    func = func.match(FN_ARGS)[2].replace(' ', '');\n    func = func ? func.split(FN_ARG_SPLIT) : [];\n    func = func.map(function (arg){\n        return trim(arg.replace(FN_ARG, ''));\n    });\n    return func;\n}\n\n/**\n * A dependency-injected version of the [async.auto]{@link module:ControlFlow.auto} function. Dependent\n * tasks are specified as parameters to the function, after the usual callback\n * parameter, with the parameter names matching the names of the tasks it\n * depends on. This can provide even more readable task graphs which can be\n * easier to maintain.\n *\n * If a final callback is specified, the task results are similarly injected,\n * specified as named parameters after the initial error parameter.\n *\n * The autoInject function is purely syntactic sugar and its semantics are\n * otherwise equivalent to [async.auto]{@link module:ControlFlow.auto}.\n *\n * @name autoInject\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.auto]{@link module:ControlFlow.auto}\n * @category Control Flow\n * @param {Object} tasks - An object, each of whose properties is an {@link AsyncFunction} of\n * the form 'func([dependencies...], callback). The object's key of a property\n * serves as the name of the task defined by that property, i.e. can be used\n * when specifying requirements for other tasks.\n * * The `callback` parameter is a `callback(err, result)` which must be called\n *   when finished, passing an `error` (which can be `null`) and the result of\n *   the function's execution. The remaining parameters name other tasks on\n *   which the task is dependent, and the results from those tasks are the\n *   arguments of those parameters.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback, and a `results` object with any completed\n * task results, similar to `auto`.\n * @example\n *\n * //  The example from `auto` can be rewritten as follows:\n * async.autoInject({\n *     get_data: function(callback) {\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: function(get_data, make_folder, callback) {\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     },\n *     email_link: function(write_file, callback) {\n *         // once the file is written let's email a link to it...\n *         // write_file contains the filename returned by write_file.\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n *\n * // If you are using a JS minifier that mangles parameter names, `autoInject`\n * // will not work with plain functions, since the parameter names will be\n * // collapsed to a single letter identifier.  To work around this, you can\n * // explicitly specify the names of the parameters your task function needs\n * // in an array, similar to Angular.js dependency injection.\n *\n * // This still has an advantage over plain `auto`, since the results a task\n * // depends on are still spread into arguments.\n * async.autoInject({\n *     //...\n *     write_file: ['get_data', 'make_folder', function(get_data, make_folder, callback) {\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(write_file, callback) {\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }]\n *     //...\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n */\nfunction autoInject(tasks, callback) {\n    var newTasks = {};\n\n    baseForOwn(tasks, function (taskFn, key) {\n        var params;\n        var fnIsAsync = isAsync(taskFn);\n        var hasNoDeps =\n            (!fnIsAsync && taskFn.length === 1) ||\n            (fnIsAsync && taskFn.length === 0);\n\n        if (isArray(taskFn)) {\n            params = taskFn.slice(0, -1);\n            taskFn = taskFn[taskFn.length - 1];\n\n            newTasks[key] = params.concat(params.length > 0 ? newTask : taskFn);\n        } else if (hasNoDeps) {\n            // no dependencies, use the function as-is\n            newTasks[key] = taskFn;\n        } else {\n            params = parseParams(taskFn);\n            if (taskFn.length === 0 && !fnIsAsync && params.length === 0) {\n                throw new Error(\"autoInject task functions require explicit parameters.\");\n            }\n\n            // remove callback param\n            if (!fnIsAsync) params.pop();\n\n            newTasks[key] = params.concat(newTask);\n        }\n\n        function newTask(results, taskCb) {\n            var newArgs = arrayMap(params, function (name) {\n                return results[name];\n            });\n            newArgs.push(taskCb);\n            wrapAsync(taskFn).apply(null, newArgs);\n        }\n    });\n\n    auto(newTasks, callback);\n}\n\n// Simple doubly linked list (https://en.wikipedia.org/wiki/Doubly_linked_list) implementation\n// used for queues. This implementation assumes that the node provided by the user can be modified\n// to adjust the next and last properties. We implement only the minimal functionality\n// for queue support.\nfunction DLL() {\n    this.head = this.tail = null;\n    this.length = 0;\n}\n\nfunction setInitial(dll, node) {\n    dll.length = 1;\n    dll.head = dll.tail = node;\n}\n\nDLL.prototype.removeLink = function(node) {\n    if (node.prev) node.prev.next = node.next;\n    else this.head = node.next;\n    if (node.next) node.next.prev = node.prev;\n    else this.tail = node.prev;\n\n    node.prev = node.next = null;\n    this.length -= 1;\n    return node;\n};\n\nDLL.prototype.empty = function () {\n    while(this.head) this.shift();\n    return this;\n};\n\nDLL.prototype.insertAfter = function(node, newNode) {\n    newNode.prev = node;\n    newNode.next = node.next;\n    if (node.next) node.next.prev = newNode;\n    else this.tail = newNode;\n    node.next = newNode;\n    this.length += 1;\n};\n\nDLL.prototype.insertBefore = function(node, newNode) {\n    newNode.prev = node.prev;\n    newNode.next = node;\n    if (node.prev) node.prev.next = newNode;\n    else this.head = newNode;\n    node.prev = newNode;\n    this.length += 1;\n};\n\nDLL.prototype.unshift = function(node) {\n    if (this.head) this.insertBefore(this.head, node);\n    else setInitial(this, node);\n};\n\nDLL.prototype.push = function(node) {\n    if (this.tail) this.insertAfter(this.tail, node);\n    else setInitial(this, node);\n};\n\nDLL.prototype.shift = function() {\n    return this.head && this.removeLink(this.head);\n};\n\nDLL.prototype.pop = function() {\n    return this.tail && this.removeLink(this.tail);\n};\n\nDLL.prototype.toArray = function () {\n    var arr = Array(this.length);\n    var curr = this.head;\n    for(var idx = 0; idx < this.length; idx++) {\n        arr[idx] = curr.data;\n        curr = curr.next;\n    }\n    return arr;\n};\n\nDLL.prototype.remove = function (testFn) {\n    var curr = this.head;\n    while(!!curr) {\n        var next = curr.next;\n        if (testFn(curr)) {\n            this.removeLink(curr);\n        }\n        curr = next;\n    }\n    return this;\n};\n\nfunction queue(worker, concurrency, payload) {\n    if (concurrency == null) {\n        concurrency = 1;\n    }\n    else if(concurrency === 0) {\n        throw new Error('Concurrency must not be zero');\n    }\n\n    var _worker = wrapAsync(worker);\n    var numRunning = 0;\n    var workersList = [];\n\n    var processingScheduled = false;\n    function _insert(data, insertAtFront, callback) {\n        if (callback != null && typeof callback !== 'function') {\n            throw new Error('task callback must be a function');\n        }\n        q.started = true;\n        if (!isArray(data)) {\n            data = [data];\n        }\n        if (data.length === 0 && q.idle()) {\n            // call drain immediately if there are no tasks\n            return setImmediate$1(function() {\n                q.drain();\n            });\n        }\n\n        for (var i = 0, l = data.length; i < l; i++) {\n            var item = {\n                data: data[i],\n                callback: callback || noop\n            };\n\n            if (insertAtFront) {\n                q._tasks.unshift(item);\n            } else {\n                q._tasks.push(item);\n            }\n        }\n\n        if (!processingScheduled) {\n            processingScheduled = true;\n            setImmediate$1(function() {\n                processingScheduled = false;\n                q.process();\n            });\n        }\n    }\n\n    function _next(tasks) {\n        return function(err){\n            numRunning -= 1;\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                var task = tasks[i];\n\n                var index = baseIndexOf(workersList, task, 0);\n                if (index === 0) {\n                    workersList.shift();\n                } else if (index > 0) {\n                    workersList.splice(index, 1);\n                }\n\n                task.callback.apply(task, arguments);\n\n                if (err != null) {\n                    q.error(err, task.data);\n                }\n            }\n\n            if (numRunning <= (q.concurrency - q.buffer) ) {\n                q.unsaturated();\n            }\n\n            if (q.idle()) {\n                q.drain();\n            }\n            q.process();\n        };\n    }\n\n    var isProcessing = false;\n    var q = {\n        _tasks: new DLL(),\n        concurrency: concurrency,\n        payload: payload,\n        saturated: noop,\n        unsaturated:noop,\n        buffer: concurrency / 4,\n        empty: noop,\n        drain: noop,\n        error: noop,\n        started: false,\n        paused: false,\n        push: function (data, callback) {\n            _insert(data, false, callback);\n        },\n        kill: function () {\n            q.drain = noop;\n            q._tasks.empty();\n        },\n        unshift: function (data, callback) {\n            _insert(data, true, callback);\n        },\n        remove: function (testFn) {\n            q._tasks.remove(testFn);\n        },\n        process: function () {\n            // Avoid trying to start too many processing operations. This can occur\n            // when callbacks resolve synchronously (#1267).\n            if (isProcessing) {\n                return;\n            }\n            isProcessing = true;\n            while(!q.paused && numRunning < q.concurrency && q._tasks.length){\n                var tasks = [], data = [];\n                var l = q._tasks.length;\n                if (q.payload) l = Math.min(l, q.payload);\n                for (var i = 0; i < l; i++) {\n                    var node = q._tasks.shift();\n                    tasks.push(node);\n                    workersList.push(node);\n                    data.push(node.data);\n                }\n\n                numRunning += 1;\n\n                if (q._tasks.length === 0) {\n                    q.empty();\n                }\n\n                if (numRunning === q.concurrency) {\n                    q.saturated();\n                }\n\n                var cb = onlyOnce(_next(tasks));\n                _worker(data, cb);\n            }\n            isProcessing = false;\n        },\n        length: function () {\n            return q._tasks.length;\n        },\n        running: function () {\n            return numRunning;\n        },\n        workersList: function () {\n            return workersList;\n        },\n        idle: function() {\n            return q._tasks.length + numRunning === 0;\n        },\n        pause: function () {\n            q.paused = true;\n        },\n        resume: function () {\n            if (q.paused === false) { return; }\n            q.paused = false;\n            setImmediate$1(q.process);\n        }\n    };\n    return q;\n}\n\n/**\n * A cargo of tasks for the worker function to complete. Cargo inherits all of\n * the same methods and event callbacks as [`queue`]{@link module:ControlFlow.queue}.\n * @typedef {Object} CargoObject\n * @memberOf module:ControlFlow\n * @property {Function} length - A function returning the number of items\n * waiting to be processed. Invoke like `cargo.length()`.\n * @property {number} payload - An `integer` for determining how many tasks\n * should be process per round. This property can be changed after a `cargo` is\n * created to alter the payload on-the-fly.\n * @property {Function} push - Adds `task` to the `queue`. The callback is\n * called once the `worker` has finished processing the task. Instead of a\n * single task, an array of `tasks` can be submitted. The respective callback is\n * used for every task in the list. Invoke like `cargo.push(task, [callback])`.\n * @property {Function} saturated - A callback that is called when the\n * `queue.length()` hits the concurrency and further tasks will be queued.\n * @property {Function} empty - A callback that is called when the last item\n * from the `queue` is given to a `worker`.\n * @property {Function} drain - A callback that is called when the last item\n * from the `queue` has returned from the `worker`.\n * @property {Function} idle - a function returning false if there are items\n * waiting or being processed, or true if not. Invoke like `cargo.idle()`.\n * @property {Function} pause - a function that pauses the processing of tasks\n * until `resume()` is called. Invoke like `cargo.pause()`.\n * @property {Function} resume - a function that resumes the processing of\n * queued tasks when the queue is paused. Invoke like `cargo.resume()`.\n * @property {Function} kill - a function that removes the `drain` callback and\n * empties remaining tasks from the queue forcing it to go idle. Invoke like `cargo.kill()`.\n */\n\n/**\n * Creates a `cargo` object with the specified payload. Tasks added to the\n * cargo will be processed altogether (up to the `payload` limit). If the\n * `worker` is in progress, the task is queued until it becomes available. Once\n * the `worker` has completed some tasks, each callback of those tasks is\n * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)\n * for how `cargo` and `queue` work.\n *\n * While [`queue`]{@link module:ControlFlow.queue} passes only one task to one of a group of workers\n * at a time, cargo passes an array of tasks to a single worker, repeating\n * when the worker is finished.\n *\n * @name cargo\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An asynchronous function for processing an array\n * of queued tasks. Invoked with `(tasks, callback)`.\n * @param {number} [payload=Infinity] - An optional `integer` for determining\n * how many tasks should be processed per round; if omitted, the default is\n * unlimited.\n * @returns {module:ControlFlow.CargoObject} A cargo object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the cargo and inner queue.\n * @example\n *\n * // create a cargo object with payload 2\n * var cargo = async.cargo(function(tasks, callback) {\n *     for (var i=0; i<tasks.length; i++) {\n *         console.log('hello ' + tasks[i].name);\n *     }\n *     callback();\n * }, 2);\n *\n * // add some items\n * cargo.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * cargo.push({name: 'bar'}, function(err) {\n *     console.log('finished processing bar');\n * });\n * cargo.push({name: 'baz'}, function(err) {\n *     console.log('finished processing baz');\n * });\n */\nfunction cargo(worker, payload) {\n    return queue(worker, 1, payload);\n}\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs only a single async operation at a time.\n *\n * @name eachOfSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Invoked with (err).\n */\nvar eachOfSeries = doLimit(eachOfLimit, 1);\n\n/**\n * Reduces `coll` into a single value using an async `iteratee` to return each\n * successive step. `memo` is the initial state of the reduction. This function\n * only operates in series.\n *\n * For performance reasons, it may make sense to split a call to this function\n * into a parallel map, and then use the normal `Array.prototype.reduce` on the\n * results. This function is for situations where each step in the reduction\n * needs to be async; if you can get the data before reducing it, then it's\n * probably a good idea to do so.\n *\n * @name reduce\n * @static\n * @memberOf module:Collections\n * @method\n * @alias inject\n * @alias foldl\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee complete with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n * @example\n *\n * async.reduce([1,2,3], 0, function(memo, item, callback) {\n *     // pointless async:\n *     process.nextTick(function() {\n *         callback(null, memo + item)\n *     });\n * }, function(err, result) {\n *     // result is now equal to the last value of memo, which is 6\n * });\n */\nfunction reduce(coll, memo, iteratee, callback) {\n    callback = once(callback || noop);\n    var _iteratee = wrapAsync(iteratee);\n    eachOfSeries(coll, function(x, i, callback) {\n        _iteratee(memo, x, function(err, v) {\n            memo = v;\n            callback(err);\n        });\n    }, function(err) {\n        callback(err, memo);\n    });\n}\n\n/**\n * Version of the compose function that is more natural to read. Each function\n * consumes the return value of the previous function. It is the equivalent of\n * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name seq\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.compose]{@link module:ControlFlow.compose}\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} a function that composes the `functions` in order\n * @example\n *\n * // Requires lodash (or underscore), express3 and dresende's orm2.\n * // Part of an app, that fetches cats of the logged user.\n * // This example uses `seq` function to avoid overnesting and error\n * // handling clutter.\n * app.get('/cats', function(request, response) {\n *     var User = request.models.User;\n *     async.seq(\n *         _.bind(User.get, User),  // 'User.get' has signature (id, callback(err, data))\n *         function(user, fn) {\n *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n *         }\n *     )(req.session.user_id, function (err, cats) {\n *         if (err) {\n *             console.error(err);\n *             response.json({ status: 'error', message: err.message });\n *         } else {\n *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n *         }\n *     });\n * });\n */\nfunction seq(/*...functions*/) {\n    var _functions = arrayMap(arguments, wrapAsync);\n    return function(/*...args*/) {\n        var args = slice(arguments);\n        var that = this;\n\n        var cb = args[args.length - 1];\n        if (typeof cb == 'function') {\n            args.pop();\n        } else {\n            cb = noop;\n        }\n\n        reduce(_functions, args, function(newargs, fn, cb) {\n            fn.apply(that, newargs.concat(function(err/*, ...nextargs*/) {\n                var nextargs = slice(arguments, 1);\n                cb(err, nextargs);\n            }));\n        },\n        function(err, results) {\n            cb.apply(that, [err].concat(results));\n        });\n    };\n}\n\n/**\n * Creates a function which is a composition of the passed asynchronous\n * functions. Each function consumes the return value of the function that\n * follows. Composing functions `f()`, `g()`, and `h()` would produce the result\n * of `f(g(h()))`, only this version uses callbacks to obtain the return values.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name compose\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} an asynchronous function that is the composed\n * asynchronous `functions`\n * @example\n *\n * function add1(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n + 1);\n *     }, 10);\n * }\n *\n * function mul3(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n * 3);\n *     }, 10);\n * }\n *\n * var add1mul3 = async.compose(mul3, add1);\n * add1mul3(4, function (err, result) {\n *     // result now equals 15\n * });\n */\nvar compose = function(/*...args*/) {\n    return seq.apply(null, slice(arguments).reverse());\n};\n\nvar _concat = Array.prototype.concat;\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs a maximum of `limit` async operations at a time.\n *\n * @name concatLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n */\nvar concatLimit = function(coll, limit, iteratee, callback) {\n    callback = callback || noop;\n    var _iteratee = wrapAsync(iteratee);\n    mapLimit(coll, limit, function(val, callback) {\n        _iteratee(val, function(err /*, ...args*/) {\n            if (err) return callback(err);\n            return callback(null, slice(arguments, 1));\n        });\n    }, function(err, mapResults) {\n        var result = [];\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                result = _concat.apply(result, mapResults[i]);\n            }\n        }\n\n        return callback(err, result);\n    });\n};\n\n/**\n * Applies `iteratee` to each item in `coll`, concatenating the results. Returns\n * the concatenated list. The `iteratee`s are called in parallel, and the\n * results are concatenated as they return. There is no guarantee that the\n * results array will be returned in the original order of `coll` passed to the\n * `iteratee` function.\n *\n * @name concat\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback(err)] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @example\n *\n * async.concat(['dir1','dir2','dir3'], fs.readdir, function(err, files) {\n *     // files is now a list of filenames that exist in the 3 directories\n * });\n */\nvar concat = doLimit(concatLimit, Infinity);\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs only a single async operation at a time.\n *\n * @name concatSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`.\n * The iteratee should complete with an array an array of results.\n * Invoked with (item, callback).\n * @param {Function} [callback(err)] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n */\nvar concatSeries = doLimit(concatLimit, 1);\n\n/**\n * Returns a function that when called, calls-back with the values provided.\n * Useful as the first function in a [`waterfall`]{@link module:ControlFlow.waterfall}, or for plugging values in to\n * [`auto`]{@link module:ControlFlow.auto}.\n *\n * @name constant\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {...*} arguments... - Any number of arguments to automatically invoke\n * callback with.\n * @returns {AsyncFunction} Returns a function that when invoked, automatically\n * invokes the callback with the previous given arguments.\n * @example\n *\n * async.waterfall([\n *     async.constant(42),\n *     function (value, next) {\n *         // value === 42\n *     },\n *     //...\n * ], callback);\n *\n * async.waterfall([\n *     async.constant(filename, \"utf8\"),\n *     fs.readFile,\n *     function (fileData, next) {\n *         //...\n *     }\n *     //...\n * ], callback);\n *\n * async.auto({\n *     hostname: async.constant(\"https://server.net/\"),\n *     port: findFreePort,\n *     launchServer: [\"hostname\", \"port\", function (options, cb) {\n *         startServer(options, cb);\n *     }],\n *     //...\n * }, callback);\n */\nvar constant = function(/*...values*/) {\n    var values = slice(arguments);\n    var args = [null].concat(values);\n    return function (/*...ignoredArgs, callback*/) {\n        var callback = arguments[arguments.length - 1];\n        return callback.apply(this, args);\n    };\n};\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nfunction _createTester(check, getResult) {\n    return function(eachfn, arr, iteratee, cb) {\n        cb = cb || noop;\n        var testPassed = false;\n        var testResult;\n        eachfn(arr, function(value, _, callback) {\n            iteratee(value, function(err, result) {\n                if (err) {\n                    callback(err);\n                } else if (check(result) && !testResult) {\n                    testPassed = true;\n                    testResult = getResult(true, value);\n                    callback(null, breakLoop);\n                } else {\n                    callback();\n                }\n            });\n        }, function(err) {\n            if (err) {\n                cb(err);\n            } else {\n                cb(null, testPassed ? testResult : getResult(false));\n            }\n        });\n    };\n}\n\nfunction _findGetResult(v, x) {\n    return x;\n}\n\n/**\n * Returns the first value in `coll` that passes an async truth test. The\n * `iteratee` is applied in parallel, meaning the first iteratee to return\n * `true` will fire the detect `callback` with that result. That means the\n * result might not be the first item in the original `coll` (in terms of order)\n * that passes the test.\n\n * If order within the original `coll` is important, then look at\n * [`detectSeries`]{@link module:Collections.detectSeries}.\n *\n * @name detect\n * @static\n * @memberOf module:Collections\n * @method\n * @alias find\n * @category Collections\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @example\n *\n * async.detect(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // result now equals the first file in the list that exists\n * });\n */\nvar detect = doParallel(_createTester(identity, _findGetResult));\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name detectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findLimit\n * @category Collections\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n */\nvar detectLimit = doParallelLimit(_createTester(identity, _findGetResult));\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs only a single async operation at a time.\n *\n * @name detectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findSeries\n * @category Collections\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n */\nvar detectSeries = doLimit(detectLimit, 1);\n\nfunction consoleFunc(name) {\n    return function (fn/*, ...args*/) {\n        var args = slice(arguments, 1);\n        args.push(function (err/*, ...args*/) {\n            var args = slice(arguments, 1);\n            if (typeof console === 'object') {\n                if (err) {\n                    if (console.error) {\n                        console.error(err);\n                    }\n                } else if (console[name]) {\n                    arrayEach(args, function (x) {\n                        console[name](x);\n                    });\n                }\n            }\n        });\n        wrapAsync(fn).apply(null, args);\n    };\n}\n\n/**\n * Logs the result of an [`async` function]{@link AsyncFunction} to the\n * `console` using `console.dir` to display the properties of the resulting object.\n * Only works in Node.js or in browsers that support `console.dir` and\n * `console.error` (such as FF and Chrome).\n * If multiple arguments are returned from the async function,\n * `console.dir` is called on each argument in order.\n *\n * @name dir\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, {hello: name});\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.dir(hello, 'world');\n * {hello: 'world'}\n */\nvar dir = consoleFunc('dir');\n\n/**\n * The post-check version of [`during`]{@link module:ControlFlow.during}. To reflect the difference in\n * the order of operations, the arguments `test` and `fn` are switched.\n *\n * Also a version of [`doWhilst`]{@link module:ControlFlow.doWhilst} with asynchronous `test` function.\n * @name doDuring\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.during]{@link module:ControlFlow.during}\n * @category Control Flow\n * @param {AsyncFunction} fn - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `fn`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `fn`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `fn` has stopped. `callback`\n * will be passed an error if one occurred, otherwise `null`.\n */\nfunction doDuring(fn, test, callback) {\n    callback = onlyOnce(callback || noop);\n    var _fn = wrapAsync(fn);\n    var _test = wrapAsync(test);\n\n    function next(err/*, ...args*/) {\n        if (err) return callback(err);\n        var args = slice(arguments, 1);\n        args.push(check);\n        _test.apply(this, args);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (!truth) return callback(null);\n        _fn(next);\n    }\n\n    check(null, true);\n\n}\n\n/**\n * The post-check version of [`whilst`]{@link module:ControlFlow.whilst}. To reflect the difference in\n * the order of operations, the arguments `test` and `iteratee` are switched.\n *\n * `doWhilst` is to `whilst` as `do while` is to `while` in plain JavaScript.\n *\n * @name doWhilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - A function which is called each time `test`\n * passes. Invoked with (callback).\n * @param {Function} test - synchronous truth test to perform after each\n * execution of `iteratee`. Invoked with any non-error callback results of\n * `iteratee`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped.\n * `callback` will be passed an error and any arguments passed to the final\n * `iteratee`'s callback. Invoked with (err, [results]);\n */\nfunction doWhilst(iteratee, test, callback) {\n    callback = onlyOnce(callback || noop);\n    var _iteratee = wrapAsync(iteratee);\n    var next = function(err/*, ...args*/) {\n        if (err) return callback(err);\n        var args = slice(arguments, 1);\n        if (test.apply(this, args)) return _iteratee(next);\n        callback.apply(null, [null].concat(args));\n    };\n    _iteratee(next);\n}\n\n/**\n * Like ['doWhilst']{@link module:ControlFlow.doWhilst}, except the `test` is inverted. Note the\n * argument ordering differs from `until`.\n *\n * @name doUntil\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.doWhilst]{@link module:ControlFlow.doWhilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {Function} test - synchronous truth test to perform after each\n * execution of `iteratee`. Invoked with any non-error callback results of\n * `iteratee`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n */\nfunction doUntil(iteratee, test, callback) {\n    doWhilst(iteratee, function() {\n        return !test.apply(this, arguments);\n    }, callback);\n}\n\n/**\n * Like [`whilst`]{@link module:ControlFlow.whilst}, except the `test` is an asynchronous function that\n * is passed a callback in the form of `function (err, truth)`. If error is\n * passed to `test` or `fn`, the main callback is immediately called with the\n * value of the error.\n *\n * @name during\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `fn`. Invoked with (callback).\n * @param {AsyncFunction} fn - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `fn` has stopped. `callback`\n * will be passed an error, if one occurred, otherwise `null`.\n * @example\n *\n * var count = 0;\n *\n * async.during(\n *     function (callback) {\n *         return callback(null, count < 5);\n *     },\n *     function (callback) {\n *         count++;\n *         setTimeout(callback, 1000);\n *     },\n *     function (err) {\n *         // 5 seconds have passed\n *     }\n * );\n */\nfunction during(test, fn, callback) {\n    callback = onlyOnce(callback || noop);\n    var _fn = wrapAsync(fn);\n    var _test = wrapAsync(test);\n\n    function next(err) {\n        if (err) return callback(err);\n        _test(check);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (!truth) return callback(null);\n        _fn(next);\n    }\n\n    _test(check);\n}\n\nfunction _withoutIndex(iteratee) {\n    return function (value, index, callback) {\n        return iteratee(value, callback);\n    };\n}\n\n/**\n * Applies the function `iteratee` to each item in `coll`, in parallel.\n * The `iteratee` is called with an item from the list, and a callback for when\n * it has finished. If the `iteratee` passes an error to its `callback`, the\n * main `callback` (for the `each` function) is immediately called with the\n * error.\n *\n * Note, that since this function applies `iteratee` to each item in parallel,\n * there is no guarantee that the iteratee functions will complete in order.\n *\n * @name each\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEach\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to\n * each item in `coll`. Invoked with (item, callback).\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOf`.\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @example\n *\n * // assuming openFiles is an array of file names and saveFile is a function\n * // to save the modified contents of that file:\n *\n * async.each(openFiles, saveFile, function(err){\n *   // if any of the saves produced an error, err would equal that error\n * });\n *\n * // assuming openFiles is an array of file names\n * async.each(openFiles, function(file, callback) {\n *\n *     // Perform operation on file here.\n *     console.log('Processing file ' + file);\n *\n *     if( file.length > 32 ) {\n *       console.log('This file name is too long');\n *       callback('File name too long');\n *     } else {\n *       // Do work to process file here\n *       console.log('File processed');\n *       callback();\n *     }\n * }, function(err) {\n *     // if any of the file processing produced an error, err would equal that error\n *     if( err ) {\n *       // One of the iterations produced an error.\n *       // All processing will now stop.\n *       console.log('A file failed to process');\n *     } else {\n *       console.log('All files have been processed successfully');\n *     }\n * });\n */\nfunction eachLimit(coll, iteratee, callback) {\n    eachOf(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs a maximum of `limit` async operations at a time.\n *\n * @name eachLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfLimit`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nfunction eachLimit$1(coll, limit, iteratee, callback) {\n    _eachOfLimit(limit)(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs only a single async operation at a time.\n *\n * @name eachSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfSeries`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n */\nvar eachSeries = doLimit(eachLimit$1, 1);\n\n/**\n * Wrap an async function and ensure it calls its callback on a later tick of\n * the event loop.  If the function already calls its callback on a next tick,\n * no extra deferral is added. This is useful for preventing stack overflows\n * (`RangeError: Maximum call stack size exceeded`) and generally keeping\n * [Zalgo](http://blog.izs.me/post/59142742143/designing-apis-for-asynchrony)\n * contained. ES2017 `async` functions are returned as-is -- they are immune\n * to Zalgo's corrupting influences, as they always resolve on a later tick.\n *\n * @name ensureAsync\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - an async function, one that expects a node-style\n * callback as its last argument.\n * @returns {AsyncFunction} Returns a wrapped function with the exact same call\n * signature as the function passed in.\n * @example\n *\n * function sometimesAsync(arg, callback) {\n *     if (cache[arg]) {\n *         return callback(null, cache[arg]); // this would be synchronous!!\n *     } else {\n *         doSomeIO(arg, callback); // this IO would be asynchronous\n *     }\n * }\n *\n * // this has a risk of stack overflows if many results are cached in a row\n * async.mapSeries(args, sometimesAsync, done);\n *\n * // this will defer sometimesAsync's callback if necessary,\n * // preventing stack overflows\n * async.mapSeries(args, async.ensureAsync(sometimesAsync), done);\n */\nfunction ensureAsync(fn) {\n    if (isAsync(fn)) return fn;\n    return initialParams(function (args, callback) {\n        var sync = true;\n        args.push(function () {\n            var innerArgs = arguments;\n            if (sync) {\n                setImmediate$1(function () {\n                    callback.apply(null, innerArgs);\n                });\n            } else {\n                callback.apply(null, innerArgs);\n            }\n        });\n        fn.apply(this, args);\n        sync = false;\n    });\n}\n\nfunction notId(v) {\n    return !v;\n}\n\n/**\n * Returns `true` if every element in `coll` satisfies an async test. If any\n * iteratee call returns `false`, the main `callback` is immediately called.\n *\n * @name every\n * @static\n * @memberOf module:Collections\n * @method\n * @alias all\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @example\n *\n * async.every(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // if result is true then every file exists\n * });\n */\nvar every = doParallel(_createTester(notId, notId));\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs a maximum of `limit` async operations at a time.\n *\n * @name everyLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n */\nvar everyLimit = doParallelLimit(_createTester(notId, notId));\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs only a single async operation at a time.\n *\n * @name everySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in series.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n */\nvar everySeries = doLimit(everyLimit, 1);\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nfunction filterArray(eachfn, arr, iteratee, callback) {\n    var truthValues = new Array(arr.length);\n    eachfn(arr, function (x, index, callback) {\n        iteratee(x, function (err, v) {\n            truthValues[index] = !!v;\n            callback(err);\n        });\n    }, function (err) {\n        if (err) return callback(err);\n        var results = [];\n        for (var i = 0; i < arr.length; i++) {\n            if (truthValues[i]) results.push(arr[i]);\n        }\n        callback(null, results);\n    });\n}\n\nfunction filterGeneric(eachfn, coll, iteratee, callback) {\n    var results = [];\n    eachfn(coll, function (x, index, callback) {\n        iteratee(x, function (err, v) {\n            if (err) {\n                callback(err);\n            } else {\n                if (v) {\n                    results.push({index: index, value: x});\n                }\n                callback();\n            }\n        });\n    }, function (err) {\n        if (err) {\n            callback(err);\n        } else {\n            callback(null, arrayMap(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), baseProperty('value')));\n        }\n    });\n}\n\nfunction _filter(eachfn, coll, iteratee, callback) {\n    var filter = isArrayLike(coll) ? filterArray : filterGeneric;\n    filter(eachfn, coll, wrapAsync(iteratee), callback || noop);\n}\n\n/**\n * Returns a new array of all the values in `coll` which pass an async truth\n * test. This operation is performed in parallel, but the results array will be\n * in the same order as the original.\n *\n * @name filter\n * @static\n * @memberOf module:Collections\n * @method\n * @alias select\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @example\n *\n * async.filter(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, results) {\n *     // results now equals an array of the existing files\n * });\n */\nvar filter = doParallel(_filter);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name filterLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n */\nvar filterLimit = doParallelLimit(_filter);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs only a single async operation at a time.\n *\n * @name filterSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectSeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results)\n */\nvar filterSeries = doLimit(filterLimit, 1);\n\n/**\n * Calls the asynchronous function `fn` with a callback parameter that allows it\n * to call itself again, in series, indefinitely.\n\n * If an error is passed to the callback then `errback` is called with the\n * error, and execution stops, otherwise it will never be called.\n *\n * @name forever\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} fn - an async function to call repeatedly.\n * Invoked with (next).\n * @param {Function} [errback] - when `fn` passes an error to it's callback,\n * this function will be called, and execution stops. Invoked with (err).\n * @example\n *\n * async.forever(\n *     function(next) {\n *         // next is suitable for passing to things that need a callback(err [, whatever]);\n *         // it will result in this function being called again.\n *     },\n *     function(err) {\n *         // if next is called with a value in its first parameter, it will appear\n *         // in here as 'err', and execution will stop.\n *     }\n * );\n */\nfunction forever(fn, errback) {\n    var done = onlyOnce(errback || noop);\n    var task = wrapAsync(ensureAsync(fn));\n\n    function next(err) {\n        if (err) return done(err);\n        task(next);\n    }\n    next();\n}\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs a maximum of `limit` async operations at a time.\n *\n * @name groupByLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n */\nvar groupByLimit = function(coll, limit, iteratee, callback) {\n    callback = callback || noop;\n    var _iteratee = wrapAsync(iteratee);\n    mapLimit(coll, limit, function(val, callback) {\n        _iteratee(val, function(err, key) {\n            if (err) return callback(err);\n            return callback(null, {key: key, val: val});\n        });\n    }, function(err, mapResults) {\n        var result = {};\n        // from MDN, handle object having an `hasOwnProperty` prop\n        var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                var key = mapResults[i].key;\n                var val = mapResults[i].val;\n\n                if (hasOwnProperty.call(result, key)) {\n                    result[key].push(val);\n                } else {\n                    result[key] = [val];\n                }\n            }\n        }\n\n        return callback(err, result);\n    });\n};\n\n/**\n * Returns a new object, where each value corresponds to an array of items, from\n * `coll`, that returned the corresponding key. That is, the keys of the object\n * correspond to the values passed to the `iteratee` callback.\n *\n * Note: Since this function applies the `iteratee` to each item in parallel,\n * there is no guarantee that the `iteratee` functions will complete in order.\n * However, the values for each key in the `result` will be in the same order as\n * the original `coll`. For Objects, the values will roughly be in the order of\n * the original Objects' keys (but this can vary across JavaScript engines).\n *\n * @name groupBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @example\n *\n * async.groupBy(['userId1', 'userId2', 'userId3'], function(userId, callback) {\n *     db.findById(userId, function(err, user) {\n *         if (err) return callback(err);\n *         return callback(null, user.age);\n *     });\n * }, function(err, result) {\n *     // result is object containing the userIds grouped by age\n *     // e.g. { 30: ['userId1', 'userId3'], 42: ['userId2']};\n * });\n */\nvar groupBy = doLimit(groupByLimit, Infinity);\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs only a single async operation at a time.\n *\n * @name groupBySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n */\nvar groupBySeries = doLimit(groupByLimit, 1);\n\n/**\n * Logs the result of an `async` function to the `console`. Only works in\n * Node.js or in browsers that support `console.log` and `console.error` (such\n * as FF and Chrome). If multiple arguments are returned from the async\n * function, `console.log` is called on each argument in order.\n *\n * @name log\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, 'hello ' + name);\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.log(hello, 'world');\n * 'hello world'\n */\nvar log = consoleFunc('log');\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name mapValuesLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n */\nfunction mapValuesLimit(obj, limit, iteratee, callback) {\n    callback = once(callback || noop);\n    var newObj = {};\n    var _iteratee = wrapAsync(iteratee);\n    eachOfLimit(obj, limit, function(val, key, next) {\n        _iteratee(val, key, function (err, result) {\n            if (err) return next(err);\n            newObj[key] = result;\n            next();\n        });\n    }, function (err) {\n        callback(err, newObj);\n    });\n}\n\n/**\n * A relative of [`map`]{@link module:Collections.map}, designed for use with objects.\n *\n * Produces a new Object by mapping each value of `obj` through the `iteratee`\n * function. The `iteratee` is called each `value` and `key` from `obj` and a\n * callback for when it has finished processing. Each of these callbacks takes\n * two arguments: an `error`, and the transformed item from `obj`. If `iteratee`\n * passes an error to its callback, the main `callback` (for the `mapValues`\n * function) is immediately called with the error.\n *\n * Note, the order of the keys in the result is not guaranteed.  The keys will\n * be roughly in the order they complete, (but this is very engine-specific)\n *\n * @name mapValues\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @example\n *\n * async.mapValues({\n *     f1: 'file1',\n *     f2: 'file2',\n *     f3: 'file3'\n * }, function (file, key, callback) {\n *   fs.stat(file, callback);\n * }, function(err, result) {\n *     // result is now a map of stats for each file, e.g.\n *     // {\n *     //     f1: [stats for file1],\n *     //     f2: [stats for file2],\n *     //     f3: [stats for file3]\n *     // }\n * });\n */\n\nvar mapValues = doLimit(mapValuesLimit, Infinity);\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs only a single async operation at a time.\n *\n * @name mapValuesSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n */\nvar mapValuesSeries = doLimit(mapValuesLimit, 1);\n\nfunction has(obj, key) {\n    return key in obj;\n}\n\n/**\n * Caches the results of an async function. When creating a hash to store\n * function results against, the callback is omitted from the hash and an\n * optional hash function can be used.\n *\n * If no hash function is specified, the first argument is used as a hash key,\n * which may work reasonably if it is a string or a data type that converts to a\n * distinct string. Note that objects and arrays will not behave reasonably.\n * Neither will cases where the other arguments are significant. In such cases,\n * specify your own hash function.\n *\n * The cache of results is exposed as the `memo` property of the function\n * returned by `memoize`.\n *\n * @name memoize\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function to proxy and cache results from.\n * @param {Function} hasher - An optional function for generating a custom hash\n * for storing results. It has all the arguments applied to it apart from the\n * callback, and must be synchronous.\n * @returns {AsyncFunction} a memoized version of `fn`\n * @example\n *\n * var slow_fn = function(name, callback) {\n *     // do something\n *     callback(null, result);\n * };\n * var fn = async.memoize(slow_fn);\n *\n * // fn can now be used as if it were slow_fn\n * fn('some name', function() {\n *     // callback\n * });\n */\nfunction memoize(fn, hasher) {\n    var memo = Object.create(null);\n    var queues = Object.create(null);\n    hasher = hasher || identity;\n    var _fn = wrapAsync(fn);\n    var memoized = initialParams(function memoized(args, callback) {\n        var key = hasher.apply(null, args);\n        if (has(memo, key)) {\n            setImmediate$1(function() {\n                callback.apply(null, memo[key]);\n            });\n        } else if (has(queues, key)) {\n            queues[key].push(callback);\n        } else {\n            queues[key] = [callback];\n            _fn.apply(null, args.concat(function(/*args*/) {\n                var args = slice(arguments);\n                memo[key] = args;\n                var q = queues[key];\n                delete queues[key];\n                for (var i = 0, l = q.length; i < l; i++) {\n                    q[i].apply(null, args);\n                }\n            }));\n        }\n    });\n    memoized.memo = memo;\n    memoized.unmemoized = fn;\n    return memoized;\n}\n\n/**\n * Calls `callback` on a later loop around the event loop. In Node.js this just\n * calls `process.nextTick`.  In the browser it will use `setImmediate` if\n * available, otherwise `setTimeout(callback, 0)`, which means other higher\n * priority events may precede the execution of `callback`.\n *\n * This is used internally for browser-compatibility purposes.\n *\n * @name nextTick\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.setImmediate]{@link module:Utils.setImmediate}\n * @category Util\n * @param {Function} callback - The function to call on a later loop around\n * the event loop. Invoked with (args...).\n * @param {...*} args... - any number of additional arguments to pass to the\n * callback on the next tick.\n * @example\n *\n * var call_order = [];\n * async.nextTick(function() {\n *     call_order.push('two');\n *     // call_order now equals ['one','two']\n * });\n * call_order.push('one');\n *\n * async.setImmediate(function (a, b, c) {\n *     // a, b, and c equal 1, 2, and 3\n * }, 1, 2, 3);\n */\nvar _defer$1;\n\nif (hasNextTick) {\n    _defer$1 = process.nextTick;\n} else if (hasSetImmediate) {\n    _defer$1 = setImmediate;\n} else {\n    _defer$1 = fallback;\n}\n\nvar nextTick = wrap(_defer$1);\n\nfunction _parallel(eachfn, tasks, callback) {\n    callback = callback || noop;\n    var results = isArrayLike(tasks) ? [] : {};\n\n    eachfn(tasks, function (task, key, callback) {\n        wrapAsync(task)(function (err, result) {\n            if (arguments.length > 2) {\n                result = slice(arguments, 1);\n            }\n            results[key] = result;\n            callback(err);\n        });\n    }, function (err) {\n        callback(err, results);\n    });\n}\n\n/**\n * Run the `tasks` collection of functions in parallel, without waiting until\n * the previous function has completed. If any of the functions pass an error to\n * its callback, the main `callback` is immediately called with the value of the\n * error. Once the `tasks` have completed, the results are passed to the final\n * `callback` as an array.\n *\n * **Note:** `parallel` is about kicking-off I/O tasks in parallel, not about\n * parallel execution of code.  If your tasks do not use any timers or perform\n * any I/O, they will actually be executed in series.  Any synchronous setup\n * sections for each task will happen one after the other.  JavaScript remains\n * single-threaded.\n *\n * **Hint:** Use [`reflect`]{@link module:Utils.reflect} to continue the\n * execution of other tasks when a task fails.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n * results from {@link async.parallel}.\n *\n * @name parallel\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n *\n * @example\n * async.parallel([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // the results array will equal ['one','two'] even though\n *     // the second function had a shorter timeout.\n * });\n *\n * // an example using an object instead of an array\n * async.parallel({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equals to: {one: 1, two: 2}\n * });\n */\nfunction parallelLimit(tasks, callback) {\n    _parallel(eachOf, tasks, callback);\n}\n\n/**\n * The same as [`parallel`]{@link module:ControlFlow.parallel} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name parallelLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.parallel]{@link module:ControlFlow.parallel}\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n */\nfunction parallelLimit$1(tasks, limit, callback) {\n    _parallel(_eachOfLimit(limit), tasks, callback);\n}\n\n/**\n * A queue of tasks for the worker function to complete.\n * @typedef {Object} QueueObject\n * @memberOf module:ControlFlow\n * @property {Function} length - a function returning the number of items\n * waiting to be processed. Invoke with `queue.length()`.\n * @property {boolean} started - a boolean indicating whether or not any\n * items have been pushed and processed by the queue.\n * @property {Function} running - a function returning the number of items\n * currently being processed. Invoke with `queue.running()`.\n * @property {Function} workersList - a function returning the array of items\n * currently being processed. Invoke with `queue.workersList()`.\n * @property {Function} idle - a function returning false if there are items\n * waiting or being processed, or true if not. Invoke with `queue.idle()`.\n * @property {number} concurrency - an integer for determining how many `worker`\n * functions should be run in parallel. This property can be changed after a\n * `queue` is created to alter the concurrency on-the-fly.\n * @property {Function} push - add a new task to the `queue`. Calls `callback`\n * once the `worker` has finished processing the task. Instead of a single task,\n * a `tasks` array can be submitted. The respective callback is used for every\n * task in the list. Invoke with `queue.push(task, [callback])`,\n * @property {Function} unshift - add a new task to the front of the `queue`.\n * Invoke with `queue.unshift(task, [callback])`.\n * @property {Function} remove - remove items from the queue that match a test\n * function.  The test function will be passed an object with a `data` property,\n * and a `priority` property, if this is a\n * [priorityQueue]{@link module:ControlFlow.priorityQueue} object.\n * Invoked with `queue.remove(testFn)`, where `testFn` is of the form\n * `function ({data, priority}) {}` and returns a Boolean.\n * @property {Function} saturated - a callback that is called when the number of\n * running workers hits the `concurrency` limit, and further tasks will be\n * queued.\n * @property {Function} unsaturated - a callback that is called when the number\n * of running workers is less than the `concurrency` & `buffer` limits, and\n * further tasks will not be queued.\n * @property {number} buffer - A minimum threshold buffer in order to say that\n * the `queue` is `unsaturated`.\n * @property {Function} empty - a callback that is called when the last item\n * from the `queue` is given to a `worker`.\n * @property {Function} drain - a callback that is called when the last item\n * from the `queue` has returned from the `worker`.\n * @property {Function} error - a callback that is called when a task errors.\n * Has the signature `function(error, task)`.\n * @property {boolean} paused - a boolean for determining whether the queue is\n * in a paused state.\n * @property {Function} pause - a function that pauses the processing of tasks\n * until `resume()` is called. Invoke with `queue.pause()`.\n * @property {Function} resume - a function that resumes the processing of\n * queued tasks when the queue is paused. Invoke with `queue.resume()`.\n * @property {Function} kill - a function that removes the `drain` callback and\n * empties remaining tasks from the queue forcing it to go idle. No more tasks\n * should be pushed to the queue after calling this function. Invoke with `queue.kill()`.\n */\n\n/**\n * Creates a `queue` object with the specified `concurrency`. Tasks added to the\n * `queue` are processed in parallel (up to the `concurrency` limit). If all\n * `worker`s are in progress, the task is queued until one becomes available.\n * Once a `worker` completes a `task`, that `task`'s callback is called.\n *\n * @name queue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`. Invoked with (task, callback).\n * @param {number} [concurrency=1] - An `integer` for determining how many\n * `worker` functions should be run in parallel.  If omitted, the concurrency\n * defaults to `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A queue object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the queue.\n * @example\n *\n * // create a queue object with concurrency 2\n * var q = async.queue(function(task, callback) {\n *     console.log('hello ' + task.name);\n *     callback();\n * }, 2);\n *\n * // assign a callback\n * q.drain = function() {\n *     console.log('all items have been processed');\n * };\n *\n * // add some items to the queue\n * q.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * q.push({name: 'bar'}, function (err) {\n *     console.log('finished processing bar');\n * });\n *\n * // add some items to the queue (batch-wise)\n * q.push([{name: 'baz'},{name: 'bay'},{name: 'bax'}], function(err) {\n *     console.log('finished processing item');\n * });\n *\n * // add some items to the front of the queue\n * q.unshift({name: 'bar'}, function (err) {\n *     console.log('finished processing bar');\n * });\n */\nvar queue$1 = function (worker, concurrency) {\n    var _worker = wrapAsync(worker);\n    return queue(function (items, cb) {\n        _worker(items[0], cb);\n    }, concurrency, 1);\n};\n\n/**\n * The same as [async.queue]{@link module:ControlFlow.queue} only tasks are assigned a priority and\n * completed in ascending priority order.\n *\n * @name priorityQueue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`.\n * Invoked with (task, callback).\n * @param {number} concurrency - An `integer` for determining how many `worker`\n * functions should be run in parallel.  If omitted, the concurrency defaults to\n * `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A priorityQueue object to manage the tasks. There are two\n * differences between `queue` and `priorityQueue` objects:\n * * `push(task, priority, [callback])` - `priority` should be a number. If an\n *   array of `tasks` is given, all tasks will be assigned the same priority.\n * * The `unshift` method was removed.\n */\nvar priorityQueue = function(worker, concurrency) {\n    // Start with a normal queue\n    var q = queue$1(worker, concurrency);\n\n    // Override push to accept second parameter representing priority\n    q.push = function(data, priority, callback) {\n        if (callback == null) callback = noop;\n        if (typeof callback !== 'function') {\n            throw new Error('task callback must be a function');\n        }\n        q.started = true;\n        if (!isArray(data)) {\n            data = [data];\n        }\n        if (data.length === 0) {\n            // call drain immediately if there are no tasks\n            return setImmediate$1(function() {\n                q.drain();\n            });\n        }\n\n        priority = priority || 0;\n        var nextNode = q._tasks.head;\n        while (nextNode && priority >= nextNode.priority) {\n            nextNode = nextNode.next;\n        }\n\n        for (var i = 0, l = data.length; i < l; i++) {\n            var item = {\n                data: data[i],\n                priority: priority,\n                callback: callback\n            };\n\n            if (nextNode) {\n                q._tasks.insertBefore(nextNode, item);\n            } else {\n                q._tasks.push(item);\n            }\n        }\n        setImmediate$1(q.process);\n    };\n\n    // Remove unshift function\n    delete q.unshift;\n\n    return q;\n};\n\n/**\n * Runs the `tasks` array of functions in parallel, without waiting until the\n * previous function has completed. Once any of the `tasks` complete or pass an\n * error to its callback, the main `callback` is immediately called. It's\n * equivalent to `Promise.race()`.\n *\n * @name race\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array containing [async functions]{@link AsyncFunction}\n * to run. Each function can complete with an optional `result` value.\n * @param {Function} callback - A callback to run once any of the functions have\n * completed. This function gets an error or result from the first function that\n * completed. Invoked with (err, result).\n * @returns undefined\n * @example\n *\n * async.race([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // main callback\n * function(err, result) {\n *     // the result will be equal to 'two' as it finishes earlier\n * });\n */\nfunction race(tasks, callback) {\n    callback = once(callback || noop);\n    if (!isArray(tasks)) return callback(new TypeError('First argument to race must be an array of functions'));\n    if (!tasks.length) return callback();\n    for (var i = 0, l = tasks.length; i < l; i++) {\n        wrapAsync(tasks[i])(callback);\n    }\n}\n\n/**\n * Same as [`reduce`]{@link module:Collections.reduce}, only operates on `array` in reverse order.\n *\n * @name reduceRight\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reduce]{@link module:Collections.reduce}\n * @alias foldr\n * @category Collection\n * @param {Array} array - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee complete with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n */\nfunction reduceRight (array, memo, iteratee, callback) {\n    var reversed = slice(array).reverse();\n    reduce(reversed, memo, iteratee, callback);\n}\n\n/**\n * Wraps the async function in another function that always completes with a\n * result object, even when it errors.\n *\n * The result object has either the property `error` or `value`.\n *\n * @name reflect\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function you want to wrap\n * @returns {Function} - A function that always passes null to it's callback as\n * the error. The second argument to the callback will be an `object` with\n * either an `error` or a `value` property.\n * @example\n *\n * async.parallel([\n *     async.reflect(function(callback) {\n *         // do some stuff ...\n *         callback(null, 'one');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff but error ...\n *         callback('bad stuff happened');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff ...\n *         callback(null, 'two');\n *     })\n * ],\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = 'bad stuff happened'\n *     // results[2].value = 'two'\n * });\n */\nfunction reflect(fn) {\n    var _fn = wrapAsync(fn);\n    return initialParams(function reflectOn(args, reflectCallback) {\n        args.push(function callback(error, cbArg) {\n            if (error) {\n                reflectCallback(null, { error: error });\n            } else {\n                var value;\n                if (arguments.length <= 2) {\n                    value = cbArg;\n                } else {\n                    value = slice(arguments, 1);\n                }\n                reflectCallback(null, { value: value });\n            }\n        });\n\n        return _fn.apply(this, args);\n    });\n}\n\n/**\n * A helper function that wraps an array or an object of functions with `reflect`.\n *\n * @name reflectAll\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.reflect]{@link module:Utils.reflect}\n * @category Util\n * @param {Array|Object|Iterable} tasks - The collection of\n * [async functions]{@link AsyncFunction} to wrap in `async.reflect`.\n * @returns {Array} Returns an array of async functions, each wrapped in\n * `async.reflect`\n * @example\n *\n * let tasks = [\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         // do some more stuff but error ...\n *         callback(new Error('bad stuff happened'));\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ];\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = Error('bad stuff happened')\n *     // results[2].value = 'two'\n * });\n *\n * // an example using an object instead of an array\n * let tasks = {\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         callback('two');\n *     },\n *     three: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'three');\n *         }, 100);\n *     }\n * };\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results.one.value = 'one'\n *     // results.two.error = 'two'\n *     // results.three.value = 'three'\n * });\n */\nfunction reflectAll(tasks) {\n    var results;\n    if (isArray(tasks)) {\n        results = arrayMap(tasks, reflect);\n    } else {\n        results = {};\n        baseForOwn(tasks, function(task, key) {\n            results[key] = reflect.call(this, task);\n        });\n    }\n    return results;\n}\n\nfunction reject$1(eachfn, arr, iteratee, callback) {\n    _filter(eachfn, arr, function(value, cb) {\n        iteratee(value, function(err, v) {\n            cb(err, !v);\n        });\n    }, callback);\n}\n\n/**\n * The opposite of [`filter`]{@link module:Collections.filter}. Removes values that pass an `async` truth test.\n *\n * @name reject\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @example\n *\n * async.reject(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, results) {\n *     // results now equals an array of missing files\n *     createFiles(results);\n * });\n */\nvar reject = doParallel(reject$1);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name rejectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n */\nvar rejectLimit = doParallelLimit(reject$1);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs only a single async operation at a time.\n *\n * @name rejectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n */\nvar rejectSeries = doLimit(rejectLimit, 1);\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant$1(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * Attempts to get a successful response from `task` no more than `times` times\n * before returning an error. If the task is successful, the `callback` will be\n * passed the result of the successful task. If all attempts fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name retry\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @see [async.retryable]{@link module:ControlFlow.retryable}\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - Can be either an\n * object with `times` and `interval` or a number.\n * * `times` - The number of attempts to make before giving up.  The default\n *   is `5`.\n * * `interval` - The time to wait between retries, in milliseconds.  The\n *   default is `0`. The interval may also be specified as a function of the\n *   retry count (see example).\n * * `errorFilter` - An optional synchronous function that is invoked on\n *   erroneous result. If it returns `true` the retry attempts will continue;\n *   if the function returns `false` the retry flow is aborted with the current\n *   attempt's error and result being returned to the final callback.\n *   Invoked with (err).\n * * If `opts` is a number, the number specifies the number of times to retry,\n *   with the default interval of `0`.\n * @param {AsyncFunction} task - An async function to retry.\n * Invoked with (callback).\n * @param {Function} [callback] - An optional callback which is called when the\n * task has succeeded, or after the final failed attempt. It receives the `err`\n * and `result` arguments of the last attempt at completing the `task`. Invoked\n * with (err, results).\n *\n * @example\n *\n * // The `retry` function can be used as a stand-alone control flow by passing\n * // a callback, as shown below:\n *\n * // try calling apiMethod 3 times\n * async.retry(3, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 3 times, waiting 200 ms between each retry\n * async.retry({times: 3, interval: 200}, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 10 times with exponential backoff\n * // (i.e. intervals of 100, 200, 400, 800, 1600, ... milliseconds)\n * async.retry({\n *   times: 10,\n *   interval: function(retryCount) {\n *     return 50 * Math.pow(2, retryCount);\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod the default 5 times no delay between each retry\n * async.retry(apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod only when error condition satisfies, all other\n * // errors will abort the retry control flow and return to final callback\n * async.retry({\n *   errorFilter: function(err) {\n *     return err.message === 'Temporary error'; // only retry on a specific error\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // to retry individual methods that are not as reliable within other\n * // control flow functions, use the `retryable` wrapper:\n * async.auto({\n *     users: api.getUsers.bind(api),\n *     payments: async.retryable(3, api.getPayments.bind(api))\n * }, function(err, results) {\n *     // do something with the results\n * });\n *\n */\nfunction retry(opts, task, callback) {\n    var DEFAULT_TIMES = 5;\n    var DEFAULT_INTERVAL = 0;\n\n    var options = {\n        times: DEFAULT_TIMES,\n        intervalFunc: constant$1(DEFAULT_INTERVAL)\n    };\n\n    function parseTimes(acc, t) {\n        if (typeof t === 'object') {\n            acc.times = +t.times || DEFAULT_TIMES;\n\n            acc.intervalFunc = typeof t.interval === 'function' ?\n                t.interval :\n                constant$1(+t.interval || DEFAULT_INTERVAL);\n\n            acc.errorFilter = t.errorFilter;\n        } else if (typeof t === 'number' || typeof t === 'string') {\n            acc.times = +t || DEFAULT_TIMES;\n        } else {\n            throw new Error(\"Invalid arguments for async.retry\");\n        }\n    }\n\n    if (arguments.length < 3 && typeof opts === 'function') {\n        callback = task || noop;\n        task = opts;\n    } else {\n        parseTimes(options, opts);\n        callback = callback || noop;\n    }\n\n    if (typeof task !== 'function') {\n        throw new Error(\"Invalid arguments for async.retry\");\n    }\n\n    var _task = wrapAsync(task);\n\n    var attempt = 1;\n    function retryAttempt() {\n        _task(function(err) {\n            if (err && attempt++ < options.times &&\n                (typeof options.errorFilter != 'function' ||\n                    options.errorFilter(err))) {\n                setTimeout(retryAttempt, options.intervalFunc(attempt));\n            } else {\n                callback.apply(null, arguments);\n            }\n        });\n    }\n\n    retryAttempt();\n}\n\n/**\n * A close relative of [`retry`]{@link module:ControlFlow.retry}.  This method\n * wraps a task and makes it retryable, rather than immediately calling it\n * with retries.\n *\n * @name retryable\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.retry]{@link module:ControlFlow.retry}\n * @category Control Flow\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - optional\n * options, exactly the same as from `retry`\n * @param {AsyncFunction} task - the asynchronous function to wrap.\n * This function will be passed any arguments passed to the returned wrapper.\n * Invoked with (...args, callback).\n * @returns {AsyncFunction} The wrapped function, which when invoked, will\n * retry on an error, based on the parameters specified in `opts`.\n * This function will accept the same parameters as `task`.\n * @example\n *\n * async.auto({\n *     dep1: async.retryable(3, getFromFlakyService),\n *     process: [\"dep1\", async.retryable(3, function (results, cb) {\n *         maybeProcessData(results.dep1, cb);\n *     })]\n * }, callback);\n */\nvar retryable = function (opts, task) {\n    if (!task) {\n        task = opts;\n        opts = null;\n    }\n    var _task = wrapAsync(task);\n    return initialParams(function (args, callback) {\n        function taskFn(cb) {\n            _task.apply(null, args.concat(cb));\n        }\n\n        if (opts) retry(opts, taskFn, callback);\n        else retry(taskFn, callback);\n\n    });\n};\n\n/**\n * Run the functions in the `tasks` collection in series, each one running once\n * the previous function has completed. If any functions in the series pass an\n * error to its callback, no more functions are run, and `callback` is\n * immediately called with the value of the error. Otherwise, `callback`\n * receives an array of results when `tasks` have completed.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function, and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n *  results from {@link async.series}.\n *\n * **Note** that while many implementations preserve the order of object\n * properties, the [ECMAScript Language Specification](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6)\n * explicitly states that\n *\n * > The mechanics and order of enumerating the properties is not specified.\n *\n * So if you rely on the order in which your series of functions are executed,\n * and want this to work on all platforms, consider using an array.\n *\n * @name series\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection containing\n * [async functions]{@link AsyncFunction} to run in series.\n * Each function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This function gets a results array (or object)\n * containing all the result arguments passed to the `task` callbacks. Invoked\n * with (err, result).\n * @example\n * async.series([\n *     function(callback) {\n *         // do some stuff ...\n *         callback(null, 'one');\n *     },\n *     function(callback) {\n *         // do some more stuff ...\n *         callback(null, 'two');\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // results is now equal to ['one', 'two']\n * });\n *\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback){\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equal to: {one: 1, two: 2}\n * });\n */\nfunction series(tasks, callback) {\n    _parallel(eachOfSeries, tasks, callback);\n}\n\n/**\n * Returns `true` if at least one element in the `coll` satisfies an async test.\n * If any iteratee call returns `true`, the main `callback` is immediately\n * called.\n *\n * @name some\n * @static\n * @memberOf module:Collections\n * @method\n * @alias any\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @example\n *\n * async.some(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // if result is true then at least one of the files exists\n * });\n */\nvar some = doParallel(_createTester(Boolean, identity));\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs a maximum of `limit` async operations at a time.\n *\n * @name someLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anyLimit\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n */\nvar someLimit = doParallelLimit(_createTester(Boolean, identity));\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs only a single async operation at a time.\n *\n * @name someSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anySeries\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in series.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n */\nvar someSeries = doLimit(someLimit, 1);\n\n/**\n * Sorts a list by the results of running each `coll` value through an async\n * `iteratee`.\n *\n * @name sortBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a value to use as the sort criteria as\n * its `result`.\n * Invoked with (item, callback).\n * @param {Function} callback - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is the items\n * from the original `coll` sorted by the values returned by the `iteratee`\n * calls. Invoked with (err, results).\n * @example\n *\n * async.sortBy(['file1','file2','file3'], function(file, callback) {\n *     fs.stat(file, function(err, stats) {\n *         callback(err, stats.mtime);\n *     });\n * }, function(err, results) {\n *     // results is now the original array of files sorted by\n *     // modified date\n * });\n *\n * // By modifying the callback parameter the\n * // sorting order can be influenced:\n *\n * // ascending order\n * async.sortBy([1,9,3,5], function(x, callback) {\n *     callback(null, x);\n * }, function(err,result) {\n *     // result callback\n * });\n *\n * // descending order\n * async.sortBy([1,9,3,5], function(x, callback) {\n *     callback(null, x*-1);    //<- x*-1 instead of x, turns the order around\n * }, function(err,result) {\n *     // result callback\n * });\n */\nfunction sortBy (coll, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    map(coll, function (x, callback) {\n        _iteratee(x, function (err, criteria) {\n            if (err) return callback(err);\n            callback(null, {value: x, criteria: criteria});\n        });\n    }, function (err, results) {\n        if (err) return callback(err);\n        callback(null, arrayMap(results.sort(comparator), baseProperty('value')));\n    });\n\n    function comparator(left, right) {\n        var a = left.criteria, b = right.criteria;\n        return a < b ? -1 : a > b ? 1 : 0;\n    }\n}\n\n/**\n * Sets a time limit on an asynchronous function. If the function does not call\n * its callback within the specified milliseconds, it will be called with a\n * timeout error. The code property for the error object will be `'ETIMEDOUT'`.\n *\n * @name timeout\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} asyncFn - The async function to limit in time.\n * @param {number} milliseconds - The specified time limit.\n * @param {*} [info] - Any variable you want attached (`string`, `object`, etc)\n * to timeout Error for more information..\n * @returns {AsyncFunction} Returns a wrapped function that can be used with any\n * of the control flow functions.\n * Invoke this function with the same parameters as you would `asyncFunc`.\n * @example\n *\n * function myFunction(foo, callback) {\n *     doAsyncTask(foo, function(err, data) {\n *         // handle errors\n *         if (err) return callback(err);\n *\n *         // do some stuff ...\n *\n *         // return processed data\n *         return callback(null, data);\n *     });\n * }\n *\n * var wrapped = async.timeout(myFunction, 1000);\n *\n * // call `wrapped` as you would `myFunction`\n * wrapped({ bar: 'bar' }, function(err, data) {\n *     // if `myFunction` takes < 1000 ms to execute, `err`\n *     // and `data` will have their expected values\n *\n *     // else `err` will be an Error with the code 'ETIMEDOUT'\n * });\n */\nfunction timeout(asyncFn, milliseconds, info) {\n    var fn = wrapAsync(asyncFn);\n\n    return initialParams(function (args, callback) {\n        var timedOut = false;\n        var timer;\n\n        function timeoutCallback() {\n            var name = asyncFn.name || 'anonymous';\n            var error  = new Error('Callback function \"' + name + '\" timed out.');\n            error.code = 'ETIMEDOUT';\n            if (info) {\n                error.info = info;\n            }\n            timedOut = true;\n            callback(error);\n        }\n\n        args.push(function () {\n            if (!timedOut) {\n                callback.apply(null, arguments);\n                clearTimeout(timer);\n            }\n        });\n\n        // setup timer and call original function\n        timer = setTimeout(timeoutCallback, milliseconds);\n        fn.apply(null, args);\n    });\n}\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil;\nvar nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name timesLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} count - The number of times to run the function.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see [async.map]{@link module:Collections.map}.\n */\nfunction timeLimit(count, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    mapLimit(baseRange(0, count, 1), limit, _iteratee, callback);\n}\n\n/**\n * Calls the `iteratee` function `n` times, and accumulates results in the same\n * manner you would use with [map]{@link module:Collections.map}.\n *\n * @name times\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n * @example\n *\n * // Pretend this is some complicated async factory\n * var createUser = function(id, callback) {\n *     callback(null, {\n *         id: 'user' + id\n *     });\n * };\n *\n * // generate 5 users\n * async.times(5, function(n, next) {\n *     createUser(n, function(err, user) {\n *         next(err, user);\n *     });\n * }, function(err, users) {\n *     // we should now have 5 users\n * });\n */\nvar times = doLimit(timeLimit, Infinity);\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs only a single async operation at a time.\n *\n * @name timesSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n */\nvar timesSeries = doLimit(timeLimit, 1);\n\n/**\n * A relative of `reduce`.  Takes an Object or Array, and iterates over each\n * element in series, each step potentially mutating an `accumulator` value.\n * The type of the accumulator defaults to the type of collection passed in.\n *\n * @name transform\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|Object} coll - A collection to iterate over.\n * @param {*} [accumulator] - The initial state of the transform.  If omitted,\n * it will default to an empty Object or Array, depending on the type of `coll`\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * collection that potentially modifies the accumulator.\n * Invoked with (accumulator, item, key, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the transformed accumulator.\n * Invoked with (err, result).\n * @example\n *\n * async.transform([1,2,3], function(acc, item, index, callback) {\n *     // pointless async:\n *     process.nextTick(function() {\n *         acc.push(item * 2)\n *         callback(null)\n *     });\n * }, function(err, result) {\n *     // result is now equal to [2, 4, 6]\n * });\n *\n * @example\n *\n * async.transform({a: 1, b: 2, c: 3}, function (obj, val, key, callback) {\n *     setImmediate(function () {\n *         obj[key] = val * 2;\n *         callback();\n *     })\n * }, function (err, result) {\n *     // result is equal to {a: 2, b: 4, c: 6}\n * })\n */\nfunction transform (coll, accumulator, iteratee, callback) {\n    if (arguments.length <= 3) {\n        callback = iteratee;\n        iteratee = accumulator;\n        accumulator = isArray(coll) ? [] : {};\n    }\n    callback = once(callback || noop);\n    var _iteratee = wrapAsync(iteratee);\n\n    eachOf(coll, function(v, k, cb) {\n        _iteratee(accumulator, v, k, cb);\n    }, function(err) {\n        callback(err, accumulator);\n    });\n}\n\n/**\n * It runs each task in series but stops whenever any of the functions were\n * successful. If one of the tasks were successful, the `callback` will be\n * passed the result of the successful task. If all tasks fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name tryEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|Object} tasks - A collection containing functions to\n * run, each function is passed a `callback(err, result)` it must call on\n * completion with an error `err` (which can be `null`) and an optional `result`\n * value.\n * @param {Function} [callback] - An optional callback which is called when one\n * of the tasks has succeeded, or all have failed. It receives the `err` and\n * `result` arguments of the last attempt at completing the `task`. Invoked with\n * (err, results).\n * @example\n * async.tryEach([\n *     function getDataFromFirstWebsite(callback) {\n *         // Try getting the data from the first website\n *         callback(err, data);\n *     },\n *     function getDataFromSecondWebsite(callback) {\n *         // First website failed,\n *         // Try getting the data from the backup website\n *         callback(err, data);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     Now do something with the data.\n * });\n *\n */\nfunction tryEach(tasks, callback) {\n    var error = null;\n    var result;\n    callback = callback || noop;\n    eachSeries(tasks, function(task, callback) {\n        wrapAsync(task)(function (err, res/*, ...args*/) {\n            if (arguments.length > 2) {\n                result = slice(arguments, 1);\n            } else {\n                result = res;\n            }\n            error = err;\n            callback(!err);\n        });\n    }, function () {\n        callback(error, result);\n    });\n}\n\n/**\n * Undoes a [memoize]{@link module:Utils.memoize}d function, reverting it to the original,\n * unmemoized form. Handy for testing.\n *\n * @name unmemoize\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.memoize]{@link module:Utils.memoize}\n * @category Util\n * @param {AsyncFunction} fn - the memoized function\n * @returns {AsyncFunction} a function that calls the original unmemoized function\n */\nfunction unmemoize(fn) {\n    return function () {\n        return (fn.unmemoized || fn).apply(null, arguments);\n    };\n}\n\n/**\n * Repeatedly call `iteratee`, while `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs.\n *\n * @name whilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Function} test - synchronous truth test to perform before each\n * execution of `iteratee`. Invoked with ().\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns undefined\n * @example\n *\n * var count = 0;\n * async.whilst(\n *     function() { return count < 5; },\n *     function(callback) {\n *         count++;\n *         setTimeout(function() {\n *             callback(null, count);\n *         }, 1000);\n *     },\n *     function (err, n) {\n *         // 5 seconds have passed, n = 5\n *     }\n * );\n */\nfunction whilst(test, iteratee, callback) {\n    callback = onlyOnce(callback || noop);\n    var _iteratee = wrapAsync(iteratee);\n    if (!test()) return callback(null);\n    var next = function(err/*, ...args*/) {\n        if (err) return callback(err);\n        if (test()) return _iteratee(next);\n        var args = slice(arguments, 1);\n        callback.apply(null, [null].concat(args));\n    };\n    _iteratee(next);\n}\n\n/**\n * Repeatedly call `iteratee` until `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs. `callback` will be passed an error and any\n * arguments passed to the final `iteratee`'s callback.\n *\n * The inverse of [whilst]{@link module:ControlFlow.whilst}.\n *\n * @name until\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {Function} test - synchronous truth test to perform before each\n * execution of `iteratee`. Invoked with ().\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n */\nfunction until(test, iteratee, callback) {\n    whilst(function() {\n        return !test.apply(this, arguments);\n    }, iteratee, callback);\n}\n\n/**\n * Runs the `tasks` array of functions in series, each passing their results to\n * the next in the array. However, if any of the `tasks` pass an error to their\n * own callback, the next function is not executed, and the main `callback` is\n * immediately called with the error.\n *\n * @name waterfall\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array of [async functions]{@link AsyncFunction}\n * to run.\n * Each function should complete with any number of `result` values.\n * The `result` values will be passed as arguments, in order, to the next task.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This will be passed the results of the last task's\n * callback. Invoked with (err, [results]).\n * @returns undefined\n * @example\n *\n * async.waterfall([\n *     function(callback) {\n *         callback(null, 'one', 'two');\n *     },\n *     function(arg1, arg2, callback) {\n *         // arg1 now equals 'one' and arg2 now equals 'two'\n *         callback(null, 'three');\n *     },\n *     function(arg1, callback) {\n *         // arg1 now equals 'three'\n *         callback(null, 'done');\n *     }\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n *\n * // Or, with named functions:\n * async.waterfall([\n *     myFirstFunction,\n *     mySecondFunction,\n *     myLastFunction,\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n * function myFirstFunction(callback) {\n *     callback(null, 'one', 'two');\n * }\n * function mySecondFunction(arg1, arg2, callback) {\n *     // arg1 now equals 'one' and arg2 now equals 'two'\n *     callback(null, 'three');\n * }\n * function myLastFunction(arg1, callback) {\n *     // arg1 now equals 'three'\n *     callback(null, 'done');\n * }\n */\nvar waterfall = function(tasks, callback) {\n    callback = once(callback || noop);\n    if (!isArray(tasks)) return callback(new Error('First argument to waterfall must be an array of functions'));\n    if (!tasks.length) return callback();\n    var taskIndex = 0;\n\n    function nextTask(args) {\n        var task = wrapAsync(tasks[taskIndex++]);\n        args.push(onlyOnce(next));\n        task.apply(null, args);\n    }\n\n    function next(err/*, ...args*/) {\n        if (err || taskIndex === tasks.length) {\n            return callback.apply(null, arguments);\n        }\n        nextTask(slice(arguments, 1));\n    }\n\n    nextTask([]);\n};\n\n/**\n * An \"async function\" in the context of Async is an asynchronous function with\n * a variable number of parameters, with the final parameter being a callback.\n * (`function (arg1, arg2, ..., callback) {}`)\n * The final callback is of the form `callback(err, results...)`, which must be\n * called once the function is completed.  The callback should be called with a\n * Error as its first argument to signal that an error occurred.\n * Otherwise, if no error occurred, it should be called with `null` as the first\n * argument, and any additional `result` arguments that may apply, to signal\n * successful completion.\n * The callback must be called exactly once, ideally on a later tick of the\n * JavaScript event loop.\n *\n * This type of function is also referred to as a \"Node-style async function\",\n * or a \"continuation passing-style function\" (CPS). Most of the methods of this\n * library are themselves CPS/Node-style async functions, or functions that\n * return CPS/Node-style async functions.\n *\n * Wherever we accept a Node-style async function, we also directly accept an\n * [ES2017 `async` function]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function}.\n * In this case, the `async` function will not be passed a final callback\n * argument, and any thrown error will be used as the `err` argument of the\n * implicit callback, and the return value will be used as the `result` value.\n * (i.e. a `rejected` of the returned Promise becomes the `err` callback\n * argument, and a `resolved` value becomes the `result`.)\n *\n * Note, due to JavaScript limitations, we can only detect native `async`\n * functions and not transpilied implementations.\n * Your environment must have `async`/`await` support for this to work.\n * (e.g. Node > v7.6, or a recent version of a modern browser).\n * If you are using `async` functions through a transpiler (e.g. Babel), you\n * must still wrap the function with [asyncify]{@link module:Utils.asyncify},\n * because the `async function` will be compiled to an ordinary function that\n * returns a promise.\n *\n * @typedef {Function} AsyncFunction\n * @static\n */\n\n/**\n * Async is a utility module which provides straight-forward, powerful functions\n * for working with asynchronous JavaScript. Although originally designed for\n * use with [Node.js](http://nodejs.org) and installable via\n * `npm install --save async`, it can also be used directly in the browser.\n * @module async\n * @see AsyncFunction\n */\n\n\n/**\n * A collection of `async` functions for manipulating collections, such as\n * arrays and objects.\n * @module Collections\n */\n\n/**\n * A collection of `async` functions for controlling the flow through a script.\n * @module ControlFlow\n */\n\n/**\n * A collection of `async` utility functions.\n * @module Utils\n */\n\nvar index = {\n    apply: apply,\n    applyEach: applyEach,\n    applyEachSeries: applyEachSeries,\n    asyncify: asyncify,\n    auto: auto,\n    autoInject: autoInject,\n    cargo: cargo,\n    compose: compose,\n    concat: concat,\n    concatLimit: concatLimit,\n    concatSeries: concatSeries,\n    constant: constant,\n    detect: detect,\n    detectLimit: detectLimit,\n    detectSeries: detectSeries,\n    dir: dir,\n    doDuring: doDuring,\n    doUntil: doUntil,\n    doWhilst: doWhilst,\n    during: during,\n    each: eachLimit,\n    eachLimit: eachLimit$1,\n    eachOf: eachOf,\n    eachOfLimit: eachOfLimit,\n    eachOfSeries: eachOfSeries,\n    eachSeries: eachSeries,\n    ensureAsync: ensureAsync,\n    every: every,\n    everyLimit: everyLimit,\n    everySeries: everySeries,\n    filter: filter,\n    filterLimit: filterLimit,\n    filterSeries: filterSeries,\n    forever: forever,\n    groupBy: groupBy,\n    groupByLimit: groupByLimit,\n    groupBySeries: groupBySeries,\n    log: log,\n    map: map,\n    mapLimit: mapLimit,\n    mapSeries: mapSeries,\n    mapValues: mapValues,\n    mapValuesLimit: mapValuesLimit,\n    mapValuesSeries: mapValuesSeries,\n    memoize: memoize,\n    nextTick: nextTick,\n    parallel: parallelLimit,\n    parallelLimit: parallelLimit$1,\n    priorityQueue: priorityQueue,\n    queue: queue$1,\n    race: race,\n    reduce: reduce,\n    reduceRight: reduceRight,\n    reflect: reflect,\n    reflectAll: reflectAll,\n    reject: reject,\n    rejectLimit: rejectLimit,\n    rejectSeries: rejectSeries,\n    retry: retry,\n    retryable: retryable,\n    seq: seq,\n    series: series,\n    setImmediate: setImmediate$1,\n    some: some,\n    someLimit: someLimit,\n    someSeries: someSeries,\n    sortBy: sortBy,\n    timeout: timeout,\n    times: times,\n    timesLimit: timeLimit,\n    timesSeries: timesSeries,\n    transform: transform,\n    tryEach: tryEach,\n    unmemoize: unmemoize,\n    until: until,\n    waterfall: waterfall,\n    whilst: whilst,\n\n    // aliases\n    all: every,\n    allLimit: everyLimit,\n    allSeries: everySeries,\n    any: some,\n    anyLimit: someLimit,\n    anySeries: someSeries,\n    find: detect,\n    findLimit: detectLimit,\n    findSeries: detectSeries,\n    forEach: eachLimit,\n    forEachSeries: eachSeries,\n    forEachLimit: eachLimit$1,\n    forEachOf: eachOf,\n    forEachOfSeries: eachOfSeries,\n    forEachOfLimit: eachOfLimit,\n    inject: reduce,\n    foldl: reduce,\n    foldr: reduceRight,\n    select: filter,\n    selectLimit: filterLimit,\n    selectSeries: filterSeries,\n    wrapSync: asyncify\n};\n\nexports['default'] = index;\nexports.apply = apply;\nexports.applyEach = applyEach;\nexports.applyEachSeries = applyEachSeries;\nexports.asyncify = asyncify;\nexports.auto = auto;\nexports.autoInject = autoInject;\nexports.cargo = cargo;\nexports.compose = compose;\nexports.concat = concat;\nexports.concatLimit = concatLimit;\nexports.concatSeries = concatSeries;\nexports.constant = constant;\nexports.detect = detect;\nexports.detectLimit = detectLimit;\nexports.detectSeries = detectSeries;\nexports.dir = dir;\nexports.doDuring = doDuring;\nexports.doUntil = doUntil;\nexports.doWhilst = doWhilst;\nexports.during = during;\nexports.each = eachLimit;\nexports.eachLimit = eachLimit$1;\nexports.eachOf = eachOf;\nexports.eachOfLimit = eachOfLimit;\nexports.eachOfSeries = eachOfSeries;\nexports.eachSeries = eachSeries;\nexports.ensureAsync = ensureAsync;\nexports.every = every;\nexports.everyLimit = everyLimit;\nexports.everySeries = everySeries;\nexports.filter = filter;\nexports.filterLimit = filterLimit;\nexports.filterSeries = filterSeries;\nexports.forever = forever;\nexports.groupBy = groupBy;\nexports.groupByLimit = groupByLimit;\nexports.groupBySeries = groupBySeries;\nexports.log = log;\nexports.map = map;\nexports.mapLimit = mapLimit;\nexports.mapSeries = mapSeries;\nexports.mapValues = mapValues;\nexports.mapValuesLimit = mapValuesLimit;\nexports.mapValuesSeries = mapValuesSeries;\nexports.memoize = memoize;\nexports.nextTick = nextTick;\nexports.parallel = parallelLimit;\nexports.parallelLimit = parallelLimit$1;\nexports.priorityQueue = priorityQueue;\nexports.queue = queue$1;\nexports.race = race;\nexports.reduce = reduce;\nexports.reduceRight = reduceRight;\nexports.reflect = reflect;\nexports.reflectAll = reflectAll;\nexports.reject = reject;\nexports.rejectLimit = rejectLimit;\nexports.rejectSeries = rejectSeries;\nexports.retry = retry;\nexports.retryable = retryable;\nexports.seq = seq;\nexports.series = series;\nexports.setImmediate = setImmediate$1;\nexports.some = some;\nexports.someLimit = someLimit;\nexports.someSeries = someSeries;\nexports.sortBy = sortBy;\nexports.timeout = timeout;\nexports.times = times;\nexports.timesLimit = timeLimit;\nexports.timesSeries = timesSeries;\nexports.transform = transform;\nexports.tryEach = tryEach;\nexports.unmemoize = unmemoize;\nexports.until = until;\nexports.waterfall = waterfall;\nexports.whilst = whilst;\nexports.all = every;\nexports.allLimit = everyLimit;\nexports.allSeries = everySeries;\nexports.any = some;\nexports.anyLimit = someLimit;\nexports.anySeries = someSeries;\nexports.find = detect;\nexports.findLimit = detectLimit;\nexports.findSeries = detectSeries;\nexports.forEach = eachLimit;\nexports.forEachSeries = eachSeries;\nexports.forEachLimit = eachLimit$1;\nexports.forEachOf = eachOf;\nexports.forEachOfSeries = eachOfSeries;\nexports.forEachOfLimit = eachOfLimit;\nexports.inject = reduce;\nexports.foldl = reduce;\nexports.foldr = reduceRight;\nexports.select = filter;\nexports.selectLimit = filterLimit;\nexports.selectSeries = filterSeries;\nexports.wrapSync = asyncify;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console;\n\n  // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};\n\n","\"use strict\";\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;\n\n","\"use strict\";\n\n/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n  module.exports = require('./browser.js');\n} else {\n  module.exports = require('./node.js');\n}\n\n","\"use strict\";\n\n/**\n * Module dependencies.\n */\nvar tty = require('tty');\n\nvar util = require('util');\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n  // Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n  // eslint-disable-next-line import/no-extraneous-dependencies\n  var supportsColor = require('supports-color');\n\n  if (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n    exports.colors = [20, 21, 26, 27, 32, 33, 38, 39, 40, 41, 42, 43, 44, 45, 56, 57, 62, 63, 68, 69, 74, 75, 76, 77, 78, 79, 80, 81, 92, 93, 98, 99, 112, 113, 128, 129, 134, 135, 148, 149, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 178, 179, 184, 185, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 214, 215, 220, 221];\n  }\n} catch (error) {} // Swallow - we only care if `supports-color` is available; it doesn't have to be.\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\n\nexports.inspectOpts = Object.keys(process.env).filter(function (key) {\n  return /^debug_/i.test(key);\n}).reduce(function (obj, key) {\n  // Camel-case\n  var prop = key.substring(6).toLowerCase().replace(/_([a-z])/g, function (_, k) {\n    return k.toUpperCase();\n  }); // Coerce string value into JS value\n\n  var val = process.env[key];\n\n  if (/^(yes|on|true|enabled)$/i.test(val)) {\n    val = true;\n  } else if (/^(no|off|false|disabled)$/i.test(val)) {\n    val = false;\n  } else if (val === 'null') {\n    val = null;\n  } else {\n    val = Number(val);\n  }\n\n  obj[prop] = val;\n  return obj;\n}, {});\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n  return 'colors' in exports.inspectOpts ? Boolean(exports.inspectOpts.colors) : tty.isatty(process.stderr.fd);\n}\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  var name = this.namespace,\n      useColors = this.useColors;\n\n  if (useColors) {\n    var c = this.color;\n    var colorCode = \"\\x1B[3\" + (c < 8 ? c : '8;5;' + c);\n    var prefix = \"  \".concat(colorCode, \";1m\").concat(name, \" \\x1B[0m\");\n    args[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n    args.push(colorCode + 'm+' + module.exports.humanize(this.diff) + \"\\x1B[0m\");\n  } else {\n    args[0] = getDate() + name + ' ' + args[0];\n  }\n}\n\nfunction getDate() {\n  if (exports.inspectOpts.hideDate) {\n    return '';\n  }\n\n  return new Date().toISOString() + ' ';\n}\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\n\nfunction log() {\n  return process.stderr.write(util.format.apply(util, arguments) + '\\n');\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  if (namespaces) {\n    process.env.DEBUG = namespaces;\n  } else {\n    // If you set a process.env field to null or undefined, it gets cast to the\n    // string 'null' or 'undefined'. Just delete instead.\n    delete process.env.DEBUG;\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  return process.env.DEBUG;\n}\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\n\nfunction init(debug) {\n  debug.inspectOpts = {};\n  var keys = Object.keys(exports.inspectOpts);\n\n  for (var i = 0; i < keys.length; i++) {\n    debug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n  this.inspectOpts.colors = this.useColors;\n  return util.inspect(v, this.inspectOpts).replace(/\\s*\\n\\s*/g, ' ');\n};\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\n\nformatters.O = function (v) {\n  this.inspectOpts.colors = this.useColors;\n  return util.inspect(v, this.inspectOpts);\n};\n\n","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","var path = require('path');\nvar fs = require('fs');\nvar _0777 = parseInt('0777', 8);\n\nmodule.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;\n\nfunction mkdirP (p, opts, f, made) {\n    if (typeof opts === 'function') {\n        f = opts;\n        opts = {};\n    }\n    else if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777\n    }\n    if (!made) made = null;\n    \n    var cb = f || function () {};\n    p = path.resolve(p);\n    \n    xfs.mkdir(p, mode, function (er) {\n        if (!er) {\n            made = made || p;\n            return cb(null, made);\n        }\n        switch (er.code) {\n            case 'ENOENT':\n                if (path.dirname(p) === p) return cb(er);\n                mkdirP(path.dirname(p), opts, function (er, made) {\n                    if (er) cb(er, made);\n                    else mkdirP(p, opts, cb, made);\n                });\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                xfs.stat(p, function (er2, stat) {\n                    // if the stat fails, then that's super weird.\n                    // let the original error be the failure reason.\n                    if (er2 || !stat.isDirectory()) cb(er, made)\n                    else cb(null, made);\n                });\n                break;\n        }\n    });\n}\n\nmkdirP.sync = function sync (p, opts, made) {\n    if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777\n    }\n    if (!made) made = null;\n\n    p = path.resolve(p);\n\n    try {\n        xfs.mkdirSync(p, mode);\n        made = made || p;\n    }\n    catch (err0) {\n        switch (err0.code) {\n            case 'ENOENT' :\n                made = sync(path.dirname(p), opts, made);\n                sync(p, opts, made);\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                var stat;\n                try {\n                    stat = xfs.statSync(p);\n                }\n                catch (err1) {\n                    throw err0;\n                }\n                if (!stat.isDirectory()) throw err0;\n                break;\n        }\n    }\n\n    return made;\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","/*\n * portfinder.js: A simple tool to find an open port on the current machine.\n *\n * (C) 2011, Charlie Robbins\n *\n */\n\n\"use strict\";\n\nvar fs = require('fs'),\n    os = require('os'),\n    net = require('net'),\n    path = require('path'),\n    _async = require('async'),\n    debug = require('debug'),\n    mkdirp = require('mkdirp').mkdirp;\n\nvar debugTestPort = debug('portfinder:testPort'),\n    debugGetPort = debug('portfinder:getPort'),\n    debugDefaultHosts = debug('portfinder:defaultHosts');\n\nvar internals = {};\n\ninternals.testPort = function(options, callback) {\n  if (!callback) {\n    callback = options;\n    options = {};\n  }\n\n  options.server = options.server  || net.createServer(function () {\n    //\n    // Create an empty listener for the port testing server.\n    //\n  });\n\n  debugTestPort(\"entered testPort(): trying\", options.host, \"port\", options.port);\n\n  function onListen () {\n    debugTestPort(\"done w/ testPort(): OK\", options.host, \"port\", options.port);\n\n        options.server.removeListener('error', onError);\n        options.server.close();\n      callback(null, options.port);\n  }\n\n  function onError (err) {\n    debugTestPort(\"done w/ testPort(): failed\", options.host, \"w/ port\", options.port, \"with error\", err.code);\n\n    options.server.removeListener('listening', onListen);\n\n    if (!(err.code == 'EADDRINUSE' || err.code == 'EACCES')) {\n      return callback(err);\n    }\n\n    var nextPort = exports.nextPort(options.port);\n\n    if (nextPort > exports.highestPort) {\n      return callback(new Error('No open ports available'));\n    }\n\n    internals.testPort({\n      port: nextPort,\n      host: options.host,\n      server: options.server\n    }, callback);\n  }\n\n  options.server.once('error', onError);\n  options.server.once('listening', onListen);\n\n  if (options.host) {\n    options.server.listen(options.port, options.host);\n  } else {\n    /*\n      Judgement of service without host\n      example:\n        express().listen(options.port)\n    */\n    options.server.listen(options.port);\n  }\n};\n\n//\n// ### @basePort {Number}\n// The lowest port to begin any port search from\n//\nexports.basePort = 8000;\n\n//\n// ### @highestPort {Number}\n// Largest port number is an unsigned short 2**16 -1=65335\n//\nexports.highestPort = 65535;\n\n//\n// ### @basePath {string}\n// Default path to begin any socket search from\n//\nexports.basePath = '/tmp/portfinder'\n\n//\n// ### function getPort (options, callback)\n// #### @options {Object} Settings to use when finding the necessary port\n// #### @callback {function} Continuation to respond to when complete.\n// Responds with a unbound port on the current machine.\n//\nexports.getPort = function (options, callback) {\n  if (!callback) {\n    callback = options;\n    options = {};\n\n  }\n\n  options.port   = Number(options.port) || Number(exports.basePort);\n  options.host   = options.host    || null;\n  options.stopPort = Number(options.stopPort) || Number(exports.highestPort);\n\n  if(!options.startPort) {\n    options.startPort = Number(options.port);\n    if(options.startPort < 0) {\n      throw Error('Provided options.startPort(' + options.startPort + ') is less than 0, which are cannot be bound.');\n    }\n    if(options.stopPort < options.startPort) {\n      throw Error('Provided options.stopPort(' + options.stopPort + 'is less than options.startPort (' + options.startPort + ')');\n    }\n  }\n\n  if (options.host) {\n\n    var hasUserGivenHost;\n    for (var i = 0; i < exports._defaultHosts.length; i++) {\n      if (exports._defaultHosts[i] === options.host) {\n        hasUserGivenHost = true;\n        break;\n      }\n    }\n\n    if (!hasUserGivenHost) {\n      exports._defaultHosts.push(options.host);\n    }\n\n  }\n\n  var openPorts = [], currentHost;\n  return _async.eachSeries(exports._defaultHosts, function(host, next) {\n    debugGetPort(\"in eachSeries() iteration callback: host is\", host);\n\n    return internals.testPort({ host: host, port: options.port }, function(err, port) {\n      if (err) {\n        debugGetPort(\"in eachSeries() iteration callback testPort() callback\", \"with an err:\", err.code);\n        currentHost = host;\n        return next(err);\n      } else {\n        debugGetPort(\"in eachSeries() iteration callback testPort() callback\",\n                    \"with a success for port\", port);\n        openPorts.push(port);\n        return next();\n      }\n    });\n  }, function(err) {\n\n    if (err) {\n      debugGetPort(\"in eachSeries() result callback: err is\", err);\n      // If we get EADDRNOTAVAIL it means the host is not bindable, so remove it\n      // from exports._defaultHosts and start over. For ubuntu, we use EINVAL for the same\n      if (err.code === 'EADDRNOTAVAIL' || err.code === 'EINVAL') {\n        if (options.host === currentHost) {\n          // if bad address matches host given by user, tell them\n          //\n          // NOTE: We may need to one day handle `my-non-existent-host.local` if users\n          // report frustration with passing in hostnames that DONT map to bindable\n          // hosts, without showing them a good error.\n          var msg = 'Provided host ' + options.host + ' could NOT be bound. Please provide a different host address or hostname';\n          return callback(Error(msg));\n        } else {\n          var idx = exports._defaultHosts.indexOf(currentHost);\n          exports._defaultHosts.splice(idx, 1);\n          return exports.getPort(options, callback);\n        }\n      } else {\n        // error is not accounted for, file ticket, handle special case\n        return callback(err);\n      }\n    }\n\n    // sort so we can compare first host to last host\n    openPorts.sort(function(a, b) {\n      return a - b;\n    });\n\n    debugGetPort(\"in eachSeries() result callback: openPorts is\", openPorts);\n\n    if (openPorts[0] === openPorts[openPorts.length-1]) {\n      // if first === last, we found an open port\n      if(openPorts[0] <= options.stopPort) {\n        return callback(null, openPorts[0]);\n      }\n      else {\n        var msg = 'No open ports found in between '+ options.startPort + ' and ' + options.stopPort;\n        return callback(Error(msg));\n      }\n    } else {\n      // otherwise, try again, using sorted port, aka, highest open for >= 1 host\n      return exports.getPort({ port: openPorts.pop(), host: options.host, startPort: options.startPort, stopPort: options.stopPort }, callback);\n    }\n\n  });\n};\n\n//\n// ### function getPortPromise (options)\n// #### @options {Object} Settings to use when finding the necessary port\n// Responds a promise to an unbound port on the current machine.\n//\nexports.getPortPromise = function (options) {\n  if (typeof Promise !== 'function') {\n    throw Error('Native promise support is not available in this version of node.' +\n      'Please install a polyfill and assign Promise to global.Promise before calling this method');\n  }\n  if (!options) {\n    options = {};\n  }\n  return new Promise(function(resolve, reject) {\n    exports.getPort(options, function(err, port) {\n      if (err) {\n        return reject(err);\n      }\n      resolve(port);\n    });\n  });\n}\n\n//\n// ### function getPorts (count, options, callback)\n// #### @count {Number} The number of ports to find\n// #### @options {Object} Settings to use when finding the necessary port\n// #### @callback {function} Continuation to respond to when complete.\n// Responds with an array of unbound ports on the current machine.\n//\nexports.getPorts = function (count, options, callback) {\n  if (!callback) {\n    callback = options;\n    options = {};\n  }\n\n  var lastPort = null;\n  _async.timesSeries(count, function(index, asyncCallback) {\n    if (lastPort) {\n      options.port = exports.nextPort(lastPort);\n    }\n\n    exports.getPort(options, function (err, port) {\n      if (err) {\n        asyncCallback(err);\n      } else {\n        lastPort = port;\n        asyncCallback(null, port);\n      }\n    });\n  }, callback);\n};\n\n//\n// ### function getSocket (options, callback)\n// #### @options {Object} Settings to use when finding the necessary port\n// #### @callback {function} Continuation to respond to when complete.\n// Responds with a unbound socket using the specified directory and base\n// name on the current machine.\n//\nexports.getSocket = function (options, callback) {\n  if (!callback) {\n    callback = options;\n    options = {};\n  }\n\n  options.mod  = options.mod    || parseInt(755, 8);\n  options.path = options.path   || exports.basePath + '.sock';\n\n  //\n  // Tests the specified socket\n  //\n  function testSocket () {\n    fs.stat(options.path, function (err) {\n      //\n      // If file we're checking doesn't exist (thus, stating it emits ENOENT),\n      // we should be OK with listening on this socket.\n      //\n      if (err) {\n        if (err.code == 'ENOENT') {\n          callback(null, options.path);\n        }\n        else {\n          callback(err);\n        }\n      }\n      else {\n        //\n        // This file exists, so it isn't possible to listen on it. Lets try\n        // next socket.\n        //\n        options.path = exports.nextSocket(options.path);\n        exports.getSocket(options, callback);\n      }\n    });\n  }\n\n  //\n  // Create the target `dir` then test connection\n  // against the socket.\n  //\n  function createAndTestSocket (dir) {\n    mkdirp(dir, options.mod, function (err) {\n      if (err) {\n        return callback(err);\n      }\n\n      options.exists = true;\n      testSocket();\n    });\n  }\n\n  //\n  // Check if the parent directory of the target\n  // socket path exists. If it does, test connection\n  // against the socket. Otherwise, create the directory\n  // then test connection.\n  //\n  function checkAndTestSocket () {\n    var dir = path.dirname(options.path);\n\n    fs.stat(dir, function (err, stats) {\n      if (err || !stats.isDirectory()) {\n        return createAndTestSocket(dir);\n      }\n\n      options.exists = true;\n      testSocket();\n    });\n  }\n\n  //\n  // If it has been explicitly stated that the\n  // target `options.path` already exists, then\n  // simply test the socket.\n  //\n  return options.exists\n    ? testSocket()\n    : checkAndTestSocket();\n};\n\n//\n// ### function nextPort (port)\n// #### @port {Number} Port to increment from.\n// Gets the next port in sequence from the\n// specified `port`.\n//\nexports.nextPort = function (port) {\n  return port + 1;\n};\n\n//\n// ### function nextSocket (socketPath)\n// #### @socketPath {string} Path to increment from\n// Gets the next socket path in sequence from the\n// specified `socketPath`.\n//\nexports.nextSocket = function (socketPath) {\n  var dir = path.dirname(socketPath),\n      name = path.basename(socketPath, '.sock'),\n      match = name.match(/^([a-zA-z]+)(\\d*)$/i),\n      index = parseInt(match[2]),\n      base = match[1];\n  if (isNaN(index)) {\n    index = 0;\n  }\n\n  index += 1;\n  return path.join(dir, base + index + '.sock');\n};\n\n/**\n * @desc List of internal hostnames provided by your machine. A user\n *       provided hostname may also be provided when calling portfinder.getPort,\n *       which would then be added to the default hosts we lookup and return here.\n *\n * @return {array}\n *\n * Long Form Explantion:\n *\n *    - Input: (os.networkInterfaces() w/ MacOS 10.11.5+ and running a VM)\n *\n *        { lo0:\n *         [ { address: '::1',\n *             netmask: 'ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff',\n *             family: 'IPv6',\n *             mac: '00:00:00:00:00:00',\n *             scopeid: 0,\n *             internal: true },\n *           { address: '127.0.0.1',\n *             netmask: '255.0.0.0',\n *             family: 'IPv4',\n *             mac: '00:00:00:00:00:00',\n *             internal: true },\n *           { address: 'fe80::1',\n *             netmask: 'ffff:ffff:ffff:ffff::',\n *             family: 'IPv6',\n *             mac: '00:00:00:00:00:00',\n *             scopeid: 1,\n *             internal: true } ],\n *        en0:\n *         [ { address: 'fe80::a299:9bff:fe17:766d',\n *             netmask: 'ffff:ffff:ffff:ffff::',\n *             family: 'IPv6',\n *             mac: 'a0:99:9b:17:76:6d',\n *             scopeid: 4,\n *             internal: false },\n *           { address: '10.0.1.22',\n *             netmask: '255.255.255.0',\n *             family: 'IPv4',\n *             mac: 'a0:99:9b:17:76:6d',\n *             internal: false } ],\n *        awdl0:\n *         [ { address: 'fe80::48a8:37ff:fe34:aaef',\n *             netmask: 'ffff:ffff:ffff:ffff::',\n *             family: 'IPv6',\n *             mac: '4a:a8:37:34:aa:ef',\n *             scopeid: 8,\n *             internal: false } ],\n *        vnic0:\n *         [ { address: '10.211.55.2',\n *             netmask: '255.255.255.0',\n *             family: 'IPv4',\n *             mac: '00:1c:42:00:00:08',\n *             internal: false } ],\n *        vnic1:\n *         [ { address: '10.37.129.2',\n *             netmask: '255.255.255.0',\n *             family: 'IPv4',\n *             mac: '00:1c:42:00:00:09',\n *             internal: false } ] }\n *\n *    - Output:\n *\n *         [\n *          '0.0.0.0',\n *          '::1',\n *          '127.0.0.1',\n *          'fe80::1',\n *          '10.0.1.22',\n *          'fe80::48a8:37ff:fe34:aaef',\n *          '10.211.55.2',\n *          '10.37.129.2'\n *         ]\n *\n *     Note we export this so we can use it in our tests, otherwise this API is private\n */\nexports._defaultHosts = (function() {\n  var interfaces = {};\n  try{\n    interfaces = os.networkInterfaces();\n  }\n  catch(e) {\n    // As of October 2016, Windows Subsystem for Linux (WSL) does not support\n    // the os.networkInterfaces() call and throws instead. For this platform,\n    // assume 0.0.0.0 as the only address\n    //\n    // - https://github.com/Microsoft/BashOnWindows/issues/468\n    //\n    // - Workaround is a mix of good work from the community:\n    //   - https://github.com/http-party/node-portfinder/commit/8d7e30a648ff5034186551fa8a6652669dec2f2f\n    //   - https://github.com/yarnpkg/yarn/pull/772/files\n    if (e.syscall === 'uv_interface_addresses') {\n      // swallow error because we're just going to use defaults\n      // documented @ https://github.com/nodejs/node/blob/4b65a65e75f48ff447cabd5500ce115fb5ad4c57/doc/api/net.md#L231\n    } else {\n      throw e;\n    }\n  }\n\n  var interfaceNames = Object.keys(interfaces),\n      hiddenButImportantHost = '0.0.0.0', // !important - dont remove, hence the naming :)\n      results = [hiddenButImportantHost];\n  for (var i = 0; i < interfaceNames.length; i++) {\n    var _interface = interfaces[interfaceNames[i]];\n    for (var j = 0; j < _interface.length; j++) {\n      var curr = _interface[j];\n      results.push(curr.address);\n    }\n  }\n\n  // add null value, For createServer function, do not use host.\n  results.push(null);\n\n  debugDefaultHosts(\"exports._defaultHosts is: %o\", results);\n\n  return results;\n}());\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar t = exports.tokens = {}\nvar R = 0\n\nfunction tok (n) {\n  t[n] = R++\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ntok('NUMERICIDENTIFIER')\nsrc[t.NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\ntok('NUMERICIDENTIFIERLOOSE')\nsrc[t.NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ntok('NONNUMERICIDENTIFIER')\nsrc[t.NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ntok('MAINVERSION')\nsrc[t.MAINVERSION] = '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')'\n\ntok('MAINVERSIONLOOSE')\nsrc[t.MAINVERSIONLOOSE] = '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ntok('PRERELEASEIDENTIFIER')\nsrc[t.PRERELEASEIDENTIFIER] = '(?:' + src[t.NUMERICIDENTIFIER] +\n                            '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\ntok('PRERELEASEIDENTIFIERLOOSE')\nsrc[t.PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[t.NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ntok('PRERELEASE')\nsrc[t.PRERELEASE] = '(?:-(' + src[t.PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[t.PRERELEASEIDENTIFIER] + ')*))'\n\ntok('PRERELEASELOOSE')\nsrc[t.PRERELEASELOOSE] = '(?:-?(' + src[t.PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[t.PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ntok('BUILDIDENTIFIER')\nsrc[t.BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ntok('BUILD')\nsrc[t.BUILD] = '(?:\\\\+(' + src[t.BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[t.BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ntok('FULL')\ntok('FULLPLAIN')\nsrc[t.FULLPLAIN] = 'v?' + src[t.MAINVERSION] +\n                  src[t.PRERELEASE] + '?' +\n                  src[t.BUILD] + '?'\n\nsrc[t.FULL] = '^' + src[t.FULLPLAIN] + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ntok('LOOSEPLAIN')\nsrc[t.LOOSEPLAIN] = '[v=\\\\s]*' + src[t.MAINVERSIONLOOSE] +\n                  src[t.PRERELEASELOOSE] + '?' +\n                  src[t.BUILD] + '?'\n\ntok('LOOSE')\nsrc[t.LOOSE] = '^' + src[t.LOOSEPLAIN] + '$'\n\ntok('GTLT')\nsrc[t.GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ntok('XRANGEIDENTIFIERLOOSE')\nsrc[t.XRANGEIDENTIFIERLOOSE] = src[t.NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\ntok('XRANGEIDENTIFIER')\nsrc[t.XRANGEIDENTIFIER] = src[t.NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\ntok('XRANGEPLAIN')\nsrc[t.XRANGEPLAIN] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[t.PRERELEASE] + ')?' +\n                   src[t.BUILD] + '?' +\n                   ')?)?'\n\ntok('XRANGEPLAINLOOSE')\nsrc[t.XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[t.PRERELEASELOOSE] + ')?' +\n                        src[t.BUILD] + '?' +\n                        ')?)?'\n\ntok('XRANGE')\nsrc[t.XRANGE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAIN] + '$'\ntok('XRANGELOOSE')\nsrc[t.XRANGELOOSE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ntok('COERCE')\nsrc[t.COERCE] = '(^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\ntok('COERCERTL')\nre[t.COERCERTL] = new RegExp(src[t.COERCE], 'g')\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ntok('LONETILDE')\nsrc[t.LONETILDE] = '(?:~>?)'\n\ntok('TILDETRIM')\nsrc[t.TILDETRIM] = '(\\\\s*)' + src[t.LONETILDE] + '\\\\s+'\nre[t.TILDETRIM] = new RegExp(src[t.TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\ntok('TILDE')\nsrc[t.TILDE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAIN] + '$'\ntok('TILDELOOSE')\nsrc[t.TILDELOOSE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ntok('LONECARET')\nsrc[t.LONECARET] = '(?:\\\\^)'\n\ntok('CARETTRIM')\nsrc[t.CARETTRIM] = '(\\\\s*)' + src[t.LONECARET] + '\\\\s+'\nre[t.CARETTRIM] = new RegExp(src[t.CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\ntok('CARET')\nsrc[t.CARET] = '^' + src[t.LONECARET] + src[t.XRANGEPLAIN] + '$'\ntok('CARETLOOSE')\nsrc[t.CARETLOOSE] = '^' + src[t.LONECARET] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ntok('COMPARATORLOOSE')\nsrc[t.COMPARATORLOOSE] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.LOOSEPLAIN] + ')$|^$'\ntok('COMPARATOR')\nsrc[t.COMPARATOR] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.FULLPLAIN] + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ntok('COMPARATORTRIM')\nsrc[t.COMPARATORTRIM] = '(\\\\s*)' + src[t.GTLT] +\n                      '\\\\s*(' + src[t.LOOSEPLAIN] + '|' + src[t.XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[t.COMPARATORTRIM] = new RegExp(src[t.COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ntok('HYPHENRANGE')\nsrc[t.HYPHENRANGE] = '^\\\\s*(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\ntok('HYPHENRANGELOOSE')\nsrc[t.HYPHENRANGELOOSE] = '^\\\\s*(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\ntok('STAR')\nsrc[t.STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[t.LOOSE] : re[t.FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\nSemVer.prototype.compareBuild = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  var i = 0\n  do {\n    var a = this.build[i]\n    var b = other.build[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.compareBuild = compareBuild\nfunction compareBuild (a, b, loose) {\n  var versionA = new SemVer(a, loose)\n  var versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(b, a, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1] !== undefined ? m[1] : ''\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY || version === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    if (this.value === '') {\n      return true\n    }\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    if (comp.value === '') {\n      return true\n    }\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[t.COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return (\n      isSatisfiable(thisComparators, options) &&\n      range.set.some(function (rangeComparators) {\n        return (\n          isSatisfiable(rangeComparators, options) &&\n          thisComparators.every(function (thisComparator) {\n            return rangeComparators.every(function (rangeComparator) {\n              return thisComparator.intersects(rangeComparator, options)\n            })\n          })\n        )\n      })\n    )\n  })\n}\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nfunction isSatisfiable (comparators, options) {\n  var result = true\n  var remainingComparators = comparators.slice()\n  var testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every(function (otherComparator) {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p + pr\n    } else if (xm) {\n      ret = '>=' + M + '.0.0' + pr + ' <' + (+M + 1) + '.0.0' + pr\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0' + pr +\n        ' <' + M + '.' + (+m + 1) + '.0' + pr\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version, options) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  var match = null\n  if (!options.rtl) {\n    match = version.match(re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    var next\n    while ((next = re[t.COERCERTL].exec(version)) &&\n      (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n          next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    re[t.COERCERTL].lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  return parse(match[2] +\n    '.' + (match[3] || '0') +\n    '.' + (match[4] || '0'), options)\n}\n","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tforceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = 1;\n}\n\nif ('FORCE_COLOR' in env) {\n\tif (env.FORCE_COLOR === 'true') {\n\t\tforceColor = 1;\n\t} else if (env.FORCE_COLOR === 'false') {\n\t\tforceColor = 0;\n\t} else {\n\t\tforceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, streamIsTTY) {\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream, stream && stream.isTTY);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: translateLevel(supportsColor(true, tty.isatty(1))),\n\tstderr: translateLevel(supportsColor(true, tty.isatty(2)))\n};\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar protocol2code;\r\n(function (protocol2code) {\r\n    function asCallHierarchyItem(converter, item) {\r\n        if (item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new vscode_1.CallHierarchyItem(converter.asSymbolKind(item.kind), item.name, item.detail || '', converter.asUri(item.uri), converter.asRange(item.range), converter.asRange(item.selectionRange));\r\n        if (item.tags !== undefined) {\r\n            result.tags = converter.asSymbolTags(item.tags);\r\n        }\r\n        return result;\r\n    }\r\n    protocol2code.asCallHierarchyItem = asCallHierarchyItem;\r\n    function asCallHierarchyItems(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        let result = items.map(item => asCallHierarchyItem(converter, item));\r\n        return result[0];\r\n    }\r\n    protocol2code.asCallHierarchyItems = asCallHierarchyItems;\r\n    function asCallHierarchyIncomingCall(converter, item) {\r\n        return new vscode_1.CallHierarchyIncomingCall(asCallHierarchyItem(converter, item.from), converter.asRanges(item.fromRanges));\r\n    }\r\n    protocol2code.asCallHierarchyIncomingCall = asCallHierarchyIncomingCall;\r\n    function asCallHierarchyIncomingCalls(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(item => asCallHierarchyIncomingCall(converter, item));\r\n    }\r\n    protocol2code.asCallHierarchyIncomingCalls = asCallHierarchyIncomingCalls;\r\n    function asCallHierarchyOutgoingCall(converter, item) {\r\n        return new vscode_1.CallHierarchyOutgoingCall(asCallHierarchyItem(converter, item.to), converter.asRanges(item.fromRanges));\r\n    }\r\n    protocol2code.asCallHierarchyOutgoingCall = asCallHierarchyOutgoingCall;\r\n    function asCallHierarchyOutgoingCalls(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(item => asCallHierarchyOutgoingCall(converter, item));\r\n    }\r\n    protocol2code.asCallHierarchyOutgoingCalls = asCallHierarchyOutgoingCalls;\r\n})(protocol2code || (protocol2code = {}));\r\nvar code2protocol;\r\n(function (code2protocol) {\r\n    function asCallHierarchyItem(converter, value) {\r\n        const result = {\r\n            name: value.name,\r\n            kind: converter.asSymbolKind(value.kind),\r\n            uri: converter.asUri(value.uri),\r\n            range: converter.asRange(value.range),\r\n            selectionRange: converter.asRange(value.selectionRange)\r\n        };\r\n        if (value.detail !== undefined && value.detail.length > 0) {\r\n            result.detail = value.detail;\r\n        }\r\n        if (value.tags !== undefined) {\r\n            result.tags = converter.asSymbolTags(value.tags);\r\n        }\r\n        return result;\r\n    }\r\n    code2protocol.asCallHierarchyItem = asCallHierarchyItem;\r\n})(code2protocol || (code2protocol = {}));\r\nclass CallHierarchyProvider {\r\n    constructor(client) {\r\n        this.client = client;\r\n        this.middleware = client.clientOptions.middleware;\r\n    }\r\n    prepareCallHierarchy(document, position, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const prepareCallHierarchy = (document, position, token) => {\r\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyItems(this.client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.prepareCallHierarchy\r\n            ? middleware.prepareCallHierarchy(document, position, token, prepareCallHierarchy)\r\n            : prepareCallHierarchy(document, position, token);\r\n    }\r\n    provideCallHierarchyIncomingCalls(item, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const provideCallHierarchyIncomingCalls = (item, token) => {\r\n            const params = {\r\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyIncomingCalls(client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.provideCallHierarchyIncomingCalls\r\n            ? middleware.provideCallHierarchyIncomingCalls(item, token, provideCallHierarchyIncomingCalls)\r\n            : provideCallHierarchyIncomingCalls(item, token);\r\n    }\r\n    provideCallHierarchyOutgoingCalls(item, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const provideCallHierarchyOutgoingCalls = (item, token) => {\r\n            const params = {\r\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyOutgoingCalls(client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.provideCallHierarchyOutgingCalls\r\n            ? middleware.provideCallHierarchyOutgingCalls(item, token, provideCallHierarchyOutgoingCalls)\r\n            : provideCallHierarchyOutgoingCalls(item, token);\r\n    }\r\n}\r\nclass CallHierarchyFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type);\r\n    }\r\n    fillClientCapabilities(cap) {\r\n        const capabilites = cap;\r\n        const capability = ensure(ensure(capabilites, 'textDocument'), 'callHierarchy');\r\n        capability.dynamicRegistration = true;\r\n    }\r\n    initialize(cap, documentSelector) {\r\n        const capabilities = cap;\r\n        const [id, options] = this.getRegistration(documentSelector, capabilities.callHierarchyProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const client = this._client;\r\n        const provider = new CallHierarchyProvider(client);\r\n        return [vscode_1.languages.registerCallHierarchyProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.CallHierarchyFeature = CallHierarchyFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        onProgress: connection.onProgress,\r\n        sendProgress: connection.sendProgress,\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const selector of this._selectors.values()) {\r\n            if (vscode_1.languages.match(selector, document)) {\r\n                return {\r\n                    send: (data) => {\r\n                        this.callback(data);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, document)) {\r\n                return {\r\n                    send: (event) => {\r\n                        this.callback(event);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((value) => {\r\n            value.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getRegistration(documentSelector, capability) {\r\n        if (!capability) {\r\n            return [undefined, undefined];\r\n        }\r\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\r\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\r\n            const selector = capability.documentSelector || documentSelector;\r\n            if (selector) {\r\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\r\n            }\r\n        }\r\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\r\n            if (!documentSelector) {\r\n                return [undefined, undefined];\r\n            }\r\n            let options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n            return [UUID.generateUuid(), options];\r\n        }\r\n        return [undefined, undefined];\r\n    }\r\n    getRegistrationOptions(documentSelector, capability) {\r\n        if (!documentSelector || !capability) {\r\n            return undefined;\r\n        }\r\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n    }\r\n    getProvider(textDocument) {\r\n        for (const registration of this._registrations.values()) {\r\n            let selector = registration.data.registerOptions.documentSelector;\r\n            if (selector !== null && vscode_1.languages.match(selector, textDocument)) {\r\n                return registration.provider;\r\n            }\r\n        }\r\n        throw new Error(`The feature has no registration for the provided text document ${textDocument.uri.toString()}`);\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        const registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((registration) => {\r\n            registration.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getProviders() {\r\n        const result = [];\r\n        for (const registration of this._registrations.values()) {\r\n            result.push(registration.provider);\r\n        }\r\n        return result;\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true,\r\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] }\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const triggerCharacters = options.triggerCharacters || [];\r\n        const provider = {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const middleware = this._client.clientOptions.middleware;\r\n                const provideCompletionItems = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    const client = this._client;\r\n                    const middleware = this._client.clientOptions.middleware;\r\n                    const resolveCompletionItem = (item, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                            return Promise.resolve(item);\r\n                        });\r\n                    };\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCompletionItemProvider(options.documentSelector, provider, ...triggerCharacters), provider];\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideHover: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideHover = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerHoverProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n        config.contextSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideSignatureHelp: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const providerSignatureHelp = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, context, token);\r\n            }\r\n        };\r\n        let disposable;\r\n        if (options.retriggerCharacters === undefined) {\r\n            const triggerCharacters = options.triggerCharacters || [];\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, ...triggerCharacters);\r\n        }\r\n        else {\r\n            const metaData = {\r\n                triggerCharacters: options.triggerCharacters || [],\r\n                retriggerCharacters: options.retriggerCharacters || []\r\n            };\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, metaData);\r\n        }\r\n        return [disposable, provider];\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideReferences: (document, position, options, token) => {\r\n                const client = this._client;\r\n                const _providerReferences = (document, position, options, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\r\n                    : _providerReferences(document, position, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerReferenceProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentHighlights = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\r\n                    : _provideDocumentHighlights(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentSymbols: (document, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentSymbols = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                        if (data === null) {\r\n                            return undefined;\r\n                        }\r\n                        if (data.length === 0) {\r\n                            return [];\r\n                        }\r\n                        else {\r\n                            let element = data[0];\r\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                                return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                            }\r\n                            else {\r\n                                return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                            }\r\n                        }\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\r\n                    : _provideDocumentSymbols(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        const provider = {\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                const client = this._client;\r\n                const provideWorkspaceSymbols = (query, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.isPreferredSupport = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                const client = this._client;\r\n                const _provideCodeActions = (document, range, context, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                        if (values === null) {\r\n                            return undefined;\r\n                        }\r\n                        const result = [];\r\n                        for (let item of values) {\r\n                            if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                                result.push(client.protocol2CodeConverter.asCommand(item));\r\n                            }\r\n                            else {\r\n                                result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                            }\r\n                        }\r\n                        return result;\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\r\n                    : _provideCodeActions(document, range, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerCodeActionsProvider(options.documentSelector, provider, (options.codeActionKinds\r\n                ? { providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n                : undefined)), provider];\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeLenses: (document, token) => {\r\n                const client = this._client;\r\n                const provideCodeLenses = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    const client = this._client;\r\n                    const resolveCodeLens = (codeLens, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                            return codeLens;\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCodeLensProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentFormattingEdits = (document, options, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                let middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                const client = this._client;\r\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        ch: ch,\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        };\r\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                const client = this._client;\r\n                const provideRenameEdits = (document, position, newName, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        newName: newName\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                        return Promise.reject(new Error(error.message));\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    const client = this._client;\r\n                    const prepareRename = (document, position, token) => {\r\n                        let params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            position: client.code2ProtocolConverter.asPosition(position),\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                                return client.protocol2CodeConverter.asRange(result);\r\n                            }\r\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\r\n                                return {\r\n                                    range: client.protocol2CodeConverter.asRange(result.range),\r\n                                    placeholder: result.placeholder\r\n                                };\r\n                            }\r\n                            // To cancel the rename vscode API expects a rejected promise.\r\n                            return Promise.reject(new Error(`The element can't be renamed.`));\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                            return Promise.reject(new Error(error.message));\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerRenameProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const documentLinkCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentLink');\r\n        documentLinkCapabilities.dynamicRegistration = true;\r\n        documentLinkCapabilities.tooltipSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentLinks: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentLinks = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    const client = this._client;\r\n                    let resolveDocumentLink = (link, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                            return Promise.resolve(link);\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        const client = this._client;\r\n        const middleware = client.clientOptions.middleware;\r\n        const executeCommand = (command, args) => {\r\n            let params = {\r\n                command,\r\n                arguments: args\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n            });\r\n        };\r\n        if (data.registerOptions.commands) {\r\n            const disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    return middleware.executeCommand\r\n                        ? middleware.executeCommand(command, args, executeCommand)\r\n                        : executeCommand(command, args);\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onProgress(type, token, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            return this._resolvedConnection.onProgress(type, token, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering progress handler for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendProgress(type, token, value) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendProgress(type, token, value);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending progress for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get traceOutputChannel() {\r\n        if (this._traceOutputChannel) {\r\n            return this._traceOutputChannel;\r\n        }\r\n        return this.outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    warn(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    error(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    showNotificationMessage() {\r\n        vscode_1.window.showInformationMessage('A request has failed. See the output for more information.', 'Go to output').then(() => {\r\n            this.outputChannel.show(true);\r\n        });\r\n    }\r\n    logTrace(message, data) {\r\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message, undefined, false);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            clientInfo: {\r\n                name: 'vscode',\r\n                version: vscode_1.version\r\n            },\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        if (this._clientOptions.progressOnInitialization) {\r\n            const token = UUID.generateUuid();\r\n            const part = new progressPart_1.ProgressPart(connection, token);\r\n            initParams.workDoneToken = token;\r\n            return this.doInitialize(connection, initParams).then((result) => {\r\n                part.done();\r\n                return result;\r\n            }, (error) => {\r\n                part.cancel();\r\n                throw error;\r\n            });\r\n        }\r\n        else {\r\n            return this.doInitialize(connection, initParams);\r\n        }\r\n    }\r\n    doInitialize(connection, initParams) {\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n            throw error;\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp(false);\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this.cleanUpChannel();\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel) {\r\n            this.cleanUpChannel();\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    cleanUpChannel() {\r\n        if (this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        var _a, _b;\r\n        const client = this;\r\n        function didChangeWatchedFile(event) {\r\n            client._fileEvents.push(event);\r\n            client._fileEventDelayer.trigger(() => {\r\n                client.onReady().then(() => {\r\n                    client.resolveConnection().then(connection => {\r\n                        if (client.isConnectionActive()) {\r\n                            client.forceDocumentSync();\r\n                            connection.didChangeWatchedFiles({ changes: client._fileEvents });\r\n                        }\r\n                        client._fileEvents = [];\r\n                    });\r\n                }, (error) => {\r\n                    client.error(`Notify file events failed.`, error);\r\n                });\r\n            });\r\n        }\r\n        const workSpaceMiddleware = (_a = this.clientOptions.middleware) === null || _a === void 0 ? void 0 : _a.workspace;\r\n        ((_b = workSpaceMiddleware) === null || _b === void 0 ? void 0 : _b.didChangeWatchedFile) ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event);\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware;\r\n        if (middleware.handleDiagnostics) {\r\n            middleware.handleDiagnostics(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    getFeature(request) {\r\n        return this._dynamicFeatures.get(request);\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        let diagnostics = ensure(ensure(result, 'textDocument'), 'publishDiagnostics');\r\n        diagnostics.relatedInformation = true;\r\n        diagnostics.versionSupport = false;\r\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return Is.asPromise(vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; }));\r\n    }\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel or a content modified don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && (error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled || error.code === vscode_languageserver_protocol_1.ErrorCodes.ContentModified)) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asCompletionTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asSignatureHelpTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.SignatureHelpTriggerKind.Invoke:\r\n                return proto.SignatureHelpTriggerKind.Invoked;\r\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\r\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\r\n            case code.SignatureHelpTriggerKind.ContentChange:\r\n                return proto.SignatureHelpTriggerKind.ContentChange;\r\n        }\r\n    }\r\n    function asParameterInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label\r\n        };\r\n    }\r\n    function asParameterInformations(values) {\r\n        return values.map(asParameterInformation);\r\n    }\r\n    function asSignatureInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label,\r\n            parameters: asParameterInformations(value.parameters)\r\n        };\r\n    }\r\n    function asSignatureInformations(values) {\r\n        return values.map(asSignatureInformation);\r\n    }\r\n    function asSignatureHelp(value) {\r\n        if (value === undefined) {\r\n            return value;\r\n        }\r\n        return {\r\n            signatures: asSignatureInformations(value.signatures),\r\n            activeSignature: value.activeSignature,\r\n            activeParameter: value.activeParameter\r\n        };\r\n    }\r\n    function asSignatureHelpParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                isRetrigger: context.isRetrigger,\r\n                triggerCharacter: context.triggerCharacter,\r\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\r\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asPositions(value) {\r\n        let result = [];\r\n        for (let elem of value) {\r\n            result.push(asPosition(elem));\r\n        }\r\n        return result;\r\n    }\r\n    function isInsertReplace(value) {\r\n        const candidate = value;\r\n        return candidate && !!candidate.inserting && !!candidate.replacing;\r\n    }\r\n    function asRange(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        // The LSP has no support yet for insert replace. So this can never happen.\r\n        if (isInsertReplace(value)) {\r\n            throw new Error(`Receving unknown insert replace range.`);\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asLocation(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case code.DiagnosticTag.Unnecessary:\r\n                return proto.DiagnosticTag.Unnecessary;\r\n            case code.DiagnosticTag.Deprecated:\r\n                return proto.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asRelatedInformation(item) {\r\n        return {\r\n            message: item.message,\r\n            location: asLocation(item.location)\r\n        };\r\n    }\r\n    function asRelatedInformations(items) {\r\n        return items.map(asRelatedInformation);\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (Array.isArray(item.tags)) {\r\n            result.tags = asDiagnosticTags(item.tags);\r\n        }\r\n        if (item.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === undefined || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case code.CompletionItemTag.Deprecated:\r\n                return proto.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined) {\r\n            return tags;\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== undefined) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        const tags = asCompletionItemTags(item.tags);\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== undefined) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\r\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\r\n                    if (index !== -1) {\r\n                        tags.splice(index, 1);\r\n                    }\r\n                }\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        if (tags !== undefined && tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text = undefined;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text !== undefined && range !== undefined) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === undefined || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= code.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return (item + 1);\r\n        }\r\n        return proto.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(item) {\r\n        return item;\r\n    }\r\n    function asSymbolTags(items) {\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === undefined || context === null) {\r\n            return context;\r\n        }\r\n        let only;\r\n        if (context.only && Is.string(context.only.value)) {\r\n            only = [context.only.value];\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), only);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        if (item.tooltip !== undefined) {\r\n            result.tooltip = item.tooltip;\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asSignatureHelpParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asPositions,\r\n        asLocation,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideColorPresentations: (color, context, token) => {\r\n                const client = this._client;\r\n                const provideColorPresentations = (color, context, token) => {\r\n                    const requestParams = {\r\n                        color,\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                        range: client.code2ProtocolConverter.asRange(context.range)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentColors = (document, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerColorProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDeclaration: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDeclaration = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDeclarationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideFoldingRanges: (document, context, token) => {\r\n                const client = this._client;\r\n                const provideFoldingRanges = (document, _, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideImplementation: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideImplementation = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerImplementationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst SemVer = require(\"semver\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst colorProvider_1 = require(\"./colorProvider\");\r\nconst configuration_1 = require(\"./configuration\");\r\nconst implementation_1 = require(\"./implementation\");\r\nconst typeDefinition_1 = require(\"./typeDefinition\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst foldingRange_1 = require(\"./foldingRange\");\r\nconst declaration_1 = require(\"./declaration\");\r\nconst selectionRange_1 = require(\"./selectionRange\");\r\nconst progress_1 = require(\"./progress\");\r\nconst callHierarchy_proposed_1 = require(\"./callHierarchy.proposed\");\r\nconst semanticTokens_proposed_1 = require(\"./semanticTokens.proposed\");\r\nconst Is = require(\"./utils/is\");\r\nconst processes_1 = require(\"./utils/processes\");\r\n__export(require(\"./client\"));\r\nconst REQUIRED_VSCODE_VERSION = '^1.41.0'; // do not change format, updated by `updateVSCode` script\r\nvar Executable;\r\n(function (Executable) {\r\n    function is(value) {\r\n        return Is.string(value.command);\r\n    }\r\n    Executable.is = is;\r\n})(Executable || (Executable = {}));\r\nvar TransportKind;\r\n(function (TransportKind) {\r\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\r\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\r\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\r\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\r\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\r\nvar Transport;\r\n(function (Transport) {\r\n    function isSocket(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\r\n    }\r\n    Transport.isSocket = isSocket;\r\n})(Transport || (Transport = {}));\r\nvar NodeModule;\r\n(function (NodeModule) {\r\n    function is(value) {\r\n        return Is.string(value.module);\r\n    }\r\n    NodeModule.is = is;\r\n})(NodeModule || (NodeModule = {}));\r\nvar StreamInfo;\r\n(function (StreamInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\r\n    }\r\n    StreamInfo.is = is;\r\n})(StreamInfo || (StreamInfo = {}));\r\nvar ChildProcessInfo;\r\n(function (ChildProcessInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\r\n    }\r\n    ChildProcessInfo.is = is;\r\n})(ChildProcessInfo || (ChildProcessInfo = {}));\r\nclass LanguageClient extends client_1.BaseLanguageClient {\r\n    constructor(arg1, arg2, arg3, arg4, arg5) {\r\n        let id;\r\n        let name;\r\n        let serverOptions;\r\n        let clientOptions;\r\n        let forceDebug;\r\n        if (Is.string(arg2)) {\r\n            id = arg1;\r\n            name = arg2;\r\n            serverOptions = arg3;\r\n            clientOptions = arg4;\r\n            forceDebug = !!arg5;\r\n        }\r\n        else {\r\n            id = arg1.toLowerCase();\r\n            name = arg1;\r\n            serverOptions = arg2;\r\n            clientOptions = arg3;\r\n            forceDebug = arg4;\r\n        }\r\n        if (forceDebug === void 0) {\r\n            forceDebug = false;\r\n        }\r\n        super(id, name, clientOptions);\r\n        this._serverOptions = serverOptions;\r\n        this._forceDebug = forceDebug;\r\n        try {\r\n            this.checkVersion();\r\n        }\r\n        catch (error) {\r\n            if (Is.string(error.message)) {\r\n                this.outputChannel.appendLine(error.message);\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    checkVersion() {\r\n        let codeVersion = SemVer.parse(vscode_1.version);\r\n        if (!codeVersion) {\r\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\r\n        }\r\n        // Remove the insider pre-release since we stay API compatible.\r\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\r\n            codeVersion.prerelease = [];\r\n        }\r\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\r\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\r\n        }\r\n    }\r\n    stop() {\r\n        return super.stop().then(() => {\r\n            if (this._serverProcess) {\r\n                let toCheck = this._serverProcess;\r\n                this._serverProcess = undefined;\r\n                if (this._isDetached === void 0 || !this._isDetached) {\r\n                    this.checkProcessDied(toCheck);\r\n                }\r\n                this._isDetached = undefined;\r\n            }\r\n        });\r\n    }\r\n    checkProcessDied(childProcess) {\r\n        if (!childProcess) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            // Test if the process is still alive. Throws an exception if not\r\n            try {\r\n                process.kill(childProcess.pid, 0);\r\n                processes_1.terminate(childProcess);\r\n            }\r\n            catch (error) {\r\n                // All is fine.\r\n            }\r\n        }, 2000);\r\n    }\r\n    handleConnectionClosed() {\r\n        this._serverProcess = undefined;\r\n        super.handleConnectionClosed();\r\n    }\r\n    createMessageTransports(encoding) {\r\n        function getEnvironment(env, fork) {\r\n            if (!env && !fork) {\r\n                return undefined;\r\n            }\r\n            let result = Object.create(null);\r\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\r\n            if (fork) {\r\n                result['ELECTRON_RUN_AS_NODE'] = '1';\r\n                result['ELECTRON_NO_ASAR'] = '1';\r\n            }\r\n            if (env) {\r\n                Object.keys(env).forEach(key => result[key] = env[key]);\r\n            }\r\n            return result;\r\n        }\r\n        const debugStartWith = ['--debug=', '--debug-brk=', '--inspect=', '--inspect-brk='];\r\n        const debugEquals = ['--debug', '--debug-brk', '--inspect', '--inspect-brk'];\r\n        function startedInDebugMode() {\r\n            let args = process.execArgv;\r\n            if (args) {\r\n                return args.some((arg) => {\r\n                    return debugStartWith.some(value => arg.startsWith(value)) ||\r\n                        debugEquals.some(value => arg === value);\r\n                });\r\n            }\r\n            return false;\r\n        }\r\n        function assertStdio(process) {\r\n            if (process.stdin === null || process.stdout === null || process.stderr === null) {\r\n                throw new Error('Process created without stdio streams');\r\n            }\r\n        }\r\n        let server = this._serverOptions;\r\n        // We got a function.\r\n        if (Is.func(server)) {\r\n            return server().then((result) => {\r\n                if (client_1.MessageTransports.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return result;\r\n                }\r\n                else if (StreamInfo.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\r\n                }\r\n                else {\r\n                    let cp;\r\n                    if (ChildProcessInfo.is(result)) {\r\n                        cp = result.process;\r\n                        this._isDetached = result.detached;\r\n                    }\r\n                    else {\r\n                        cp = result;\r\n                        this._isDetached = false;\r\n                    }\r\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\r\n                }\r\n            });\r\n        }\r\n        let json;\r\n        let runDebug = server;\r\n        if (runDebug.run || runDebug.debug) {\r\n            if (this._forceDebug || startedInDebugMode()) {\r\n                json = runDebug.debug;\r\n            }\r\n            else {\r\n                json = runDebug.run;\r\n            }\r\n        }\r\n        else {\r\n            json = server;\r\n        }\r\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\r\n            if (NodeModule.is(json) && json.module) {\r\n                let node = json;\r\n                let transport = node.transport || TransportKind.stdio;\r\n                if (node.runtime) {\r\n                    let args = [];\r\n                    let options = node.options || Object.create(null);\r\n                    if (options.execArgv) {\r\n                        options.execArgv.forEach(element => args.push(element));\r\n                    }\r\n                    args.push(node.module);\r\n                    if (node.args) {\r\n                        node.args.forEach(element => args.push(element));\r\n                    }\r\n                    let execOptions = Object.create(null);\r\n                    execOptions.cwd = serverWorkingDir;\r\n                    execOptions.env = getEnvironment(options.env, false);\r\n                    let pipeName = undefined;\r\n                    if (transport === TransportKind.ipc) {\r\n                        // exec options not correctly typed in lib\r\n                        execOptions.stdio = [null, null, null, 'ipc'];\r\n                        args.push('--node-ipc');\r\n                    }\r\n                    else if (transport === TransportKind.stdio) {\r\n                        args.push('--stdio');\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                        args.push(`--pipe=${pipeName}`);\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        args.push(`--socket=${transport.port}`);\r\n                    }\r\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\r\n                        if (!serverProcess || !serverProcess.pid) {\r\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                        }\r\n                        this._serverProcess = serverProcess;\r\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                        if (transport === TransportKind.ipc) {\r\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\r\n                        }\r\n                        else {\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n                        }\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    let pipeName = undefined;\r\n                    return new Promise((resolve, _reject) => {\r\n                        let args = node.args && node.args.slice() || [];\r\n                        if (transport === TransportKind.ipc) {\r\n                            args.push('--node-ipc');\r\n                        }\r\n                        else if (transport === TransportKind.stdio) {\r\n                            args.push('--stdio');\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                            args.push(`--pipe=${pipeName}`);\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            args.push(`--socket=${transport.port}`);\r\n                        }\r\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                        let options = node.options || Object.create(null);\r\n                        options.env = getEnvironment(options.env, true);\r\n                        options.execArgv = options.execArgv || [];\r\n                        options.cwd = serverWorkingDir;\r\n                        options.silent = true;\r\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                            let sp = cp.fork(node.module, args || [], options);\r\n                            assertStdio(sp);\r\n                            this._serverProcess = sp;\r\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            if (transport === TransportKind.ipc) {\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\r\n                            }\r\n                            else {\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\r\n                            }\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                assertStdio(sp);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                assertStdio(sp);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (Executable.is(json) && json.command) {\r\n                let command = json;\r\n                let args = command.args || [];\r\n                let options = Object.assign({}, command.options);\r\n                options.cwd = options.cwd || serverWorkingDir;\r\n                let serverProcess = cp.spawn(command.command, args, options);\r\n                if (!serverProcess || !serverProcess.pid) {\r\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\r\n                }\r\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                this._serverProcess = serverProcess;\r\n                this._isDetached = !!options.detached;\r\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n            }\r\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\r\n        });\r\n    }\r\n    registerProposedFeatures() {\r\n        this.registerFeatures(ProposedFeatures.createAll(this));\r\n    }\r\n    registerBuiltinFeatures() {\r\n        super.registerBuiltinFeatures();\r\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\r\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\r\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\r\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\r\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\r\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\r\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\r\n        this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));\r\n        this.registerFeature(new progress_1.ProgressFeature(this));\r\n    }\r\n    _mainGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    _getServerWorkingDir(options) {\r\n        let cwd = options && options.cwd;\r\n        if (!cwd) {\r\n            cwd = this.clientOptions.workspaceFolder\r\n                ? this.clientOptions.workspaceFolder.uri.fsPath\r\n                : this._mainGetRootPath();\r\n        }\r\n        if (cwd) {\r\n            // make sure the folder exists otherwise creating the process will fail\r\n            return new Promise(s => {\r\n                fs.lstat(cwd, (err, stats) => {\r\n                    s(!err && stats.isDirectory() ? cwd : undefined);\r\n                });\r\n            });\r\n        }\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\nexports.LanguageClient = LanguageClient;\r\nclass SettingMonitor {\r\n    constructor(_client, _setting) {\r\n        this._client = _client;\r\n        this._setting = _setting;\r\n        this._listeners = [];\r\n    }\r\n    start() {\r\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\r\n        this.onDidChangeConfiguration();\r\n        return new vscode_1.Disposable(() => {\r\n            if (this._client.needsStop()) {\r\n                this._client.stop();\r\n            }\r\n        });\r\n    }\r\n    onDidChangeConfiguration() {\r\n        let index = this._setting.indexOf('.');\r\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\r\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\r\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\r\n        if (enabled && this._client.needsStart()) {\r\n            this._client.start();\r\n        }\r\n        else if (!enabled && this._client.needsStop()) {\r\n            this._client.stop();\r\n        }\r\n    }\r\n}\r\nexports.SettingMonitor = SettingMonitor;\r\n// Exporting proposed protocol.\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    function createAll(client) {\r\n        let result = [\r\n            new callHierarchy_proposed_1.CallHierarchyFeature(client),\r\n            new semanticTokens_proposed_1.SemanticTokensFeature(client)\r\n        ];\r\n        return result;\r\n    }\r\n    ProposedFeatures.createAll = createAll;\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = Object.create(null);\r\n    }\r\n    return target[key];\r\n}\r\nclass ProgressFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(capabilities, 'window').workDoneProgress = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        let createHandler = (params) => {\r\n            new progressPart_1.ProgressPart(this._client, params.token);\r\n        };\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, createHandler);\r\n    }\r\n}\r\nexports.ProgressFeature = ProgressFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nclass ProgressPart {\r\n    constructor(_client, _token) {\r\n        this._client = _client;\r\n        this._token = _token;\r\n        this._reported = 0;\r\n        this._disposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\r\n            switch (value.kind) {\r\n                case 'begin':\r\n                    this.begin(value);\r\n                    break;\r\n                case 'report':\r\n                    this.report(value);\r\n                    break;\r\n                case 'end':\r\n                    this.done();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    begin(params) {\r\n        let location = params.cancellable ? vscode_1.ProgressLocation.Notification : vscode_1.ProgressLocation.Window;\r\n        vscode_1.window.withProgress({ location, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\r\n            this._progress = progress;\r\n            this._infinite = params.percentage === undefined;\r\n            this._cancellationToken = cancellationToken;\r\n            this._cancellationToken.onCancellationRequested(() => {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\r\n            });\r\n            this.report(params);\r\n            return new Promise((resolve, reject) => {\r\n                this._resolve = resolve;\r\n                this._reject = reject;\r\n            });\r\n        });\r\n    }\r\n    report(params) {\r\n        if (this._infinite && Is.string(params.message)) {\r\n            this._progress.report({ message: params.message });\r\n        }\r\n        else if (Is.number(params.percentage)) {\r\n            let percentage = Math.max(0, Math.min(params.percentage, 100));\r\n            let delta = Math.max(0, percentage - this._reported);\r\n            this._progress.report({ message: params.message, increment: delta });\r\n            this._reported += delta;\r\n        }\r\n    }\r\n    cancel() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._reject) {\r\n            this._reject();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n    done() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._resolve) {\r\n            this._resolve();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n}\r\nexports.ProgressPart = ProgressPart;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        if (Array.isArray(diagnostic.tags)) {\r\n            result.tags = asDiagnosticTags(diagnostic.tags);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case ls.DiagnosticTag.Unnecessary:\r\n                return code.DiagnosticTag.Unnecessary;\r\n            case ls.DiagnosticTag.Deprecated:\r\n                return code.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asRanges(value) {\r\n        return value.map(value => asRange(value));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === undefined || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case ls.CompletionItemTag.Deprecated:\r\n                return code.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined || tags === null) {\r\n            return [];\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let tags = asCompletionItemTags(item.tags);\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n            if (item.deprecated === true) {\r\n                tags.push(code.CompletionItemTag.Deprecated);\r\n            }\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== undefined) {\r\n            result.data = item.data;\r\n        }\r\n        if (tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n        if (!result.targetSelectionRange) {\r\n            throw new Error(`targetSelectionRange must not be undefined or null`);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(value) {\r\n        return value;\r\n    }\r\n    function asSymbolTags(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === undefined || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== undefined && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== undefined) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.isPreferred !== undefined) {\r\n            result.isPreferred = item.isPreferred;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.tooltip !== undefined) {\r\n            link.tooltip = item.tooltip;\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asSelectionRange(selectionRange) {\r\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\r\n    }\r\n    function asSelectionRanges(selectionRanges) {\r\n        if (!Array.isArray(selectionRanges)) {\r\n            return [];\r\n        }\r\n        let result = [];\r\n        for (let range of selectionRanges) {\r\n            result.push(asSelectionRange(range));\r\n        }\r\n        return result;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asRanges,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations,\r\n        asSelectionRange,\r\n        asSelectionRanges\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = Object.create(null);\r\n    }\r\n    return target[key];\r\n}\r\nclass SelectionRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'selectionRange');\r\n        capability.dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.selectionRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideSelectionRanges: (document, positions, token) => {\r\n                const client = this._client;\r\n                const provideSelectionRanges = (document, positions, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        positions: client.code2ProtocolConverter.asPositions(positions)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => client.protocol2CodeConverter.asSelectionRanges(ranges), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideSelectionRanges\r\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\r\n                    : provideSelectionRanges(document, positions, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerSelectionRangeProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.SelectionRangeFeature = SelectionRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode = require(\"vscode\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar protocol2code;\r\n(function (protocol2code) {\r\n    function asSemanticTokens(value) {\r\n        if (value === undefined || value === null) {\r\n            return undefined;\r\n        }\r\n        return new vscode.SemanticTokens(new Uint32Array(value.data), value.resultId);\r\n    }\r\n    protocol2code.asSemanticTokens = asSemanticTokens;\r\n    function asSemanticTokensEdit(value) {\r\n        return new vscode.SemanticTokensEdit(value.start, value.deleteCount, value.data !== undefined ? new Uint32Array(value.data) : undefined);\r\n    }\r\n    protocol2code.asSemanticTokensEdit = asSemanticTokensEdit;\r\n    function asSemanticTokensEdits(value) {\r\n        if (value === undefined || value === null) {\r\n            return undefined;\r\n        }\r\n        return new vscode.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit), value.resultId);\r\n    }\r\n    protocol2code.asSemanticTokensEdits = asSemanticTokensEdits;\r\n    function asLegend(value) {\r\n        return value;\r\n    }\r\n    protocol2code.asLegend = asLegend;\r\n})(protocol2code || (protocol2code = {}));\r\nclass SemanticTokensFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type);\r\n    }\r\n    fillClientCapabilities(cap) {\r\n        const capabilites = cap;\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'semanticTokens');\r\n        capability.dynamicRegistration = true;\r\n        capability.tokenTypes = [\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.comment,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.keyword,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.number,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.regexp,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.operator,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.namespace,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.type,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.struct,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.class,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.interface,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.enum,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.typeParameter,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.function,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.member,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.macro,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.variable,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.parameter,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.property,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.label\r\n        ];\r\n        capability.tokenModifiers = [\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.declaration,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.documentation,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.static,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.abstract,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.deprecated,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.async,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.readonly\r\n        ];\r\n    }\r\n    initialize(cap, documentSelector) {\r\n        const capabilities = cap;\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.semanticTokensProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const hasEditProvider = options.documentProvider !== undefined && typeof options.documentProvider !== 'boolean' && options.documentProvider.edits === true;\r\n        const documentProvider = {\r\n            provideDocumentSemanticTokens: (document, token) => {\r\n                const client = this._client;\r\n                const middleware = client.clientOptions.middleware;\r\n                const provideDocumentSemanticTokens = (document, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, params, token).then((result) => {\r\n                        return protocol2code.asSemanticTokens(result);\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, error);\r\n                        return undefined;\r\n                    });\r\n                };\r\n                return middleware.provideDocumentSemanticTokens\r\n                    ? middleware.provideDocumentSemanticTokens(document, token, provideDocumentSemanticTokens)\r\n                    : provideDocumentSemanticTokens(document, token);\r\n            },\r\n            provideDocumentSemanticTokensEdits: hasEditProvider\r\n                ? (document, previousResultId, token) => {\r\n                    const client = this._client;\r\n                    const middleware = client.clientOptions.middleware;\r\n                    const provideDocumentSemanticTokensEdits = (document, previousResultId, token) => {\r\n                        const params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            previousResultId\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, params, token).then((result) => {\r\n                            if (vscode_languageserver_protocol_1.Proposed.SemanticTokens.is(result)) {\r\n                                return protocol2code.asSemanticTokens(result);\r\n                            }\r\n                            else {\r\n                                return protocol2code.asSemanticTokensEdits(result);\r\n                            }\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, error);\r\n                            return undefined;\r\n                        });\r\n                    };\r\n                    return middleware.provideDocumentSemanticTokensEdits\r\n                        ? middleware.provideDocumentSemanticTokensEdits(document, previousResultId, token, provideDocumentSemanticTokensEdits)\r\n                        : provideDocumentSemanticTokensEdits(document, previousResultId, token);\r\n                }\r\n                : undefined\r\n        };\r\n        const hasRangeProvider = options.rangeProvider === true;\r\n        const rangeProvider = hasRangeProvider\r\n            ? {\r\n                provideDocumentRangeSemanticTokens: (document, range, token) => {\r\n                    const client = this._client;\r\n                    const middleware = client.clientOptions.middleware;\r\n                    const provideDocumentRangeSemanticTokens = (document, range, token) => {\r\n                        const params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            range: client.code2ProtocolConverter.asRange(range)\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, params, token).then((result) => {\r\n                            return protocol2code.asSemanticTokens(result);\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, error);\r\n                            return undefined;\r\n                        });\r\n                    };\r\n                    return middleware.provideDocumentRangeSemanticTokens\r\n                        ? middleware.provideDocumentRangeSemanticTokens(document, range, token, provideDocumentRangeSemanticTokens)\r\n                        : provideDocumentRangeSemanticTokens(document, range, token);\r\n                }\r\n            }\r\n            : undefined;\r\n        const disposables = [];\r\n        const legend = protocol2code.asLegend(options.legend);\r\n        disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(options.documentSelector, documentProvider, legend));\r\n        if (rangeProvider !== undefined) {\r\n            disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(options.documentSelector, rangeProvider, legend));\r\n        }\r\n        return [new vscode.Disposable(() => disposables.forEach(item => item.dispose())), { document: documentProvider, range: rangeProvider }];\r\n    }\r\n}\r\nexports.SemanticTokensFeature = SemanticTokensFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideTypeDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\nfunction asPromise(value) {\r\n    if (value instanceof Promise) {\r\n        return value;\r\n    }\r\n    else if (thenable(value)) {\r\n        return new Promise((resolve, reject) => {\r\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\r\n        });\r\n    }\r\n    else {\r\n        return Promise.resolve(value);\r\n    }\r\n}\r\nexports.asPromise = asPromise;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst path_1 = require(\"path\");\r\nconst isWindows = (process.platform === 'win32');\r\nconst isMacintosh = (process.platform === 'darwin');\r\nconst isLinux = (process.platform === 'linux');\r\nfunction terminate(process, cwd) {\r\n    if (isWindows) {\r\n        try {\r\n            // This we run in Atom execFileSync is available.\r\n            // Ignore stderr since this is otherwise piped to parent.stderr\r\n            // which might be already closed.\r\n            let options = {\r\n                stdio: ['pipe', 'pipe', 'ignore']\r\n            };\r\n            if (cwd) {\r\n                options.cwd = cwd;\r\n            }\r\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (isLinux || isMacintosh) {\r\n        try {\r\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\r\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\r\n            return result.error ? false : true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        process.kill('SIGKILL');\r\n        return true;\r\n    }\r\n}\r\nexports.terminate = terminate;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nfunction arrayDiff(left, right) {\r\n    return left.filter(element => right.indexOf(element) < 0);\r\n}\r\nexports.arrayDiff = arrayDiff;\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        this.initializeWithFolders(folders);\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    initializeWithFolders(currentWorkspaceFolders) {\r\n        this._initialFolders = currentWorkspaceFolders;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    sendInitialEvent(currentWorkspaceFolders) {\r\n        if (this._initialFolders && currentWorkspaceFolders) {\r\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\r\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\r\n            if (added.length > 0 || removed.length > 0) {\r\n                this.doSendEvent(added, removed);\r\n            }\r\n        }\r\n        else if (this._initialFolders) {\r\n            this.doSendEvent([], this._initialFolders);\r\n        }\r\n        else if (currentWorkspaceFolders) {\r\n            this.doSendEvent(currentWorkspaceFolders, []);\r\n        }\r\n    }\r\n    doSendEvent(addedFolders, removedFolders) {\r\n        let params = {\r\n            event: {\r\n                added: addedFolders.map(folder => this.asProtocol(folder)),\r\n                removed: removedFolders.map(folder => this.asProtocol(folder))\r\n            }\r\n        };\r\n        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                this.doSendEvent(event.added, event.removed);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst st = require(\"./protocol.sematicTokens.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest.type;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest.type;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\r\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\r\n    Proposed.SemanticTokens = st.SemanticTokens;\r\n    let SemanticTokensRequest;\r\n    (function (SemanticTokensRequest) {\r\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\r\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\r\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\r\n    let SemanticTokensEditsRequest;\r\n    (function (SemanticTokensEditsRequest) {\r\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\r\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\r\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\r\n    let SemanticTokensRangeRequest;\r\n    (function (SemanticTokensRangeRequest) {\r\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\r\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\r\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to result a `CallHierarchyItem` in a document at a given position.\r\n * Can be used as an input to a incoming or outgoing call hierarchy.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\n/**\r\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\n/**\r\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A set of predefined token types. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenTypes;\r\n(function (SemanticTokenTypes) {\r\n    SemanticTokenTypes[\"comment\"] = \"comment\";\r\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\r\n    SemanticTokenTypes[\"string\"] = \"string\";\r\n    SemanticTokenTypes[\"number\"] = \"number\";\r\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\r\n    SemanticTokenTypes[\"operator\"] = \"operator\";\r\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\r\n    SemanticTokenTypes[\"type\"] = \"type\";\r\n    SemanticTokenTypes[\"struct\"] = \"struct\";\r\n    SemanticTokenTypes[\"class\"] = \"class\";\r\n    SemanticTokenTypes[\"interface\"] = \"interface\";\r\n    SemanticTokenTypes[\"enum\"] = \"enum\";\r\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\r\n    SemanticTokenTypes[\"function\"] = \"function\";\r\n    SemanticTokenTypes[\"member\"] = \"member\";\r\n    SemanticTokenTypes[\"property\"] = \"property\";\r\n    SemanticTokenTypes[\"macro\"] = \"macro\";\r\n    SemanticTokenTypes[\"variable\"] = \"variable\";\r\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\r\n    SemanticTokenTypes[\"label\"] = \"label\";\r\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\r\n/**\r\n * A set of predefined token modifiers. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenModifiers;\r\n(function (SemanticTokenModifiers) {\r\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\r\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\r\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\r\n    SemanticTokenModifiers[\"reference\"] = \"reference\";\r\n    SemanticTokenModifiers[\"static\"] = \"static\";\r\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\r\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\r\n    SemanticTokenModifiers[\"async\"] = \"async\";\r\n    SemanticTokenModifiers[\"volatile\"] = \"volatile\";\r\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\r\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokens;\r\n(function (SemanticTokens) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\r\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\r\n    }\r\n    SemanticTokens.is = is;\r\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRequest;\r\n(function (SemanticTokensRequest) {\r\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\r\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\r\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensEditsRequest;\r\n(function (SemanticTokensEditsRequest) {\r\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\r\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\r\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRangeRequest;\r\n(function (SemanticTokensRangeRequest) {\r\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\r\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\r\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","import { Disposable, ExtensionContext, Uri } from \"vscode\";\r\nimport { ClientCapabilities, ServerCapabilities, StaticFeature } from \"vscode-languageclient\";\r\nimport { ExperimentalCapabilities } from \"./protocol.lspx\";\r\nimport { SpecificationLanguageClient } from \"./SpecificationLanguageClient\";\r\n\r\nexport class CombinantorialTestingFeature implements StaticFeature {\r\n    private _client: SpecificationLanguageClient;\r\n    private _context: ExtensionContext;\r\n    private _runPOGDisp: Disposable;\r\n    private _lastUri: Uri;\r\n\r\n    constructor(client: SpecificationLanguageClient, context: ExtensionContext) {\r\n        this._client = client;\r\n        this._context = context;\r\n    }\r\n\r\n    fillClientCapabilities(capabilities: ClientCapabilities): void {\r\n        if(!capabilities.experimental)\r\n            capabilities.experimental = { combinatorialTesting: true };\r\n        else\r\n            Object.assign(capabilities.experimental, {combinatorialTesting: true});\r\n    }\r\n\r\n    initialize(capabilities: ServerCapabilities<ExperimentalCapabilities>): void {\r\n        // If server supports POG\r\n        \r\n    }\r\n}","import { ExtensionContext, Disposable, Uri, window, commands } from \"vscode\";\r\nimport { StaticFeature, ClientCapabilities, ServerCapabilities } from \"vscode-languageclient\";\r\nimport { ProofObligationPanel } from \"./ProofObligationPanel\";\r\nimport { ExperimentalCapabilities, POGUpdatedNotification, GeneratePOParams, GeneratePORequest } from \"./protocol.lspx\";\r\nimport { SpecificationLanguageClient } from \"./SpecificationLanguageClient\";\r\n\r\nexport class ProofObligationGenerationFeature implements StaticFeature {\r\n    private _client: SpecificationLanguageClient;\r\n    private _context: ExtensionContext;\r\n    private _runPOGDisp: Disposable;\r\n    private _lastUri: Uri;\r\n\r\n    constructor(client: SpecificationLanguageClient, context: ExtensionContext) {\r\n        this._client = client;\r\n        this._context = context;\r\n\r\n        this._runPOGDisp = this.registerCommand('extension.runPOG', () => {\r\n            window.showInformationMessage(\"Proof obligation generation is not supported by the language server\")\r\n        });\r\n    }\r\n\r\n    fillClientCapabilities(capabilities: ClientCapabilities): void {\r\n        // Client supports POG\r\n        if(!capabilities.experimental)\r\n            capabilities.experimental = { proofObligationGeneration: true };\r\n        else\r\n            Object.assign(capabilities.experimental, {proofObligationGeneration: true});\r\n    }\r\n\r\n    initialize(capabilities: ServerCapabilities<ExperimentalCapabilities>): void {\r\n        // If server supports POG\r\n        if (capabilities?.experimental?.proofObligationProvider) {\r\n            this.registerPOGCommand();\r\n            this.registerPOGUpdatedNotificationHandler();\r\n        }\r\n    }\r\n\r\n    private registerCommand = (command: string, callback: (...args: any[]) => any) => {\r\n        let disposable = commands.registerCommand(command, callback)\r\n        this._context.subscriptions.push(disposable);\r\n        return disposable;\r\n    };\r\n\r\n    private registerPOGCommand(): void {\r\n        this._runPOGDisp.dispose();\r\n        this.registerCommand('extension.runPOG', (inputUri: Uri) => this.runPOG(inputUri));\r\n    }\r\n\r\n    private registerPOGUpdatedNotificationHandler(): void {\r\n        this._client.onNotification(POGUpdatedNotification.type, (params) => {\r\n            // Only perform actions if POG View exists\r\n            if (ProofObligationPanel.currentPanel) {\r\n                // If POG is possible\r\n                if (params.successful) {\r\n                    // Request new POG\r\n                    this.runPOG(this._lastUri, false);\r\n                }\r\n                else {\r\n                    // Display warning that POs may be outdated\r\n                    ProofObligationPanel.displayWarning();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    async runPOG(inputUri: Uri, revealPOGView: boolean = true) {\r\n        window.setStatusBarMessage('Running Proof Obligation Generation', 2000);\r\n\r\n        let uri = inputUri || window.activeTextEditor?.document.uri;\r\n        this._lastUri = uri;\r\n\r\n        try {\r\n            // Setup message parameters\r\n            let params: GeneratePOParams = {\r\n                uri: uri.toString(),\r\n            };\r\n\r\n            // Send request\r\n            const pos = await this._client.sendRequest(GeneratePORequest.type, params);\r\n\r\n            // Create new view or show existing POG View\r\n            ProofObligationPanel.createOrShowPanel(Uri.file(this._context.extensionPath), revealPOGView);\r\n            ProofObligationPanel.currentPanel.displayNewPOS(pos);\r\n        }\r\n        catch (error) {\r\n            window.showInformationMessage(\"Proof obligation generation failed. \" + error);\r\n        }\r\n    }\r\n}\r\n","import { Uri, WebviewPanel, Disposable, window, ViewColumn, workspace, Webview } from 'vscode'\r\nimport path = require(\"path\")\r\nimport { ProofObligation } from \"./protocol.lspx\"\r\n\r\nexport class ProofObligationPanel {\r\n    private readonly _panel: WebviewPanel;\r\n    private _disposables: Disposable[] = [];\r\n    private readonly _extensionUri: Uri;\r\n    private _pos: ProofObligation[];\r\n    private _showProvedPOs = true;\r\n    private _sorting = new Map<string, boolean>(); // Maps a header to a boolean telling if sorting should be done DESCENDING.\r\n    private _currentSortingHeader: string;\r\n\r\n    public static currentPanel: ProofObligationPanel | undefined;\r\n    public static readonly viewType = 'proofObligationPanel';\r\n\r\n    public static createOrShowPanel(extensionUri: Uri, moveFocus: boolean) {\r\n        // Define which column the po view should be in\r\n        const column = window.activeTextEditor\r\n            ? window.activeTextEditor.viewColumn + 1\r\n            : ViewColumn.Two;\r\n\r\n        // Check if a panel already exists\r\n        if (ProofObligationPanel.currentPanel) {\r\n            // Put panel in focus\r\n            if(moveFocus)\r\n                ProofObligationPanel.currentPanel._panel.reveal(column, true);\r\n            return;\r\n        }\r\n\r\n        // Create a new panel.\r\n        const panel = window.createWebviewPanel(\r\n            ProofObligationPanel.viewType,\r\n            'Proof Obligations',\r\n            {\r\n                viewColumn: column,\r\n                preserveFocus: true\r\n            },\r\n            {\r\n                // Enable javascript in the webview\r\n                enableScripts: true,\r\n\r\n                // Restrict the webview to only load content from the extension's `resources` directory.\r\n                localResourceRoots: [ProofObligationPanel.resourcesUri(extensionUri)],\r\n\r\n                // Retain state when PO view goes into the background\r\n                retainContextWhenHidden: true\r\n            },\r\n        );\r\n\r\n        ProofObligationPanel.currentPanel = new ProofObligationPanel(extensionUri, panel);\r\n    }\r\n\r\n    private constructor(extensionUri: Uri, panel: WebviewPanel) {\r\n        this._panel = panel;\r\n        this._extensionUri = extensionUri;\r\n        // Listen for when the panel is disposed\r\n        // This happens when the user closes the panel or when the panel is closed programatically\r\n        this._panel.onDidDispose(() => this.dispose(), null, this._disposables);\r\n\r\n        // Handle messages from the webview\r\n        this._panel.webview.onDidReceiveMessage(\r\n            async message => {\r\n                switch (message.command) {\r\n                    case 'goToSymbol':\r\n                        // Find path of po with id\r\n                        let po = this._pos.find(d => d.id.toString() == message.text);\r\n                        let path = Uri.parse(po.location.uri.toString()).path;\r\n\r\n                        // Open the specification file with the symbol responsible for the po\r\n                        let doc = await workspace.openTextDocument(path);\r\n\r\n                        // Show the file\r\n                        window.showTextDocument(doc.uri, { selection: po.location.range, viewColumn: 1 })\r\n                        return;\r\n                    case 'sort':\r\n                        // Sort and post pos to javascript\r\n                        this._currentSortingHeader = message.text;\r\n                        this._panel.webview.postMessage({ command: \"rebuildPOview\", pos: this.sortPOs(this._pos, this._currentSortingHeader, true) });\r\n                        return;\r\n                    case 'toggleDisplayProvedPOs':\r\n                        this._showProvedPOs = this._showProvedPOs ? false : true;\r\n                        this._panel.webview.postMessage({ command: \"rebuildPOview\", pos: this.sortPOs(this._pos, this._currentSortingHeader, false) });\r\n                        this._panel.webview.postMessage({ command: \"displayProvedPOsToggled\", toggleState: this._showProvedPOs });\r\n                        return;\r\n                }\r\n            },\r\n            null,\r\n            this._disposables\r\n        );\r\n\r\n        // Generate the html for the webview\r\n        this._panel.webview.html = this._getHtmlForWebview(this._panel.webview);\r\n    }\r\n\r\n    public static displayWarning() {\r\n        // Post display warming message to javascript\r\n        this.currentPanel._panel.webview.postMessage({ command: \"posInvalid\" });\r\n    }\r\n\r\n    public displayNewPOS(pos: ProofObligation[]) {\r\n        // Sort and post pos to javascript\r\n        this._pos = pos;\r\n\r\n        if(pos.length < 1)\r\n        {\r\n            this._panel.webview.postMessage({ command: \"newPOs\", pos: pos });\r\n            return;\r\n        }\r\n\r\n        if (!this._currentSortingHeader)\r\n            this._currentSortingHeader = Object.keys(pos[0])[0];\r\n\r\n        this._panel.webview.postMessage({ command: \"newPOs\", pos: this.sortPOs([...pos], this._currentSortingHeader, false) });\r\n        this._panel.webview.postMessage({ command: \"displayProvedPOsToggled\", toggleState: this._showProvedPOs });\r\n    }\r\n\r\n    private sortPOs(pos, sortingHeader, changeSortingDirection) {\r\n        if (pos.length < 1)\r\n            return pos;\r\n\r\n        // Add header and sorting state to sorting map\r\n        if (!this._sorting.has(sortingHeader))\r\n            this._sorting.set(sortingHeader, false)\r\n        else if (changeSortingDirection)\r\n            this._sorting.set(sortingHeader, this._sorting.get(sortingHeader) ? false : true);\r\n\r\n\r\n        // Filter proved pos\r\n        if (!this._showProvedPOs)\r\n            pos = pos.filter(function (po) {\r\n                return po.proved !== true;\r\n            });\r\n\r\n        // Check if values are numbers - assumes all values found in the column are of the same type\r\n        let isNum = /^\\d+$/.test(pos[0][sortingHeader]);\r\n\r\n        // Do number sort\r\n        if (isNum) {\r\n            pos.sort(function (a, b) {\r\n                let aval = a[Object.keys(a).find(k => k == sortingHeader)];\r\n                let bval = b[Object.keys(b).find(k => k == sortingHeader)];\r\n                return aval - bval;\r\n            });\r\n        }\r\n        // Do string sort\r\n        else {\r\n            pos.sort(function (a, b) {\r\n                let aStringVal = a[Object.keys(a).find(k => k == sortingHeader)];\r\n                let bStringVal = b[Object.keys(b).find(k => k == sortingHeader)];\r\n                let aIdVal = a[\"id\"];\r\n                let bIdVal = b[\"id\"];\r\n\r\n                if (aStringVal instanceof Array) {\r\n                    aStringVal = aStringVal.join(\".\");\r\n                    bStringVal = bStringVal.join(\".\");\r\n                }\r\n\r\n                return aStringVal == bStringVal ? aIdVal - bIdVal : aStringVal.localeCompare(bStringVal);\r\n            });\r\n        }\r\n        // Change sorted direction\r\n        if (this._sorting.get(sortingHeader))\r\n            pos.reverse();\r\n\r\n        return pos;\r\n    }\r\n\r\n    public dispose() {\r\n        ProofObligationPanel.currentPanel = undefined;\r\n\r\n        // Clean up our resources\r\n        this._panel.dispose();\r\n\r\n        while (this._disposables.length) {\r\n            const x = this._disposables.pop();\r\n            if (x) {\r\n                x.dispose();\r\n            }\r\n        }\r\n    }\r\n\r\n    private static resourcesUri(extensionUri: Uri){\r\n        let res = Uri.joinPath(extensionUri,'resources');\r\n        return res;\r\n    }\r\n\r\n    private _getHtmlForWebview(webview: Webview) {\r\n        const scriptUri = webview.asWebviewUri(Uri.joinPath(ProofObligationPanel.resourcesUri(this._extensionUri), 'main.js'));\r\n        const styleUri = webview.asWebviewUri(Uri.joinPath(ProofObligationPanel.resourcesUri(this._extensionUri), 'main.css'));\r\n\r\n        // Use a nonce to only allow specific scripts to be run\r\n        const scriptNonce = getNonce();\r\n\r\n        return `<!DOCTYPE html>\r\n        <html lang=\"en\">\r\n        <head>\r\n            <meta charset=\"UTF-8\">\r\n            <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; style-src ${webview.cspSource}; script-src 'nonce-${scriptNonce}';\">\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n            \r\n            <link href=\"${styleUri}\" rel=\"stylesheet\">\r\n        </head>\r\n        <body>\r\n            <button id=\"expandPOsBtn\">Expand all proof obligations</button>\r\n            <button id=\"hideProvedPosBtn\">Hide proved proof obligations</button>\r\n            <br>\r\n            <p id=\"posInvalid\"><b>Warning:</b> Proof obligations are no longer guarenteed to be valid!</p>\r\n            <div id=\"poContainer\"></div>\r\n            <script nonce=\"${scriptNonce}\" src=\"${scriptUri}\"></script>\r\n        </body>\r\n        </html>`;\r\n    }\r\n}\r\n\r\nfunction getNonce() {\r\n    let text = '';\r\n    const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (let i = 0; i < 32; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return text;\r\n}\r\n\r\n\r\n","import { ExtensionContext } from \"vscode\";\r\nimport { LanguageClient, LanguageClientOptions, ServerOptions } from \"vscode-languageclient\";\r\nimport { CombinantorialTestingFeature } from \"./CombinatorialTestingFeature\";\r\nimport { ProofObligationGenerationFeature } from \"./ProofObligationGenerationFeature\";\r\n\r\nexport class SpecificationLanguageClient extends LanguageClient {\r\n    private _context: ExtensionContext;\r\n\r\n    constructor(id: string, name: string, serverOptions: ServerOptions, clientOptions: LanguageClientOptions, context: ExtensionContext, forceDebug?: boolean) {\r\n        super(id, name, serverOptions, clientOptions, forceDebug);\r\n\r\n        this._context = context\r\n\r\n        //this.registerFeature(new ProofObligationGenerationFeature(this, this._context));\r\n        this.registerFeatures([new ProofObligationGenerationFeature(this,this._context), new CombinantorialTestingFeature(this, this._context)]);\r\n    }\r\n}","import * as vscode from \"vscode\";\r\n\r\nexport function initDebugConfig(context: vscode.ExtensionContext, port: number, dialect: string) {\r\n    // register a configuration provider for 'vdm' debug type\r\n    const provider = new VdmConfigurationProvider(dialect);\r\n    context.subscriptions.push(vscode.debug.registerDebugConfigurationProvider(dialect, provider));\r\n\r\n    // run the debug adapter as a server inside the extension and communicating via a socket\r\n    let factory = new VdmDebugAdapterDescriptorFactory(port);\r\n\r\n    context.subscriptions.push(vscode.debug.registerDebugAdapterDescriptorFactory(dialect, factory));\r\n    if ('dispose' in factory) {\r\n        context.subscriptions.push(factory);\r\n    }\r\n}\r\n\r\nexport class VdmConfigurationProvider implements vscode.DebugConfigurationProvider {\r\n    constructor(\r\n        private dialect: string\r\n    ) {}\r\n    /**\r\n     * Massage a debug configuration just before a debug session is being launched,\r\n     * e.g. add all missing attributes to the debug configuration.\r\n     */\r\n    resolveDebugConfiguration(folder: vscode.WorkspaceFolder | undefined, config: vscode.DebugConfiguration, token?: vscode.CancellationToken): vscode.ProviderResult<vscode.DebugConfiguration> {\r\n\r\n        // if launch.json is missing or empty\r\n        if (!config.type && !config.request && !config.name) {\r\n            const editor = vscode.window.activeTextEditor;\r\n            if (editor && editor.document.languageId === this.dialect) {   // TODO figure out if debug configurations should be language specific or if this is fine\r\n\t\t\t// if (editor && editor.document.languageId.startsWith(\"vdm\")) {\r\n                config.type = this.dialect;\r\n                config.name = 'Launch';\r\n                config.request = 'launch';\r\n                config.stopOnEntry = true;\r\n                config.noDebug = false;\r\n            }\r\n        }\r\n\r\n        return config;\r\n    }\r\n}\r\n\r\nexport class VdmDebugAdapterDescriptorFactory implements vscode.DebugAdapterDescriptorFactory {\r\n    constructor(\r\n        private dapPort: number\r\n    ) { }\r\n\r\n    createDebugAdapterDescriptor(session: vscode.DebugSession, executable: vscode.DebugAdapterExecutable | undefined): vscode.ProviderResult<vscode.DebugAdapterDescriptor> {\r\n        // make VS Code connect to debug server\r\n        return new vscode.DebugAdapterServer(this.dapPort);\r\n    }\r\n}","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n\r\nimport * as dapSupport from \"./dapSupport\"\r\nimport * as path from 'path';\r\nimport * as fs from 'fs'\r\nimport * as net from 'net';\r\nimport * as child_process from 'child_process';\r\nimport * as portfinder from 'portfinder';\r\nimport * as vscode from 'vscode'\r\nimport { \r\n\tworkspace, \r\n\tExtensionContext} from 'vscode';\r\nimport {\r\n    LanguageClientOptions,\r\n    ServerOptions,\r\n    StreamInfo\r\n} from 'vscode-languageclient';\r\nimport { SpecificationLanguageClient } from \"./SpecificationLanguageClient\";\r\n\r\nconst SERVERNAME = \"lsp-0.0.1.jar\"\r\nconst VDMJNAME = \"vdmj-4.3.0.jar\"\r\n\r\nlet client : SpecificationLanguageClient;\r\n\r\nexport async function activate(context: ExtensionContext, vdmDialect : string) {\r\n    let clientLogFile = path.resolve(context.extensionPath, vdmDialect + '_lang_client.log');\r\n    let serverLogFile = path.resolve(context.extensionPath, vdmDialect + '_lang_server.log');\r\n    let serverMainClass = 'lsp.LSPServerStdio'\r\n\tlet vdmjPath = path.resolve(context.extensionPath,'resources', VDMJNAME);\r\n\tlet lspServerPath = path.resolve(context.extensionPath, 'resources', SERVERNAME);\r\n\r\n    function createServer(): Promise<StreamInfo> {\r\n        return new Promise(async (resolve, reject) => {\r\n            portfinder.getPortPromise()\r\n                .then((dapPort) => {\r\n                    let args = [\r\n                        '-Dlog.filename=' + serverLogFile,\r\n                        '-cp', vdmjPath + path.delimiter + lspServerPath,\r\n                        serverMainClass,\r\n                        '-' + vdmDialect,\r\n                        '-dap', dapPort.toString()\r\n                    ]\r\n\r\n                    // Start the LSP server\r\n                    let javaPath = findJavaExecutable('java');\r\n                    if (!javaPath) {\r\n                        vscode.window.showErrorMessage(\"Java runtime environment not found!\")\r\n                        writeToLog(clientLogFile, \"Java runtime environment not found!\");\r\n                        return reject(\"Java runtime environment not found!\");\r\n                    }\r\n                    let server = child_process.spawn(javaPath, args);\r\n\r\n                    resolve({\r\n                        reader: server.stdout,\r\n                        writer: server.stdin\r\n                    });\r\n\r\n                    dapSupport.initDebugConfig(context, dapPort, vdmDialect)\r\n                })\r\n                .catch((err) => {\r\n                    writeToLog(clientLogFile, \"An error occured when finding a free dap port: \" + err);\r\n                    return reject(err)\r\n                });\r\n        })\r\n    }\r\n\r\n    let serverOptions: ServerOptions\r\n    let debug = workspace.getConfiguration(vdmDialect + '-lsp').experimentalServer;\r\n    if (debug) {\r\n        let defaultLspPort = workspace.getConfiguration(vdmDialect + '-lsp').lspPort;\r\n        let defaultDapPort = workspace.getConfiguration(vdmDialect + '-lsp').dapPort;\r\n\r\n        serverOptions = () => {\r\n            // Connect to language server via socket\r\n            let socket = net.connect({ port: defaultLspPort });\r\n            let result: StreamInfo = {\r\n                writer: socket,\r\n                reader: socket\r\n            };\r\n            return Promise.resolve(result);\r\n        };\r\n\r\n        dapSupport.initDebugConfig(context, defaultDapPort, vdmDialect)\r\n    }\r\n    else {\r\n        serverOptions = createServer\r\n    }\r\n\r\n    // Setup client options\r\n    let clientOptions: LanguageClientOptions = {\r\n        // Document selector defines which files from the workspace, that is also open in the client, to monitor.\r\n        documentSelector: [{ language: vdmDialect }],\r\n        synchronize: {\r\n            // Setup filesystem watcher for changes in vdm files\r\n            fileEvents: workspace.createFileSystemWatcher('**/.' + vdmDialect)\r\n        }\r\n    }\r\n\r\n    // Create the language client with the defined client options and the function to create and setup the server.\r\n    let client = new SpecificationLanguageClient(\r\n        vdmDialect + '-lsp',\r\n        vdmDialect.toUpperCase() + ' Language Server',\r\n        serverOptions,\r\n        clientOptions,\r\n        context\r\n    );\r\n\r\n    // Start the and launch the client\r\n    let disposable = client.start();\r\n\r\n    // Push the disposable to the context's subscriptions so that the client can be deactivated on extension deactivation\r\n    context.subscriptions.push(disposable);\r\n}\r\n\r\nexport function deactivate(): Thenable<void> | undefined {\r\n\tif (!client) {\r\n\t\treturn undefined;\r\n\t}\r\n\treturn client.stop();\r\n}\r\n\r\nfunction writeToLog(path: string, msg: string) {\r\n    let logStream = fs.createWriteStream(path, { flags: 'w' });\r\n    logStream.write(msg);\r\n    logStream.close();\r\n}\r\n\r\n// MIT Licensed code from: https://github.com/georgewfraser/vscode-javac\r\nfunction findJavaExecutable(binname: string) {\r\n    if (process.platform === 'win32')\r\n        binname = binname + '.exe';\r\n\r\n    // First search each JAVA_HOME bin folder\r\n    if (process.env['JAVA_HOME']) {\r\n        let workspaces = process.env['JAVA_HOME'].split(path.delimiter);\r\n        for (let i = 0; i < workspaces.length; i++) {\r\n            let binpath = path.join(workspaces[i], 'bin', binname);\r\n            if (fs.existsSync(binpath)) {\r\n                return binpath;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Then search PATH parts\r\n    if (process.env['PATH']) {\r\n        let pathparts = process.env['PATH'].split(path.delimiter);\r\n        for (let i = 0; i < pathparts.length; i++) {\r\n            let binpath = path.join(pathparts[i], binname);\r\n            if (fs.existsSync(binpath)) {\r\n                return binpath;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Else return the binary name directly (this will likely always fail downstream) \r\n    return null;\r\n}\r\n","import { Location } from \"vscode\";\r\nimport { NotificationType, RequestType } from \"vscode-languageclient\";\r\n\r\n\r\n////////////////////////////////////////////// POG messsage extensions //////////////////////////////////////////////////\r\n\r\nexport interface ProofObligation {\r\n    id: number;\r\n    name: string[];\r\n    type: string;\r\n    location: Location;\r\n    source: string | string[];\r\n    proved?: boolean;\r\n}\r\n\r\nexport interface GeneratePOParams {\r\n    uri: string;\r\n}\r\n\r\nexport namespace GeneratePORequest {\r\n    export const type = new RequestType<GeneratePOParams, ProofObligation[] | null, void, void>('lspx/POG/generate');\r\n}\r\n\r\nexport interface POGUpdatedParams {\r\n    uri?: string, \t\t\t// TODO: Remove once nick removes it from the server\r\n    successful: boolean\r\n}\r\n\r\nexport namespace POGUpdatedNotification {\r\n    export const type = new NotificationType<POGUpdatedParams>('lspx/POG/updated')\r\n}\r\n\r\n/**\r\n * The experimental capabilities that the server can reply\r\n */\r\nexport interface ExperimentalCapabilities {\r\n    proofObligationProvider?: boolean\r\n}","import { ExtensionContext } from \"vscode\";\r\nimport * as vdmExtension from \"../../common/src/extension\"\r\n\r\nexport async function activate(context: ExtensionContext) {\r\n    return vdmExtension.activate(context, \"vdmrt\");\r\n}\r\n\r\nexport function deactivate(): Thenable<void> | undefined {\r\n    return vdmExtension.deactivate();\r\n}\r\n","module.exports = require(\"child_process\");;","module.exports = require(\"crypto\");;","module.exports = require(\"fs\");;","module.exports = require(\"net\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"tty\");;","module.exports = require(\"util\");;","module.exports = require(\"vscode\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(112);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};"],"sourceRoot":""}